---
title: Архитектура процессора
description: Xamarin. Android поддерживает несколько архитектур ЦП, включая 32-разрядные и 64-разрядные устройства. В этой статье объясняется, как выбрать для приложения одну или несколько архитектур ЦП, поддерживаемых Android.
ms.prod: xamarin
ms.assetid: D4BC889D-9164-49BB-9B7B-F6C4E4E109F1
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 05/30/2019
ms.openlocfilehash: 2fec93ce6924d74f848cbd24736e75b0d1304584
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73019371"
---
# <a name="cpu-architectures"></a>Архитектура процессора

_Xamarin. Android поддерживает несколько архитектур ЦП, включая 32-разрядные и 64-разрядные устройства. В этой статье объясняется, как выбрать для приложения одну или несколько архитектур ЦП, поддерживаемых Android._

## <a name="cpu-architectures-overview"></a>Обзор архитектуры ЦП

При подготовке приложения к выпуску необходимо указать архитектуру ЦП платформы, которую поддерживает ваше приложение. Один APK-файл может содержать код для нескольких различных архитектур. Каждая коллекция кода, зависящего от архитектуры, связана с *двоичным интерфейсом приложения* (ABI). Каждый интерфейс ABI определяет, как должен взаимодействовать этот машинный код с Android во время выполнения.
Дополнительные сведения о том, как это работает, см. в статье [многоядерные устройства &amp; Xamarin. Android](~/android/deploy-test/multicore-devices.md).

## <a name="how-to-specify-supported-architectures"></a>Указание поддерживаемых архитектур

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

Как правило, при настройке приложения для **выпуска**вы явно выбрали архитектуру (или архитектуры). Если приложение настроено для **отладки**, для параметра **использовать общую среду выполнения** и **используются параметры быстрого развертывания** , что отключает явный выбор архитектуры.

В Visual Studio щелкните правой кнопкой мыши проект в **Обозреватель решений** и выберите пункт **свойства**. На странице **Параметры Android** проверьте раздел **Свойства упаковки** и убедитесь, что параметр **использовать общую среду выполнения** отключен (отключение позволяет явно выбрать, для какой ABI требуется поддержка). Нажмите кнопку **Дополнительно** и в разделе **Поддерживаемые архитектуры**проверьте архитектуры, которые требуется поддерживать.

[![выбора ARMEABI и ARMEABI-V7A](cpu-architectures-images/vs/01-abi-selections-sml.png)](cpu-architectures-images/vs/01-abi-selections.png#lightbox)

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

Как правило, при настройке приложения для **выпуска**вы явно выбрали архитектуру (или архитектуры). Если приложение настроено для **отладки**, включаются параметры **использовать совместное использование среды выполнения Mono** и **быстрое развертывание сборок** , что предотвращает выбор явной архитектуры.

В Visual Studio для Mac выберите проект на панели **решения** , щелкните значок шестеренки рядом с проектом и выберите **Параметры**. В диалоговом окне **Параметры проекта** щелкните **Сборка Android**. Перейдите на вкладку **Общие** и убедитесь, что параметр **использовать общую среду выполнения Mono** отключен (отключить этот параметр позволяет явно выбрать, для какой ABI поддерживать). Перейдите на вкладку **Дополнительно** и в разделе **Поддерживаемые ABI**проверьте ABI для архитектур, которые требуется поддерживать.

[![выбора ARMEABI и ARMEABI-V7A](cpu-architectures-images/xs/01-abi-selections-sml.png)](cpu-architectures-images/xs/01-abi-selections.png#lightbox)

-----

Xamarin.Android поддерживает следующие варианты архитектуры:

- **armeabi** &ndash; процессоры на базе ARM, поддерживающие по меньшей мере набор инструкций ARMv5TE. Обратите внимание, что `armeabi` не является потокобезопасным и не следует использовать на многопроцессорных устройствах.

> [!NOTE]
> Начиная с [Xamarin. Android 9,2](https://docs.microsoft.com/xamarin/android/release-notes/9/9.2#removal-of-support-for-armeabi-cpu-architecture), `armeabi` больше не поддерживается.

- **ARMEABI-v7a** &ndash; процессоры на базе ARM с аппаратными операциями с плавающей запятой и устройствами с несколькими ЦП (SMP). Обратите внимание, что `armeabi-v7a` машинный код не будет выполняться на устройствах ARMv5.

- **arm64-v8a** &ndash; процессоры на основе архитектуры 64-bit ARMv8.

- Процессоры **x86** &ndash;, поддерживающие набор инструкций x86 (или IA-32). Этот набор инструкций эквивалентен инструкциям Pentium Pro, включая MMX, SSE, SSE2 и SSE3.

- **x86_64** Процессоры, поддерживающие 64-разрядный x86 (также называемый *x64* и *AMD64*).

Для Xamarin. Android по умолчанию используется `armeabi-v7a` для сборок **выпуска** . Этот параметр обеспечивает значительно большую производительность, чем `armeabi`. Если вы нацелены на платформу 64-разрядной ARM (например, в табличное размещение 9), выберите `arm64-v8a`. Если вы развертываете приложение на устройстве x86, выберите `x86`. Если целевое устройство x86 использует архитектуру с 64-разрядным ПРОЦЕССОРом, выберите `x86_64`.

## <a name="targeting-multiple-platforms"></a>Нацеливание на несколько платформ

Чтобы ориентироваться на несколько архитектур ЦП, можно выбрать несколько интерфейсов ABI (за счет увеличения размера файла APK). Можно использовать параметр **создать один пакет (. apk) для каждого выбранного параметра ABI** (см. описание в разделе [Установка свойств упаковки](~/android/deploy-test/release-prep/index.md#Set_Packaging_Properties)), чтобы создать отдельный APK для каждой поддерживаемой архитектуры.

Вам не нужно выбирать **arm64-v8a** или **x86_64** для целевых 64-разрядных устройств. 64-разрядная поддержка не требуется для запуска приложения на 64-разрядном оборудовании. Например, 64-разрядные устройства ARM (например, в виде [хранилища 9](https://www.google.com/nexus/9/)) могут запускать приложения, настроенные для `armeabi-v7a`. Основное преимущество поддержки 64-разрядной версии заключается в том, чтобы предоставить приложению возможность обращаться к большему объему памяти.

> [!NOTE]
> Начиная с августа 2018 г. новые приложения должны будут использовать API уровня 26, а с августа 2019 г. будет [необходимо выпускать 64-разрядные версии приложений](https://android-developers.googleblog.com/2017/12/improving-app-security-and-performance.html) в дополнение к 32-разрядным.

## <a name="additional-information"></a>Дополнительные сведения

В некоторых ситуациях может потребоваться создать отдельный APK для каждой архитектуры (чтобы уменьшить размер APK, или потому, что приложение имеет общие библиотеки, характерные для конкретной архитектуры ЦП).
Дополнительные сведения об этом подходе см. в разделе [Build ABI-пакетов apk](~/android/deploy-test/building-apps/abi-specific-apks.md).
