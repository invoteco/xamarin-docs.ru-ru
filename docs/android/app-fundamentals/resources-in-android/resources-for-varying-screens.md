---
title: Создание ресурсов для разных экранов
ms.prod: xamarin
ms.assetid: 3D17DE45-115C-7192-5685-44F8EEE07DCC
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 08/28/2018
ms.openlocfilehash: cbd392dcae173eb3baf0fb8f0c3c4ec7c0da23a1
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73025119"
---
# <a name="creating-resources-for-varying-screens"></a>Создание ресурсов для различных экранов

Android работает на многих разных устройствах, каждый из которых имеет широкий спектр разрешений, размеров экрана и плотности экрана. Android выполнит масштабирование и измените размер, чтобы приложение работало на этих устройствах, но это может привести к неоптимальному взаимодействии с пользователем. Например, изображения могут выглядеть размытыми, или же они могут располагаться как ожидается в представлении.

## <a name="concepts"></a>Концепции

Для обеспечения поддержки нескольких экранов важно понимать несколько терминов и концепций.

- **Размер экрана** &ndash; объем физического пространства для отображения приложения

- **Плотность экрана** &ndash; количество пикселей в любой заданной области экрана. Типичная единица измерения — точка на дюйм (DPI).

- **Разрешение** &ndash; общее количество пикселей на экране. При разработке приложений разрешение не так важно, как размер и плотность экрана.

- **Независимый от плотности пиксель (DP)** &ndash; виртуальную единицу измерения, позволяющую разрабатывать макеты независимо от плотности. Эта формула используется для преобразования точки DP в экранные пиксели:

    px &equals; DP &times; dpi &divide; 160

- **Ориентация** &ndash; ориентация экрана считается альбомной, если ширина изображения превышает высоту. В отличие от ориентации, книжная ориентация имеет значение, когда высота экрана превышает ширину. Ориентация может измениться в течение времени существования приложения, когда пользователь поворачивает устройство.

Обратите внимание, что первые три из этих концепций являются взаимосвязанными &ndash; увеличением разрешения без увеличения плотности увеличится размер экрана. Однако при увеличении плотности и разрешения размер экрана может остаться неизменным. Такая связь между размером экрана, плотностью и разрешением усложняет поддержку экрана.

Для решения этой сложности платформа Android предпочитает использовать *аппаратно-независимые пиксели (DP)* для макетов экрана. Используя независимые от плотности Пиксели, элементы пользовательского интерфейса будут отображаться для одного и того же физического размера на экранах с различной плотностью.

## <a name="supporting-various-screen-sizes-and-densities"></a>Поддержка различных размеров и плотности экрана

Android обрабатывает большую часть работы, чтобы правильно отобразить макеты для каждой конфигурации экрана. Однако есть некоторые действия, которые можно предпринять, чтобы помочь системе.

Использование независимых от плотности пикселей вместо фактических пикселей в макетах является достаточным в большинстве случаев для обеспечения независимости от плотности.
Android будет масштабировать драваблес во время выполнения до соответствующего размера.
Однако возможно, что масштабирование приведет к неразмытому появлению растровых изображений. Чтобы обойти эту проблему, предоставьте альтернативные ресурсы для другой плотности. При проектировании устройств для нескольких разрешений и плотности экрана будет проще начать с более высокого разрешения или плотности изображения, а затем уменьшить масштаб.

### <a name="declare-the-supported-screen-size"></a>Объявление поддерживаемого размера экрана

Объявление размера экрана гарантирует, что только поддерживаемые устройства смогут скачать приложение. Это достигается путем установки элемента [поддержки-screens](https://developer.android.com/guide/topics/manifest/supports-screens-element.html) в файле **AndroidManifest. XML** . Этот элемент используется для указания того, какие размеры экрана поддерживаются приложением. Данный экран считается поддерживаемым, если приложение может правильно расположить макеты для заполнения экрана. С помощью этого элемента манифеста приложение не будет отображаться в [*Google Play*](https://play.google.com/) для устройств, которые не соответствуют спецификациям экрана. Однако приложение по-прежнему будет работать на устройствах с неподдерживаемыми экранами, но макеты могут выглядеть размытыми и пикселизованным.

Поддерживаемые экранные Сиксес объявляются в файле **задающий свойства/AndroidManifest. XML** решения:

<!-- markdownlint-disable MD001 -->

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

[![манифеста Android](resources-for-varying-screens-images/01-android-manifest-sml.w1581.png)](resources-for-varying-screens-images/01-android-manifest.w1581.png#lightbox)

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

[![манифеста Android](resources-for-varying-screens-images/01-android-manifest-sml.m761.png)](resources-for-varying-screens-images/01-android-manifest.m761.png#lightbox)

-----

Измените **AndroidManifest. XML** , чтобы включить [поддержку экранов](https://developer.android.com/guide/topics/manifest/supports-screens-element.html):

```xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          android:versionCode="1"
          android:versionName="1.0"
          package="HelloWorld.HelloWorld">
      <uses-sdk android:minSdkVersion="21" android:targetSdkVersion="27" />
      <supports-screens android:resizable="true"
                        android:smallScreens="true"
                        android:normalScreens="true"
                        android:largeScreens="true" />
      <application android:allowBackup="true"
                   android:icon="@mipmap/ic_launcher"
                   android:label="@string/app_name"
                   android:roundIcon="@mipmap/ic_launcher_round"
                   android:supportsRtl="true" android:theme="@style/AppTheme">
  </application>
</manifest>
```

### <a name="provide-alternate-layouts-for-different-screen-sizes"></a>Предоставление альтернативных макетов для различных размеров экрана

Альтернативные макеты позволяют настроить представление для размера экрана спеЦифк, изменяя положение или размер элементов пользовательского интерфейса компонента.

Начиная с уровня API 13 (Android 3,2), размеры экранов не рекомендуются в пользу использования квалификатора SW*N*DP. Этот новый квалификатор объявляет объем пространства, необходимого для данного макета. Рекомендуется, чтобы приложения, предназначенные для работы на Android 3,2 или более поздней версии, использовали эти более новые квалификаторы.

Например, если для макета требуется минимальная 700-я точка в ширину экрана, альтернативный макет будет находиться в **макете папки — sw700dp**:

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

![Папка макета для ширины экрана 700 DP](resources-for-varying-screens-images/03-layout-sw700dp-vs.png)

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

![Папка макета для ширины экрана 700 DP](resources-for-varying-screens-images/03-layout-sw700dp-xs.png)

-----

Ниже приведены некоторые значения для различных устройств.

- **Стандартная телефонная** &ndash; 320 DP: обычный телефон

- **Устройство с 5 "планшетом" или "", "Многоэлементный",** 480 &ndash; DP, например Примечание Samsung.

- **7 "планшет** &ndash; 600 DP: например, Барнса &amp; благородные Нук

- **10 "планшет** &ndash; 720 DP: например, ксум Motorola

Для приложений, предназначенных для уровней API до 12 (Android 3,1), макеты должны находиться в каталогах, использующих квалификаторы **small**/**обычная**/**больших**/**ксларже** как обобщения различных размеров экрана, доступных на большинстве устройств. Например, на рисунке ниже приведены дополнительные ресурсы для четырех различных размеров экрана:

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

![Альтернативные ресурсы для четырех размеров экрана](resources-for-varying-screens-images/04-layout-large-vs.png)

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

![Альтернативные ресурсы для четырех размеров экрана](resources-for-varying-screens-images/04-layout-large-xs.png)

-----

Ниже приведено сравнение того, как более старые квалификаторы размера экрана, предшествующие API уровня 13, сравниваются с пикселями, не зависящими от плотности.

- 426 DP x 320 DP **невелика**

- 470 DP x 320 DP является **нормальной**

- 640 DP x 480 DP **большие**

- 960 DP x 720 DP — **ксларже**

Новые квалификаторы размера экрана на уровне API 13 и выше имеют более высокий приоритет, чем предыдущие квалификаторы экрана на уровнях API 12 и ниже.
Для приложений, которые будут охватывать старый и новый уровни API, может потребоваться создать альтернативные ресурсы с помощью обоих наборов квалификаторов, как показано на следующем снимке экрана:

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

![Альтернативные ресурсы с обоими квалификаторами](resources-for-varying-screens-images/05-both-qualifiers-vs.png)

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

![Альтернативные ресурсы с обоими квалификаторами](resources-for-varying-screens-images/05-both-qualifiers-xs.png)

-----

### <a name="provide-different-bitmaps-for-different-screen-densities"></a>Укажите разные точечные рисунки для различной плотности экрана

Несмотря на то, что Android будет масштабировать точечные рисунки по мере необходимости для устройства, растровые изображения могут не элегантной масштабирование. они могут стать нечеткими или размытыми. Предоставление точечных рисунков, подходящих для плотности экрана, снизит эту проблему.

Например, приведенный ниже рисунок представляет собой пример проблем макета и внешнего вида, которые могут возникнуть, если не предоставлены ресурсы с указанием плотности.

![Снимки экрана без плотных ресурсов](resources-for-varying-screens-images/06-density-not-provided.png)

Сравните это с макетом, который предназначен для ресурсов, зависящих от плотности:

![Снимки экрана с ресурсами, зависящими от плотности](resources-for-varying-screens-images/07-density-specific-resources.png)

### <a name="create-varying-density-resources-with-android-asset-studio"></a>Создание ресурсов с различной плотностью с помощью Android Asset Studio

Создание этих растровых изображений различной плотности может быть немного утомительным. Таким образом, Google создал интерактивную служебную программу, которая может сократить некоторые долгой, связанные с созданием этих точечных рисунков под названием [**Android Asset Studio**](https://romannurik.github.io/AndroidAssetStudio/).

[![Android Asset Studio](resources-for-varying-screens-images/08-android-asset-studio-sml.png)](resources-for-varying-screens-images/08-android-asset-studio.png#lightbox)

Этот веб-сайт поможет при создании точечных рисунков, нацеленных на четыре распространенные плотности экрана, путем предоставления одного изображения. После этого Android Asset Studio создаст точечные рисунки с некоторыми настройками, а затем позволит скачать их в виде ZIP-файла.

## <a name="tips-for-multiple-screens"></a>Советы по работе с несколькими экранами

Android работает на ошеломляющей количестве устройств, и сочетание размеров экрана и плотности экрана может показаться огромным. Приведенные ниже советы помогут сократить усилия, необходимые для поддержки различных устройств.

- **Разработка и разработка только для того, что** требуется, &ndash; существует множество различных устройств, но некоторые из них существуют в редких конструктивных факторах, которые могут требовать значительных усилий при проектировании и разработке. Панель мониторинга " [**размер и плотность экрана**](https://developer.android.com/resources/dashboard/screens.html) " — это страница, предоставляемая Google, которая предоставляет данные о декомпозиции размера экрана и матрицы плотности экрана. Эта декомпозиция позволяет получить представление о том, как выполнять разработку на экранах с поддержкой.

- **Использование DP, а не пикселей** в пикселях, становится проблематичным при изменении плотности экрана. Не жестко кодировать значения пикселей. Старайтесь не использовать пикселов в качестве точки распространения (не зависящих от плотности).

- **Избегайте** [абсолутелайаут](xref:Android.Widget.AbsoluteLayout)
  **везде, где это возможно** &ndash; оно является устаревшим на уровне API 3 (Android 1,5) и приведет к нестабильнымм макетов. Его не следует использовать. Вместо этого попробуйте использовать более гибкие графические элементы макета, такие как [**элемент LinearLayout**](xref:Android.Widget.LinearLayout), [**RelativeLayout**](xref:Android.Widget.RelativeLayout)или новое значение [**GridLayout**](xref:Android.Widget.GridLayout).

- **Выберите одну ориентацию макета в качестве &ndash; по умолчанию** , например, вместо того, чтобы использовать альтернативные ресурсы **Layout-Land** и **Layout-Port**, разместите ресурсы для альбомной ориентации в **макете**, а ресурсы для книжной ориентации **— на порт макета**.

- **Использовать лайаутпарамс для высоты и ширины** . при определении элементов пользовательского интерфейса в XML-файле макета приложение Android, использующее значения **wrap_content** и **fill_parent** , будет иметь более успешный вид на различных устройствах, чем использование пикселей или единиц распределения плотности. Эти значения измерений приводят к тому, что Android масштабирует ресурсы растрового изображения соответствующим образом. По той же причине единицы, не зависящие от плотности, лучше зарезервированы для при указании полей и дополнений элементов пользовательского интерфейса.

## <a name="testing-multiple-screens"></a>Тестирование нескольких экранов

Приложение Android должно быть протестировано для всех конфигураций, которые будут поддерживаться. Оптимальные устройства следует тестировать на самих устройствах, но во многих случаях это невозможно или практично.
В этом случае будет полезно использовать программу установки эмулятора и виртуальных устройств Android для каждой конфигурации устройства.

Пакет SDK для Android предоставляет некоторые обложки эмулятора, которые могут использоваться для создания AVD, которые будут реплицировать размер, плотность и разрешение множества устройств.
Многие поставщики оборудования также предоставляют обложки для своих устройств.

Другой вариант — использовать службы службы тестирования третьих сторон.
Эти службы будут принимать APK, запускать их на различных устройствах, а затем оставлять отзывы о том, как работает приложение.
