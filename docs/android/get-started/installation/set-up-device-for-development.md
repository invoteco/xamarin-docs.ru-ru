---
title: Настройка устройства для разработки
description: В этой статье описывается установка устройства Android и его подключение к компьютеру для использования в целях запуска и отладки приложений Xamarin.Android.
ms.prod: xamarin
ms.assetid: 9116A3AA-EA00-56AF-AE70-BAEEC045EF11
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 06/22/2018
ms.openlocfilehash: 72e0a2adc79796b3df7b6fb4eca62448f1a1a7a4
ms.sourcegitcommit: 997f7b6a1a1bc50b98c3ca5bbc75d6875ba2ae9a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2020
ms.locfileid: "79510735"
---
# <a name="set-up-device-for-development"></a>Настройка устройства для разработки

_В этой статье рассказывается о том, как настроить устройство Android и подключить его к компьютеру для запуска и отладки приложений Xamarin.Android._

После тестирования на эмуляторе Android необходимо просмотреть и протестировать приложения, работающие на устройстве Android. Необходимо включить отладку и подключить устройство к компьютеру.

Каждое из этих действий будет рассматриваться более подробно в следующих разделах.

## <a name="enable-debugging-on-the-device"></a>Включение отладки на устройстве

Для тестирования приложения Android необходимо включить отладку на устройстве. Параметры разработчика на Android были скрыты по умолчанию с версии 4.2, и их включение может варьироваться в зависимости от версии Android.

### <a name="android-90"></a>Android 9.0 и более поздних версий

На устройствах Android 9.0 и более поздних версий отладка включается следующим образом:

1. Откройте экран **Параметры**.
2. Нажмите **О телефоне**.
3. Коснитесь **Номер сборки** 7 раз, пока не появится надпись **Теперь вы являетесь разработчиком!** .

### <a name="android-80-and-android-81"></a>Android 8.0 и Android 8.1

1. Откройте экран **Параметры**.
2. Выберите **Система**.
3. Нажмите **О телефоне**.
4. Коснитесь **Номер сборки** 7 раз, пока не появится надпись **Теперь вы являетесь разработчиком!** .

### <a name="android-71-and-lower"></a>Android 7.1 и более ранней версии

1. Откройте экран **Параметры**.
2. Нажмите **О телефоне**.
3. Коснитесь **Номер сборки** 7 раз, пока не появится надпись **Теперь вы являетесь разработчиком!** .

[![Экран параметров разработчика в Android 9.0](set-up-device-for-development-images/build-version-sml.png)](set-up-device-for-development-images/build-version.png#lightbox)

### <a name="verify-that-usb-debugging-is-enabled"></a>Убедитесь, что включена отладка по USB

После включения режима разработчика на устройстве необходимо убедиться, что на устройстве включена отладка по USB. Это также зависит от версии Android.

### <a name="android-90"></a>Android 9.0 и более поздних версий

Перейдите в раздел **Параметры > Система > Дополнительно > Параметры разработчика** и включите **Отладка по USB**.

### <a name="android-80-and-android-81"></a>Android 8.0 и Android 8.1

Перейдите в раздел **Параметры > Система > Параметры разработчика** и включите **Отладка по USB**.

### <a name="android-71-and-lower"></a>Android 7.1 и более ранней версии

Перейдите в раздел **Параметры > Параметры разработчика** и включите **Отладка по USB**.

После того как вкладка **Параметры разработчика** появится в разделе **Параметры > Система**, откройте ее, чтобы увидеть параметры разработчика:

[![Экран параметров разработчика в Android 9.0](set-up-device-for-development-images/usb-debugging-sml.png)](set-up-device-for-development-images/usb-debugging.png#lightbox)

Здесь можно включить такие параметры разработчика, как отладка по USB и режим бодрствования.

## <a name="connect-the-device-to-the-computer"></a>Подключение устройства к компьютеру

Последним действием является подключение устройства к компьютеру. Самый простой и надежный способ — использовать USB.

Вы получите запрос на доверие компьютеру на устройстве, если вы еще не использовали его для отладки. Можно также установить флажок **Всегда разрешать этот компьютер**, чтобы этот запрос не появлялся при каждом подключении устройства.

![](set-up-device-for-development-images/trust-computer-for-usb-debugging.png "Google USB")

## <a name="alternate-connection-via-wifi"></a>Альтернативное подключение через Wi-Fi

Можно подключить устройство Android к компьютеру без USB-кабеля — через Wi-Fi. Этот способ требует немного больше усилий, но может быть удобен, когда устройство находится слишком далеко от компьютера, чтобы его можно было подключить по кабелю. 

### <a name="connecting-over-wifi"></a>Подключение через Wi-Fi

По умолчанию [Android Debug Bridge](https://developer.android.com/tools/help/adb.html) (*ADB*) настроен для взаимодействия с устройством Android через USB. Его можно перенастроить для использования TCP/IP вместо USB. Для этого устройство и компьютер должны находиться в одной сети Wi-Fi. Чтобы настроить среду для отладки по Wi-Fi, выполните следующие действия из командной строки:

1. Определите IP-адрес устройства Android. Можно открыть раздел **Параметры > Сеть и Интернет > Wi-Fi**, а затем выбрать сеть Wi-Fi, к которой подключено устройство и нажать **Дополнительно**. Откроется раскрывающийся список с информацией о сетевом подключении, аналогичный показанному на снимке экрана ниже:

    [![IP-адрес](set-up-device-for-development-images/ip-settings-sml.png)](set-up-device-for-development-images/ip-settings.png#lightbox)

    В некоторых версиях Android IP-адрес не будет отображаться. Его можно найти, выбрав **Параметры > О телефоне > Состояние**.

2. Подключите устройство Android к компьютеру через USB.

3. После этого перезапустите ADB, чтобы начать использовать TCP на порту 5555. В командной строке введите следующую команду:

    ```command
    adb tcpip 5555
    ```

    После ее выполнения компьютер не сможет прослушивать устройства, подключенные по USB.

4. Отсоедините USB-кабель, ведущий от устройства к компьютеру.

5. Настройте ADB для подключения к устройству Android на порту, который был указан на шаге 1 выше:

    ```command
    adb connect 192.168.1.28:5555
    ```

    После выполнения этой команды устройство Android будет подключено к компьютеру через Wi-Fi.

    После отладки через Wi-Fi ADB можно вернуть в режим USB с помощью следующей команды:
    
    ```command
    adb usb
    ```
    
    Можно указать ADB вывести список устройств, которые подключены к компьютеру. Независимо от способа подключения устройств выполните следующую команду в командной строке, чтобы увидеть подключенные устройства:
    
    ```command
    adb devices
    ```

## <a name="troubleshooting"></a>Устранение неполадок

В некоторых случаях может оказаться, что устройство не может подключиться к компьютеру. В этом случае может потребоваться проверить, установлены ли драйверы USB.

## <a name="install-usb-drivers"></a>Установка USB-драйверов

Это необязательное действие для macOS. Просто подключите устройство к компьютеру Mac с помощью USB-кабеля.

Прежде чем компьютер Windows распознает устройства Android, подключенные по USB, может потребоваться установить некоторые дополнительные драйверы.

> [!NOTE]
> Это действия по настройке устройства Google Nexus, которые приводятся в справочных целях. Действия для вашего конкретного устройства могут быть иными, однако они следуют одной схеме. Если у вас возникли проблемы, найдите их описание для вашего устройства в Интернете.

Запустите приложение **android.bat** из каталога **[путь установки пакета SDK для Android]\tools**. По умолчанию установщик Xamarin.Android поместит пакет SDK для Android в следующую папку на компьютере Windows:

`C:\Users\[username]\AppData\Local\Android\android-sdk`

### <a name="download-the-usb-drivers"></a>Скачивание USB-драйверов

Для работы устройств Google Nexus (за исключением Galaxy Nexus) требуется USB-драйвер Google. Драйвер для Galaxy Nexus [распространяет компания Samsung](https://www.samsung.com/us/support/downloads/).
Все остальные устройства Android должны использовать [USB-драйвер от соответствующего изготовителя](https://developer.android.com/tools/extras/oem-usb.html#Drivers).

Установите пакет **USB-драйвера Google**, запустив диспетчер пакетов SDK для Android и открыв папку **Дополнения**, как показано на следующем снимке экрана:

![](set-up-device-for-development-images/google-usb-driver.png "Google USB driver selected")

Установите флажок **USB-драйвер Google** и нажмите кнопку **Применить изменения**.
Файлы драйверов будут скачаны в следующую папку:

`[Android SDK install path]\extras\google\usb\_driver`

Путь по умолчанию для установки Xamarin.Android:

`C:\Users\[username]\AppData\Local\Android\android-sdk\extras\google\usb_driver`

### <a name="installing-the-usb-driver"></a>Установка USB-драйвера

Скачанные USB-драйверы необходимо установить.
Чтобы установить драйверы в Windows 7, выполните следующие действия:

1. Подключите устройство к компьютеру с помощью USB-кабеля.

2. Щелкните правой кнопкой мыши элемент "Компьютер" на рабочем столе или в проводнике Windows и выберите пункт **Управление**.

3. На левой панели выберите пункт **Общие**.

4. На правой панели найдите и разверните узел **Другие устройства**.

5. Щелкните правой кнопкой мыши имя устройства, а затем выберите пункт **Обновить драйверы**.
    Запустится мастер обновления оборудования.

6. Выберите **Выполнить поиск драйверов на этом компьютере** и нажмите кнопку **Далее**.

7. Нажмите кнопку **Обзор** и перейдите в папку USB-драйвера (USB-драйвер Google размещается в папке **[путь установки пакета SDK для Android]\extras\google\usb_driver**).

8. Нажмите кнопку **Далее**, чтобы установить драйвер.

## <a name="summary"></a>Сводка

В этой статье описывалась процедура настройки устройства Android для разработки путем включения на нем отладки. Здесь также рассматривалось подключение устройства к компьютеру через USB или по Wi-Fi.

## <a name="related-links"></a>Связанные ссылки

- [Android Debug Bridge](https://developer.android.com/tools/help/adb.html)
- [Использование физических устройств](https://developer.android.com/tools/device.html)
- [Скачивания драйверов Samsung](https://www.samsung.com/us/support/downloads/)
- [USB-драйверы изготовителей оборудования](https://developer.android.com/tools/extras/oem-usb.html#Drivers)
- [USB-драйвер Google](https://developer.android.com/sdk/win-usb.html)
- [XDA Developers: Windows 8 - ADB/fastboot driver problem solved](https://forum.xda-developers.com/showthread.php?t=1583801) (Windows 8 — решена проблема драйвера ADB/fastboot)
