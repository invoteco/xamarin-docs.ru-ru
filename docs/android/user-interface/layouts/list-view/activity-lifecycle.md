---
title: ListView для Xamarin. Android и жизненный цикл действия
ms.prod: xamarin
ms.assetid: 40840D03-6074-30A2-74DA-3664703E3367
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 02/06/2018
ms.openlocfilehash: 1c093d3d67ace3b0f9186fca8226d4ef631d9af0
ms.sourcegitcommit: 57f815bf0024b1afe9754c0e28054fc0a53ce302
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/06/2019
ms.locfileid: "70762309"
---
# <a name="xamarinandroid-listview-and-the-activity-lifecycle"></a>ListView для Xamarin. Android и жизненный цикл действия

Действия проходят через определенные состояния при выполнении приложения, такие как запуск, запуск, приостановка и остановка. Дополнительные сведения и конкретные рекомендации по обработке переходов состояний см. в [руководстве по жизненному циклу действий](~/android/app-fundamentals/activity-lifecycle/index.md).
Важно понимать жизненный цикл действия и поместить `ListView` код в нужные расположения.

Все примеры в этом документе выполняют задачи настройки в `OnCreate` методе действия и (при необходимости) выполняют "уничтожение" в. `OnDestroy` В примерах обычно используются небольшие наборы данных, которые не изменяются, поэтому повторная загрузка данных является ненужной.

Однако если данные часто изменяются или используют большой объем памяти, может быть целесообразно использовать разные методы жизненного цикла для заполнения и обновления `ListView`. Например, если базовые данные постоянно изменяются (или затрагиваются обновлениями других действий), то создание адаптера в `OnStart` или `OnResume` обеспечит отображение последних данных при каждом отображении действия.

Если адаптер использует такие ресурсы, как память, или управляемый курсор, не забудьте освободить эти ресурсы в методе, где они были созданы (например, объекты, созданные `OnStart` в, могут быть удалены в. `OnStop`

## <a name="configuration-changes"></a>Изменения конфигурации

Важно помнить, что изменения &ndash; конфигурации, особенно вращение экрана и видимость &ndash; клавиатуры, могут привести к уничтожению и повторному созданию текущего действия (если не указано иное с помощью `ConfigurationChanges` атрибут). Это означает, что при нормальных условиях смена устройства приведет к созданию `ListView` и `Adapter` повторному созданию и (если только вы не написали код в `OnPause` и `OnResume`) состояние прокрутки и выбора строк будет потеряно.

Следующий атрибут предотвращает уничтожение и создание действия в результате изменений конфигурации:

```csharp
[Activity(ConfigurationChanges="keyboardHidden|orientation")]
```

Действие должно переопределяться `OnConfigurationChanged` , чтобы реагировать на эти изменения соответствующим образом. Дополнительные сведения об обработке изменений конфигурации см. в документации.
