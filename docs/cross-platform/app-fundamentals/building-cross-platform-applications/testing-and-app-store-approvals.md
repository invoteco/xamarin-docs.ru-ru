---
title: Часть 6. Тестирование и утверждение магазина приложений
description: В этом документе описывается тестирование кросс-платформенного приложения на устройстве, Управление тестовыми случаями, Автоматизация тестов, выполнение модульных тестов и работа с процессом отправки приложения.
ms.prod: xamarin
ms.assetid: 46E0578A-7EB9-C105-ABB0-A043E501F36B
author: davidortinau
ms.author: daortin
ms.date: 03/23/2017
ms.openlocfilehash: a9f84192a312f9aba98817b75c058229e6c721bb
ms.sourcegitcommit: db422e33438f1b5c55852e6942c3d1d75dc025c4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2020
ms.locfileid: "76723625"
---
# <a name="part-6---testing-and-app-store-approvals"></a>Часть 6. Тестирование и утверждение магазина приложений

## <a name="testing"></a>Тестирование

Многие приложения (даже приложения Android, в некоторых магазинах) должны пройти процесс утверждения перед публикацией. Поэтому тестирование крайне важно для того, чтобы приложение достигло рынка (самостоятельная успешная работа с клиентами). Тестирование может принимать множество форм, от модульного тестирования на уровне разработчика до управления бета-тестированием на широком спектре оборудования.

### <a name="test-on-all-platforms"></a>Тестирование на всех платформах

Существуют небольшие различия между тем, какие .NET поддерживаются на устройствах Windows Phone, планшетах и настольных ПК, а также ограничения на iOS, которые не позволяют создавать динамический код на лету. Спланируйте тестирование кода на нескольких платформах при разработке или запланируйте время для рефакторинга и обновления части модели приложения в конце проекта.

Всегда рекомендуется использовать симулятор или эмулятор для тестирования нескольких версий операционной системы, а также различные возможности и конфигурации устройств.

Также следует протестировать как можно больше различных физических устройств.

#### <a name="devices-in-cloud"></a>Устройства в облаке

Мобильный телефон и экосистема планшета постоянно растут, что делает невозможным тестирование на постоянно растущем количестве доступных устройств. Для решения этой проблемы несколько служб предлагают возможность удаленного управления множеством различных устройств, чтобы приложения можно было устанавливать и тестировать, не требуя непосредственного вложения в множество оборудования.

Тест App Center предлагает простой способ тестирования приложений iOS и Android на сотнях разных устройств. Дополнительные сведения см. в статьях [Подготовка приложений Xamarin. Android](/appcenter/test-cloud/preparing-for-upload/xamarin-android-uitest) и [Подготовка приложений Xamarin. iOS](/appcenter/test-cloud/preparing-for-upload/xamarin-ios-uitest).

### <a name="test-management"></a>Управление тестированием

При тестировании приложений в организации или управлении программой бета-тестирования с внешними пользователями возникают две проблемы:

- **Распространение** — управление процессом подготовки (особенно для устройств iOS) и получение обновленных версий программного обеспечения тестерам.
- **Отзывы** — сбор сведений об использовании приложений и подробные сведения о любых ошибках, которые могут возникнуть.

Существует ряд служб, помогающих решить эти проблемы, предоставляя инфраструктуру, встроенную в приложение, для накопления и создания отчетов об использовании и ошибках, а также оптимизируйте процесс подготовки для помощи в регистрации и управлении тестерами и их устройствами. .

[Центр приложений Visual Studio](/appcenter/) предлагает решение этих проблем, предоставляя возможность распространения тестовой версии, создания отчетов о сбоях и сложных сведений об использовании приложений.

### <a name="test-automation"></a>Автоматизация тестирования

Xamarin [UITest](https://docs.microsoft.com/appcenter/test-cloud/preparing-for-upload/uitest) можно использовать для создания автоматизированных сценариев тестирования пользовательского интерфейса, которые могут выполняться локально или отправляться в [тест в центре приложений](https://docs.microsoft.com/appcenter/test-cloud/).

## <a name="unit-testing"></a>Модульное тестирование

### <a name="touchunit"></a>Сенсорный. Unit

Xamarin. iOS включает в себя платформу модульного тестирования с именем Touch. Unit, которая соответствует стилю JUnit/NUnit при написании тестов.

Дополнительные сведения о написании тестов и запуске Touch. Unit см. в документации по [модульному тестированию с помощью Xamarin. iOS](~/ios/deploy-test/touch.unit.md) .

### <a name="andrunit"></a>Андр. Unit

Существует эквивалент с открытым исходным кодом Touch. Unit для Android с именем Андр. Unit. Его можно скачать из [GitHub](https://github.com/spouliot/Andr.Unit) и прочитать о нем в [блоге@spouliot](https://spouliot.wordpress.com/2011/10/30/andr-unit-joins-the-family/).

## <a name="app-store-approvals"></a>Утверждения в магазине приложений

Apple и Microsoft действуют только на своих платформах: магазин приложений и Marketplace соответственно. Блокировка устройств и реализация тщательного процесса проверки приложения для управления качеством загружаемых приложений. Открытая природа Android означает, что существует ряд вариантов хранения, начиная от Google Play, который широко доступен и не имеет процесса проверки, в AppStore Amazon для Android и оборудования, таких как приложения Samsung с более ограниченным распределением. и реализуйте процесс утверждения.

Ожидание проверки приложения может быть очень непростой. это часто означает, что приложения отправляются на утверждение с небольшими маржами к ошибке до наступления "целевой" даты запуска. Сам процесс может занять до двух недель и не всегда является прозрачным: существует ограниченный отзыв о ходе выполнения приложения, пока он не будет отклонен или одобрен. Отклонение может означать отсутствие маркетингового окна возможности, особенно если оно происходит несколько раз, а недели проходят между исходной датой запуска и, когда приложение в конечном итоге утверждается.

### <a name="be-prepared"></a>Будьте готовы

Первый Совет: тщательно спланируйте запуск приложения и получите скидку для возможной отклонения и повторной отправки. Для каждого магазина необходимо создать учетную запись перед отправкой приложения. Сделайте это как можно раньше.
Хотя регистрация Google Play занимает несколько минут, если ваши приложения свободны, процесс получает гораздо больше усилий, если вы продаете их и вам нужно предоставить банковские и налоговые данные. Процессы Apple и Майкрософт являются гораздо более вовлеченными, чем Google, это может занять неделю или больше, чтобы ваша учетная запись была утверждена в планах запуска.

После утверждения учетной записи вы можете отправить приложение. Фактический процесс отправки приложений рассматривается в следующей документации:

- [Публикация в Apple App Store](~/ios/deploy-test/app-distribution/app-store-distribution/publishing-to-the-app-store.md)
- [Подготовка приложения для Google Play](~/android/deploy-test/publishing/publishing-to-google-play/index.md)
- Разработчики Windows должны посетить [центр разработки для Windows](https://developer.microsoft.com/windows/windows-apps) , чтобы ознакомиться с отправкой своих приложений.

В оставшейся части этого раздела обсуждаются вещи, которые следует учитывать, чтобы убедиться, что приложение утверждено без каких-либо выдерживает любые.

### <a name="quality"></a>Качество

Это кажется очевидным, но приложения часто отклоняются, так как они не соответствуют определенному уровню качества: в конце концов, это причина того, почему проверенные Магазины в первую очередь имеют процесс утверждения.

Сбои являются распространенной причиной отклонения. Если вы слишком просто сделаете сбой приложения, то гарантируется его отклонение. Большинство разработчиков не отправляют свои приложения с учетом того, что они будут завершаться сбоем, но часто это делают. Тщательно протестируйте приложение перед его отправкой, чтобы не только убедиться в том, что все работает, но также обработаны распространенные сценарии ошибок мобильных устройств, такие как сетевые проблемы и ограничения ресурсов, такие как память или пространство для хранения. Используйте и симулятор, и физические устройства для тестирования. независимо от того, насколько хорошо работает код в симуляторе, только устройство может продемонстрировать реальную производительность приложения. Используйте столько устройств, сколько можно найти, и закрепите группу бета-тестировщиков, если службы сторонних разработчиков могут помочь в управлении бета-версиями и отзывами.

Все мобильные операционные системы будут завершать работу приложения, которое не запускается достаточно быстро. Длина допустимого времени различается, но в целом приложения должны отвечать через несколько секунд и использовать фоновые задачи для выполнения любой работы, которая займет больше времени. Приложения, которые занимают слишком много времени для загрузки или не отвечают на запросы в обычном использовании, будут отклонены. Всегда сообщайте о пользователях, когда что-либо происходит в фоновом режиме, иначе приложение перейдет в неуспешное завершение и снова получит отказ.

### <a name="check-your-edge-cases"></a>Проверьте свои граничные варианты

Распространенная ловушка для разработчиков не позволяет устранить пограничные ситуации, особенно те, которые нуждаются в повторной настройке симулятора или устройства для правильного тестирования. Можно легко забыть, что не все клиенты будут «разрешать» приложению обращаться к своему расположению, так как после того, как разработчик принял запрос один раз, они никогда не будут получать запрос. Разрешения и использование сети особенно сосредоточился в процессе утверждения. это значит, что немалое понимание этих областей может привести к отклонению.

Следующий список является хорошей отправной точкой для проверки краевых вариантов, которые могли быть пропущены:

- **Клиенты могут запретить доступ к службам** , особенно в iOS. доступ к данным, таким как сведения о географическом расположении, предоставляется только в том случае, если пользователь предоставляет разрешение для приложения. Тестеры приложений часто должны переустановить приложение в своем первоначальном состоянии и запретить любые запросы на разрешение, чтобы обеспечить правильное выполнение приложения. Включение и отключение разрешения для проверки правильности поведения при изменении клиентов.
- **Клиенты повсеместно** — не предполагается, что приложение будет использоваться только в городе или стране, где он был разработан. Код, работающий с координатами GPS, значениями даты и времени и валютами, может зависеть от местонахождения и параметров языкового стандарта клиента. Все платформы предлагают симулятор, позволяющий указывать различные расположения и национальные настройки. Используйте его для тестирования расположений в других полушариях, а также для языков и региональных параметров, которые по-разному отформатируют даты и валюты. Значения широты и долготы могут быть положительными или отрицательными, десятичный разделитель может быть точкой или запятой, а даты могут быть отформатированы множеством способов.
- **Медленные сетевые подключения** — разработчики приложений часто работают в "идеальном мире" быстрого, постоянно работающем сетевом подключении, что очевидно не относится к реальному миру. Тестирование с низкой производительностью сети (например, с плохим подключением к 3G), а также без доступа к сети крайне важно для того, чтобы не доставлять ошибками приложение. Процесс утверждения всегда будет включать в себя тест с устройством в режиме "в самолете", поэтому убедитесь, что вы тестировали его самостоятельно.
- **Аппаратное обеспечение зависит от** того, следует протестировать на самом старом и медленном оборудовании, которое планируется поддерживать. Существует два аспекта, которые могут повлиять на работу приложения: производительность, которая может оказаться непригодной для использования на старом устройстве, и поддержка таких аппаратных функций, как камера, микрофон, GPS, гироскопом или другой дополнительный компонент. Если компонент недоступен, приложения должны постепенно снижаться (и не завершаться сбоем).

### <a name="guidelines-are-more-than-just-a-guide"></a>Рекомендации — это не просто руководство

Компания Apple известна под строгим соответствием правилам работы с человеческим интерфейсом, так как одна из ключевых сильных сторон платформы — это согласованность (и наблюдаемое увеличение удобства использования). Корпорация Майкрософт применяет аналогичный подход к приложениям Windows, реализующим [систему разработки Fluent](https://microsoft.com/design/fluent). Процесс утверждения для обеих платформ будет заключаться в том, что ваше приложение оценивается на соответствие соответствующей философии проектирования.

Это не означает, что инновации пользовательского интерфейса не поддерживаются или не рекомендуется, но есть некоторые вещи, которые не должны быть доступны, или ваше приложение будет отклонено.

В iOS это включает неправильное использование встроенных значков или использование других хорошо установленных метафор. Например, используйте значок "создать" для любого, Кроме создания нового содержимого.

Разработчикам Windows следует соблюдать осторожность. распространенной ошибкой является неправильная поддержка аппаратной кнопки Back в соответствии с рекомендациями корпорации Майкрософт.

Порекомендуйте своим дизайнерам читать и следовать рекомендациям по проектированию для каждой платформы.

### <a name="implementing-platform-specific-features"></a>Реализация функций для конкретной платформы

При реализации служб для конкретных платформ, особенно в iOS, некоторые вещи являются более строгими. Чтобы избежать автоматического отклонения от Apple, существуют некоторые правила, которые необходимо выполнить с помощью следующих функций iOS:

- **Покупки из приложений** — приложения не должны реализовывать внешние механизмы оплаты для цифровых продуктов, включая валюту для игр, функции приложений, подписки на журналы и многое другое. для такого рода функций приложения iOS должны использовать службу Apple на основе iTunes. Существуют недоработка приложения, такие как Kindle Reader, а некоторые приложения на основе подписки позволяют покупать содержимое в любом расположении, которое подключается к учетной записи, к которой можно получить доступ через приложение, однако в этом случае приложение не должно содержать ссылки или ссылки на процесс покупки вне приложения (или, опять же, он будет отклонен).
- **резервное копирование iCloud** . с появлением iCloud рецензенты Apple гораздо более точны в отношении того, как приложения используют хранилище (для обеспечения возможности удаленной архивации клиента приятный). Приложения, которые изменяют свободное место для резервного копирования, могут быть отклонены, поэтому используйте папку кэша соответствующим образом и следуйте рекомендациям, связанным с хранилищем Apple.
- **Киоска** — приложения для газет и журналов отлично подходят для киоска компании Apple, однако приложения должны реализовать по крайней мере одну автовозобновленую подписку и обеспечить утверждение в фоновом режиме загрузки.
- **Карты** — все чаще для добавления наложения и других функций к мобильным картам, однако будьте внимательны, чтобы не скрывать сведения о кредиты карты (например, логотип Google в iOS5). это приведет к отклонению.

### <a name="manage-your-metadata"></a>Управление метаданными

В дополнение к очевидным техническим проблемам, которые могут привести к отклонению приложения, существует ряд более заметных аспектов отправки, которые могут привести к отклонению, особенно в отношении метаданных (описание, ключевые слова и маркетинговые изображения), которые вы Отправьте приложение для показа в магазине приложений или Marketplace.

- **Изображения** — следуйте правилам платформы для значков приложений и изображений магазина. Не используйте изображения с товарными знаками. Мы видели, что приложения отклонены, так как их значки представляют собой рисунок iPhone!
- **Товарные знаки** — старайтесь не использовать никакие торговые марки, кроме ваших собственных. Приложениям отказано в упоминании товарных знаков в описании приложения или даже в ключевых словах в магазине Apple App Store.
- **Описание** — не используйте слово "бета-версия" или каким-либо образом указывает, что приложение не готово к использованию в качестве простого времени. Не упомянут другие мобильные платформы (даже если ваше приложение является кросс-платформенным). Что важнее всего, убедитесь, что приложение выполняет именно то, что вы говорите. Если вы перечислите ряд функций в описании, лучше было бы понять, как использовать каждую из этих функций, или вы получите «функцию, упомянутую в описании приложения не реализована».

Помещайте в метаданные приложения столько усилий, как в разработке и тестировании. Приложения отклоняются при незначительных нарушениях в метаданных, поэтому важно иметь время на их получение.

### <a name="app-stores-not-for-everyone"></a>App Stores: не для всех

Основным фокусированием магазинов на каждой платформе является распространение потребителей — возможность достигать максимально возможного количества клиентов. Однако не все приложения нацелены на потребителей, но существует быстро увеличивающийся набор внутренних и экстрасет приложений, требующих ограниченного распределения для сотрудников, поставщиков или клиентов. Эти приложения не являются "пропродажами" и не требуют утверждения, так как разработчик управляет распространением на закрытую группу пользователей.
Поддержка этого типа развертывания зависит от платформы.

В Android предлагается Наибольшая гибкость в этом отношении: приложения можно устанавливать непосредственно из URL-адреса или вложения электронной почты (если это разрешено конфигурацией устройства). Это означает, что очень просто создавать и распространять внутренние корпоративные приложения или публиковать приложения для конкретных клиентов или поставщиков.

Apple предоставляет разработчикам собственный вариант развертывания для разработчиков, зарегистрированных в программе iOS для разработчиков, которая обходит процесс утверждения магазина приложений и позволяет компаниям распределять внутренние приложения своим сотрудникам.
К сожалению, эта лицензия не требует распространения приложений, таких как экстрасети, в другие закрытые группы клиентов или поставщиков. [Развертывание Enterprise (и ad-hoc)](~/ios/deploy-test/app-distribution/ipa-support.md)

### <a name="app-store-summary"></a>Сводка App Store

Процесс проверки может быть довольно нечетким, но, как и в остальной части жизненного цикла разработки, вы можете обеспечить успешное выполнение некоторых этапов планирования и внимания. Все это сводится к нескольким простым шагам: Прочтите и изучите рекомендации по пользовательскому интерфейсу, которые необходимо придерживаться. Следуйте правилам, если вы реализуете функции для конкретной платформы, тщательно протестируйте (затем протестируйте несколько) и, наконец, убедитесь, что метаданные приложения правильный перед отправкой.

Последнее слово Совета для разработчиков, публикующих на Google Play: нехватка процесса утверждения может показаться, что это упростит вашу работу, но ваши клиенты будут еще более ресурсоемкими, чем группа рассмотрения. Следуйте этим рекомендациям, как будто приложение может быть отклонено, в противном случае — ваши клиенты, выполняющие отклонение.
