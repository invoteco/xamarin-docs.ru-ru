---
title: Локализация пользовательского интерфейса приложения
description: В этом документе описываются основные принципы интернационализации и локализации, а также рассматриваются принципы их влияния на проектирование приложений.
ms.prod: xamarin
ms.assetid: CC6847B2-23FB-4EDE-9F7E-EF29DD46A5C5
author: davidortinau
ms.author: daortin
ms.date: 03/22/2017
ms.openlocfilehash: 418c0da2b8fa0e495ae7e6a605c7fde43b6515cb
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73016796"
---
# <a name="localization"></a>Локализация

В этом руководство представлены концепции *международного* и *локализации* , а также ссылки на инструкции по созданию мобильных приложений Xamarin с использованием этих концепций.

Если вы хотите перейти непосредственно к техническим деталям локализации приложений Xamarin, начните с одной из следующих статей, посвященных конкретной платформе:

- Использование файлов RESX для кросс-платформенной локализации [**Xamarin. Forms**](~/xamarin-forms/app-fundamentals/localization/index.md) .
- Локализация собственной платформы [**Xamarin. iOS**](~/ios/app-fundamentals/localization/index.md) .
- Локализация собственной платформы [**Xamarin. Android**](~/android/app-fundamentals/localization.md) .

## <a name="i18n-and-l10n"></a>i18n и l10n

*Интернационализации* — это процесс, позволяющий коду отображать различные языки и адаптировать его отображение для различных языков (например, для форматирования чисел и дат). Это также называется *глобализацией*.

*Локализация* — это следующий шаг: создание ресурсов (например, строк и изображений) для каждого языка и объединение их с приложением интернатионализе.

Международная связь часто сокращается до i18n – сокращение для 18 букв между "i" и "n". Локализация также сокращается до l10n – для 10 букв между "L" и "n".

## <a name="overview"></a>Обзор

В этом документе представлены понятия, связанные с интернационализации и локализацией, а также способы их применения к разработке мобильных приложений в целом.
При проектировании и построении приложения элементы, которые, возможно, были жестко закодированы, но для локализации должны быть параметризованы:

- Макеты экрана и текст,
- Значки, графика и цвета,
- Видеофайлы и звуковые файлы,
- Динамический текст и форматирование текста (например, числа, денежные единицы и даты);
- Изменения макета для языков с письмом справа налево и
- Сортировка данных.

Независимо от того, какие мобильные платформы предназначены для приложения, эти советы помогут вам создать высококачественное локализованное приложение.

## <a name="design-considerations"></a>Вопросы проектирования

Создание архитектуры приложения для локализации его содержимого называется интернационализации. Правильное выполнение интернационализации не только позволяет загружать разные языковые строки во время выполнения — хорошо спроектированное приложение должно разрешать изменение всех ресурсов на основе языка и языкового стандарта (включая изображения, звуки и видео) и возможность адаптации форматирование и разметка для бизнеса с разными размерами строк.

В этом разделе обсуждаются некоторые рекомендации по проектированию, которые необходимо учитывать при создании международного приложения.

### <a name="layouts-and-string-length"></a>Макеты и длина строки

Строки китайского и японского языков могут быть очень короткими, иногда для метки поля ввода может быть достаточно одного или двух символов.

Строки на немецком языке (например,) могут быть очень длинными; Иногда относительно короткие слова английского языка на английском языке становятся очень длинными на других языках — либо обрезаются, либо иначе.

Сравните длины строк для нескольких элементов на начальном экране iOS на английском, немецком и японском языках:

[![](localization-images/language-compare-sml.png "German vs Japanese string length")](localization-images/language-compare.png#lightbox)

Обратите внимание, что **Параметры** на английском языке (8 символов) требуют 13 символов для перевода на немецкую версию, но только 2 символа на японском языке.

Макеты, где отображаемая метка и поле ввода имеют параллельную работу, если длина метки может сильно различаться. Зачастую макет, в котором метка отображается над полем, проще в локализации, так как полная ширина экрана доступна как для метки, так и для ввода.

Как правило, если вы создаете Фиксированные макеты (особенно параллельные элементы), разрешите по меньшей мере 50% ширины, чем строки на английском языке, для меток и текста. Это не позволит решить все проблемы, но предоставит буфер, который будет работать во многих случаях.

### <a name="input-validation"></a>Проверка входных данных

Помните предположения при написании правил проверки. Может показаться допустимым, что для ввода текстового поля требуется по крайней мере три символа на английском языке, так как одна буква очень редко имеет какое-то значение. В китайском и японском языках, однако один символ может быть допустимым входом, а сообщение проверки «требуется по крайней мере три символа» не имеет смысла для этих языков.

Другие очень простые задачи, такие как проверка адреса электронной почты или URL-адреса веб-сайта, становятся более сложными, а символы не ограничиваются подмножеством ASCII.

Напишите правила проверки с учетом интернационализации: выберите наименее узкие правила или напишите логику, чтобы она работала по-разному для каждого языка.

### <a name="images-and-color"></a>Изображения и цвет

Не все изображения должны меняться в зависимости от выбора языка пользователя. Многие значки и фотографии подходят для всех пользователей, а не от того, на каком языке они говорят.
Некоторые ресурсы имеют смысл локализовать, например:

- Изображения, показывающие людей или конкретные расположения. приложение может быть более релевантным для пользователей, если оно показывает локальных пользователей или расположения.
- Значки — некоторые иконографи могут быть специфичными для языка и региональных параметров, и вы можете упростить использование приложения, выполнив локализацию изображений, чтобы отразить локальное понимание.
- Цвета. Некоторые языки и региональные параметры по-разному понимают цвета. красный цвет может означать предупреждение в одном регионе, но в другом нет. Ознакомьтесь с собственными докладчиками при проектировании приложения, чтобы определить, следует ли создавать механизм локализации цветов.

### <a name="videos-and-sound"></a>Видео и звук

Видеоролики и звук представляют особые трудности при локализации приложения, поскольку в то время как довольно легко перевести строки, запись нескольких VoiceOver дорожек или видеороликов может быть как дорогостоящей, так и сложной.

Несколько копий видео-и звуковых файлов также могут значительно увеличить размер приложения (особенно при локализации на большое количество языков или при наличии большого количества мультимедийных файлов). Вы можете загрузить только необходимые языковые ресурсы после установки приложения, но это также может привести к неудовлетворительному взаимозагрузке с пользователем в сетях низкой производительности.

Часто существует несколько способов решения проблем локализации — наиболее важным моментом является рассмотрение их в начало работы и обеспечение того, что ваше приложение разрабатывается для выполнения этих задач.

### <a name="dates-times-numbers-and-currency"></a>Даты, время, числа и валюта

Если вы используете функции форматирования .NET, не забудьте указать язык и региональные параметры, чтобы синтаксический анализ десятичных разделителей был выполнен правильно (и избежать исключений преобразования). Например, 1,99 и 1, 99 являются допустимыми десятичными представлениями в зависимости от языкового стандарта.

Когда данные поступают из известного источника (IE. из собственного кода или веб-службы, которыми вы управляете), можно жестко определить идентификатор языка и региональных параметров, соответствующий форматированию, например InvariantCulture, который будет работать в стандартном формате для английского языка.

```csharp
double.Parse("1,999.99", CultureInfo.InvariantCulture);
```

Если данные введены пользователем приложения, проанализируйте их с помощью экземпляра CultureInfo, который отражает их языковой стандарт:

```csharp
double.Parse("1 999,99", CultureInfo.CreateSpecificCulture("fr-FR"));
```

Дополнительные сведения см. в статьях [анализ числовых строк](https://msdn.microsoft.com/library/xbtzcc4w(v=vs.110).aspx) и [Анализ строк даты и времени](https://msdn.microsoft.com/library/2h3syy57(v=vs.110).aspx) статьи MSDN.

<a name="rtl" />

### <a name="right-to-left-rtl-languages"></a>Языки с направлением письма справа налево

Некоторые языки, например арабский, иврит и урду (например,), считываются справа налево.
Приложения, поддерживающие эти языки, должны использовать экранные макеты, адаптированные для читателей с письмом справа налево, например:

- Текст должен быть согласован по правому краю.
- Метки должны отображаться справа от полей ввода.
- Размещение кнопок по умолчанию обычно изменяется на обратный.
- Иерархическая навигация — прокрутка и анимация (а также другие метафоры и анимации навигации), которые используют направление для контекста, тоже должны быть обратными.

Как iOS, так и Android поддерживают макеты с письмом справа налево и отрисовкой шрифтов с помощью встроенных функций, которые помогают выполнять указанные выше изменения. В настоящее время Xamarin. Forms не поддерживает автоматическую отрисовку справа налево.

### <a name="sorting"></a>Сортировка

Разные языки определяют порядок сортировки алфавитов по-разному, даже если они используют один и тот же набор символов.

См. [подробные сведения о сравнении строк](https://msdn.microsoft.com/library/dd465121(v=vs.110).aspx#the_details_of_string_comparison) в рекомендациях [по использованию строк в .NET Framework](https://msdn.microsoft.com/library/dd465121(v=vs.110).aspx) в качестве примера, где Language (CultureInfo) влияет на порядок сортировки.

Маловероятно, что встроенные возможности баз данных на мобильных платформах будут поддерживать порядок сортировки для конкретного языка, поэтому вам может потребоваться реализовать дополнительный код в бизнес-логике.

### <a name="text-search"></a>Текстовый поиск

Убедитесь, что вы написали и протестируете алгоритм поиска с учетом нескольких языков. Следует учитывать следующие моменты:

- Автозавершение — если вы создали функцию автозавершения, убедитесь, что она содержит предложения, относящиеся к языку пользователя.
- Запрос на сопоставление данных. будут ли запросы поиска, введенные на определенном языке, выполняться только для содержимого, написанного на этом языке, или для всего содержимого приложения?
- Извлечение корней: Если поиск создан для поиска похожих слов, корней Word и других оптимизаций поиска, то эти оптимизации создаются для всех поддерживаемых языков?
- Сортировка — убедитесь, что результаты сортируются правильно (см. выше).

### <a name="data-from-external-sources"></a>Данные из внешних источников

Многие приложения загружают данные из внешних источников из веб-каналов Twitter и RSS в Погода, новости или котировки акций. При отображении этого пользователя необходимо принять во внимание возможность отображения на экране ненужных или нечитаемых сведений.

Существует несколько стратегий, которые можно использовать для проверки того, отображаются ли в приложении данные, относящиеся к пользователю.

- Различные источники — приложение может скачивать данные из другого источника в зависимости от языка или языкового стандарта пользователя. Сведения о языковых стандартах, погоде и биржевых ценах могут быть более осмысленными, чем данные, загруженные с веб-канала Северной Америки.
- Локализованный экран. при отображении веб-канала Twitter или фотографий следует отображать метаданные (например, время) на своем собственном языке, даже если само содержимое остается на исходном языке.
- Перевод. Вы можете создать в приложении параметр перевода для выполнения машинного перевода входящих данных. Это может быть автоматически или по собственному усмотрению пользователя — просто не забудьте уведомить пользователя о том, что это происходит, так как перевод машин никогда не идеален.

Это также может повлиять на внешние ссылки на аудио-дорожки или видеоролики. при проектировании приложения необходимо заранее спланировать содержимое, переведенное с помощью источников, или убедиться, что пользователи должны быть осведомлены об этом пользовательском интерфейсе, когда содержимое не будет представлено в языке.

### <a name="dont-over-translate"></a>Не чрезмерно перевод

Некоторые строки в приложении могут не потребовать преобразования или, как минимум, требуется особое внимание переводчику. Примеры могут включать:

- URL-адреса. Если вы передаете URL-адрес, он может быть или не должен корректироваться языком. Например, facebook.com не требует перевода автоматически определяет язык на основном сайте. Другие сайты имеют содержимое, зависящее от языкового стандарта, и вы можете предложить другой URL-адрес, например yahoo.com и yahoo.fr или yahoo.it.
- Телефонные номера, особенно те, которые имеют разные коды стран или номера для вызывающих объектов, говорящих на определенном языке.
- Контактные данные — адреса и другие сведения могут отличаться в зависимости от языка или языкового стандарта.
- Товарные знаки & названия продуктов — для некоторых строк преобразование не требуется, так как они всегда написаны на одном языке.

Наконец, обязательно включите подробные инструкции для переводчика, если для некоторых строк требуется специальная обработка.

### <a name="formatted-text"></a>Форматированный текст

Обычно не является проблемой с мобильными приложениями, так как обычно строки неформатированы. Однако если в приложении требуется форматированный текст (например, полужирный шрифт или курсив), убедитесь, что переводчик знает, как ввести форматирование, файлы строк сохраняют его правильно и отформатированы должным образом перед отображением пользователю (Internet Explorer). сами коды форматирования представляются пользователю.

## <a name="translation-tips"></a>Советы по преобразованию

Перевод строк, используемых приложением, считается частью процесса локализации. Обычно эта задача будет передаваться в службу перевода и выполняться многоязыковыми сотрудниками, которые могут не узнавать ваше приложение или ваш бизнес.

Приведенные ниже советы помогут вам создать строки, которые проще в преобразовании и, таким образом, улучшать качество локализованных приложений.

### <a name="localize-complete-strings-not-words"></a>Локализовать полные строки, а не слова

Иногда разработчикам приходится пытаться указать отдельные слова или предложения "фрагменты кода", чтобы они могли повторно использовать их в приложении. Например, для текста «имеется 5 сообщений». они могут указывать следующие строки для перевода.

**Плохое**:

```csharp
"You have"
"no"
"message"
"messages"
```

а затем попытается создать правильную фразу на лету в коде, используя объединение строк:

**Плохое**:

```csharp
"You have" + " " + numMsgs + " " + "messages"
"You have" + " no " + "messages"
```

**Это не рекомендуется** , так как оно не обязательно будет работать для всех языков и будет труднее для переводчика понять контекст каждого короткого сегмента. Он также приводит к повторному использованию переведенных строк, что может вызвать проблемы позже, если они используются в разных контекстах (а затем обновлены).

### <a name="allow-for-parameter-re-ordering"></a>Разрешить повторное Упорядочение параметров

Для некоторых языков программирования требуется дополнительный синтаксис для указания порядка параметров в строке, однако .NET уже поддерживает концепцию нумерованных заполнителей, поэтому

**Хорошо**:

```csharp
"a {0} b {1} cde {3}"
```

можно преобразовать следующее (где изменяется расположение и порядок заполнителей)

```csharp
"{2} {3} f g h {0}"
```

и токены будут упорядочены в качестве предполагаемых переводчиков. Не забудьте включить описание каждого заполнителя, содержащегося при отправке строки транслятору.

### <a name="use-multiple-strings-for-cardinality"></a>Использование нескольких строк для кратности

Избегайте использования строк, таких как `"You have {0} message/s."`, использовать определенные строки для каждого состояния, чтобы обеспечить лучшую работу пользователя:

**Хорошо**:

```csharp
"You have no messages."
"You have 1 message."
"You have 2 messages."
"You have {0} messages."
```

Вам потребуется написать код в приложении, чтобы оценить отображаемое число, и выбрать соответствующую строку. Некоторые платформы (включая iOS и Android) имеют встроенные функции для автоматического выбора наиболее подходящей строки во множественном числе в зависимости от предпочтений текущего языка и языкового стандарта.

### <a name="allowing-for-gender"></a>Разрешение для пола

Языки на основе латинского алфавита иногда используют разные слова в зависимости от пола субъекта. Если ваше приложение знает о полу, следует разрешить переведенным строкам отражать это.

Существует также более очевидный случай, даже на английском языке, где строки ссылаются на конкретного пользователя или пользователя приложения. Например, некоторые сайты отображают такие сообщения, как `"Bob commented on his post"`, поэтому вам понадобятся строки для пол, женщина, недвоичного или неизвестного пола:

**Хорошо**:

```csharp
"{0} commented on his post"
"{0} commented on her post"
"{0} commented on their post"
```

### <a name="dont-reuse-strings"></a>Не использовать повторно строки

Или точнее, не следует повторно использовать строки только потому, что они похожи, когда сама строка имеет другую цель или значение.

Например, представьте, что в приложении есть параметр включения/выключения, и для элемента управления "параметр" требуется локализация текста для "on" и "OFF". Вы также можете отобразить значение этого параметра в любом расположении в приложении в текстовой метке. Следует использовать разные строки для переключателя, а не состояние коммутатора (даже если они совпадают со строкой на языке по умолчанию), например:

- "On" — отображается на самом переключателе
- "OFF" — отображается на самом переключателе
- "On" — отображается в метке
- "OFF" — отображается в метке

Это обеспечивает максимальную гибкость для переводчика:

- В целях проектирования, возможно, сам переключатель использует строчные буквы "on" и "OFF", но отображаемая метка использует верхний регистр "on" и "OFF".
- Для некоторых языков может потребоваться, чтобы значение параметра было сокращено в соответствии с элементом управления пользовательского интерфейса, а полное (переведенное) слово может отображаться в метке.
- Кроме того, для некоторых языков можно использовать "I" и "O" для культурных понятий, но может потребоваться, чтобы метка прочитала "on" или "OFF".

### <a name="translation-services"></a>Службы перевода

#### <a name="machine-translation"></a>Машинный перевод

Чтобы создать функции перевода в приложении, рассмотрите [API перевода текстов Azure](https://azure.microsoft.com/services/cognitive-services/translator-text-api/).

В целях тестирования можно использовать один из многочисленных средств трансляции в Интернете для включения в приложение локализованного текста во время разработки:

- [Переводчик Bing](https://www.bing.com/translator/)
- [Перевод Google](https://translate.google.com/)

Доступно множество других. Качество машинного перевода, как правило, не считается достаточным для выпуска приложения без предварительного рассмотрения и тестирования профессиональным переводчиками или собственными колонками.

#### <a name="professional-translation"></a>Профессиональный перевод

Существуют также профессиональные службы перевода, которые принимают строки и распространяют их в собственные переводчики, предоставляя вам готовые переводы за плату.

Одна из наиболее известных служб — [лионбридже](https://www.lionbridge.com/). Большинство профессиональных служб поддерживают все распространенные типы файлов, включая строки, XML, RESX и POT/PO.

## <a name="summary"></a>Сводка

В этой статье были рассмотрены некоторые концепции, с которыми следует ознакомиться, прежде чем интернатионализинг приложение, а затем локализовать ресурсы, а также как изменить языковые настройки для каждой платформы.

Эти понятия можно применять к различным технологиям интернационализации, зависящим от платформы, и межплатформенным способам, которые можно реализовать с помощью Xamarin.

Продолжайте чтение технических сведений для интересующей вас платформы:

- Использование файлов RESX для кросс-платформенной локализации [Xamarin. Forms](~/xamarin-forms/app-fundamentals/localization/index.md) .
- Локализация собственной платформы [Xamarin. iOS](~/ios/app-fundamentals/localization/index.md) .
- Локализация собственной платформы [Xamarin. Android](~/android/app-fundamentals/localization.md) .

## <a name="related-links"></a>Связанные ссылки

- [Обзор локализации Apple](https://developer.apple.com/internationalization/)
- [Контрольный список локализации для Android](https://developer.android.com/distribute/tools/localization-checklist.html)
- [Рекомендации по разработке приложений, готовых к международному использованию (MSDN)](https://msdn.microsoft.com/library/w7x1y988%28v=vs.90%29.aspx)
