---
title: Устранение неполадок привязки
description: В этом разделе описано, что делать, если у вас возникли трудности при привязке библиотеки цели-C. В частности, в нем обсуждаются отсутствующие привязки, исключения аргументов при передаче значения NULL в привязку и сообщения об ошибках.
ms.prod: xamarin
ms.assetid: 7C65A55C-71FA-46C5-A1B4-955B82559844
author: davidortinau
ms.author: daortin
ms.date: 10/19/2016
ms.openlocfilehash: 8194c369aa0e4f8bb17a1a162354b4f72c6aaa41
ms.sourcegitcommit: db422e33438f1b5c55852e6942c3d1d75dc025c4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2020
ms.locfileid: "76725336"
---
# <a name="binding-troubleshooting"></a>Устранение неполадок привязки

Некоторые советы по устранению неполадок привязки к macOS (ранее известной как OS X) API в Xamarin. Mac.

## <a name="missing-bindings"></a>Отсутствующие привязки

Хотя Xamarin. Mac охватывает большую часть API Apple, иногда может потребоваться вызвать API Apple, у которого еще нет привязки. В других случаях необходимо вызвать сторонние лица C/цели-C, которые выходят за пределы области привязки Xamarin. Mac.

Если вы работаете с API Apple, первым делом необходимо сообщить Xamarin о том, что вы используете раздел API, для которого у нас еще нет покрытия. Сообщение [об ошибке,](#reporting-bugs) указывающее на отсутствующий API. Мы используем отчеты от клиентов для определения приоритетов интерфейсов API, которые мы работаем дальше. Кроме того, если у вас есть лицензия Business или Enterprise, и это не мешает работе привязки, также следуйте инструкциям в разделе [Поддержка](https://visualstudio.microsoft.com/vs/support/) для отправки билета. Мы не можем пообещать привязку, но в некоторых случаях мы можем приступить к обойтись.

После уведомления Xamarin (если применимо) отсутствующей привязки следует рассмотреть возможность его привязки самостоятельно. [Здесь](~/cross-platform/macios/binding/overview.md) представлено полное руководство и неофициальная [Документация,](https://brendanzagaeski.appspot.com/xamarin/0002.html) предназначенная для упаковки привязок цели-C вручную. При вызове API C можно использовать C#механизм P/Invoke, документация [здесь](https://www.mono-project.com/docs/advanced/pinvoke/).

Если вы решили работать с привязкой самостоятельно, имейте в виду, что ошибки в привязке могут создавать все интересные сбои в собственной среде выполнения. В частности, будьте внимательны, чтобы сигнатура C# в соответствовала собственной сигнатуре в числе аргументов и размере каждого аргумента. Невозможность сделать это может привести к повреждению памяти и (или) стека, что может привести к сбою немедленно или в любой случайной точке в будущем или повреждении данных.

## <a name="argument-exceptions-when-passing-null-to-a-binding"></a>Исключения аргументов при передаче значения NULL в привязку

Хотя Xamarin работает над обеспечением высококачественных и хорошо протестированных привязок для интерфейсов API Apple, иногда ошибки и ошибки направляются в. До сих пор наиболее распространенной проблемой, с которой можно столкнуться, является создание API `ArgumentNullException` при передаче значения NULL, когда базовый API принимает `nil`. Файлы собственных заголовков, определяющие API, часто не предоставляют достаточно сведений о том, какие интерфейсы API принимают мизер и что приведет к сбою, если передать его в.

Если в случае, когда при передаче `null` возникает исключение `ArgumentNullException` но вы считаете, что оно должно работать, выполните следующие действия.

1. Ознакомьтесь с документацией по Apple и (или) примерами, чтобы узнать, можно ли узнать, что она принимает `nil`. Если вы умеете работать с объективом-C, можно написать маленькую тестовую программу, чтобы проверить ее.
2. [Зарегистрируйте ошибку](#reporting-bugs).
3. Можно ли обойти ошибку? Если вы можете избежать вызова API с помощью `null`, можно легко обойтись простыми проверками для вызовов.
4. Однако некоторым API-интерфейсам требуется передать значение null, чтобы отключить или отключить некоторые функции. В таких случаях можно обойти эту ошибку, отключив браузер сборок (см. раздел [Поиск C# члена для данного селектора](~/mac/app-fundamentals/mac-apis.md#finding_selector)), скопировав привязку и удалив проверку значения NULL. Убедитесь в том, что вы задаете ошибку (шаг 2), так как скопированная привязка не будет получать обновления и исправления, которые мы делаем в Xamarin. Mac, и это следует учитывать в качестве краткосрочного решения.

<a name="reporting-bugs"/>

## <a name="reporting-bugs"></a>Сообщения об ошибках

Нам важны ваши отклики и пожелания. При обнаружении проблем с Xamarin. Mac:

- Проверьте [форумы Xamarin.Mac](https://forums.xamarin.com/categories/xamarin-mac).
- Проверьте [репозиторий проблем](https://github.com/xamarin/xamarin-macios/issues).
- До перехода на GitHub проблемы Xamarin отслеживались в [Bugzilla](https://bugzilla.xamarin.com/describecomponents.cgi). Попробуйте найти там похожие проблемы.
- Если вы не можете найти проблему, с которой столкнулись, поместите ее описание в [репозиторий проблем GitHub](https://github.com/xamarin/xamarin-macios/issues/new).

Все проблемы GitHub находятся в открытом доступе. Здесь нет возможности скрыть комментарии или вложения.

Предоставьте следующие сведения с максимально возможными подробностями.

- Простой пример, воспроизводящий проблему, если это возможно. Такая помощь будет **бесценной**.
- Полная трассировка стека после сбоя.
- Код C#, относящийся к проявлению сбоя.
