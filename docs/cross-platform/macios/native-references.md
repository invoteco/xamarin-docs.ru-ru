---
title: Собственные ссылки на проекты iOS, Mac и привязки
description: Собственные ссылки дают возможность внедрять собственную платформу в проект Xamarin. iOS, Xamarin. Mac или привязку.
ms.prod: xamarin
ms.assetid: E53185FB-CEF5-4AB5-94F9-CC9B57C52300
author: davidortinau
ms.author: daortin
ms.date: 03/29/2017
ms.openlocfilehash: b3adfac067964e0a0f169b5d8f8860f34deffe62
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73015619"
---
# <a name="native-references-in-ios-mac-and-bindings-projects"></a>Собственные ссылки в проектах iOS, Mac и привязок

_Собственные ссылки дают возможность внедрять собственную платформу в проект Xamarin. iOS или Xamarin. Mac или привязку проекта._

Так как iOS 8,0, можно создать внедренную платформу для совместного использования кода между расширениями приложения и основным приложением в Xcode. Используя встроенную функцию Reference, можно будет использовать эти встраиваемые платформы (созданные с помощью Xcode) в Xamarin. iOS.

> [!IMPORTANT]
> Невозможно создать внедренные платформы из любого типа проектов Xamarin. iOS или Xamarin. Mac, а собственные ссылки позволяют использовать только существующие машинные платформы (цель-C).

<a name="Terminology" />

## <a name="terminology"></a>Терминология

В iOS 8 (и более поздних версиях) **внедренные платформы** могут быть внедренными статически связанными и динамически связанными платформами. Чтобы правильно распространить их, необходимо добавить их в системы "FAT", которые включают все свои _срезы_ для каждой архитектуры устройства, которая должна поддерживаться в приложении.

<a name="Static-vs-Dynamic-Frameworks" />

### <a name="static-vs-dynamic-frameworks"></a>Статические и динамические платформы

**Статические платформы** связаны во время компиляции, когда **динамические платформы** связаны во время выполнения, и таким образом можно изменять без повторной компоновки. Если вы использовали сторонние платформы до iOS 8, вы использовали **статическую платформу** , скомпилированную в приложение. Дополнительные сведения см. в документации по [программированию динамической библиотеки](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/OverviewOfDynamicLibraries.html#//apple_ref/doc/uid/TP40001873-SW1) Apple.

<a name="Embedded-vs-System-Frameworks" />

### <a name="embedded-vs-system-frameworks"></a>Сравнение внедренных и системных платформ

**Внедренные платформы** включены в пакет приложений и доступны только для конкретного приложения через его песочницу. **Системные платформы** хранятся на уровне операционной системы и доступны для всех приложений на устройстве. В настоящее время только компания Apple имеет возможность создавать платформы уровня операционной системы.

<a name="Thin-vs-Fat-Frameworks" />

### <a name="thin-vs-fat-frameworks"></a>Платформы с тонкими и FAT

**Тонкие платформы** содержат только скомпилированный код для конкретной архитектуры системы, в которой **платформы FAT** содержат код для нескольких архитектур. Каждая зависящая от архитектуры база кода, скомпилированная в платформу, называется _срезом_. Например, если у нас есть платформа, которая была скомпилирована для двух архитектур имитатора iOS (i386 и x86_64), она будет содержать два среза.

Если вы попытались распространить этот пример платформы вместе с приложением, оно будет правильно работать в симуляторе, но на устройстве произойдет сбой, так как платформа не содержит срезы, относящиеся к коду, для устройства iOS. Чтобы обеспечить работу платформы во всех экземплярах, необходимо также включить отдельные срезы для конкретных устройств, такие как arm64, ARMv7 и armv7s.

<a name="Working-with-Embedded-Frameworks" />

## <a name="working-with-embedded-frameworks"></a>Работа с внедренными платформами

Для работы с внедренными платформами в приложении Xamarin. iOS или Xamarin. Mac необходимо выполнить два действия: создание платформы FAT и внедрение платформы.

<a name="Overview" />

### <a name="creating-a-fat-framework"></a>Создание платформы FAT

Как упоминалось выше, чтобы иметь возможность использовать внедренную платформу в приложении, она должна быть платформой FAT, которая включает все срезы системных архитектур для устройств, на которых будет работать ваше приложение.

Если платформа и используемое приложение находятся в одном проекте Xcode, это не является проблемой, так как Xcode создает как платформу, так и приложение, используя те же параметры сборки. Так как приложения Xamarin не могут создавать внедренные платформы, этот метод использовать нельзя.

Для решения этой проблемы можно использовать средство командной строки `lipo` для объединения двух или более платформ в одну платформу FAT, содержащую все необходимые срезы. Дополнительные сведения о работе с командой `lipo` см. в документации по [встроенным библиотекам ссылок](~/ios/platform/native-interop.md) .

<a name="Embedding-a-Framework" />

### <a name="embedding-a-framework"></a>Внедрение платформы

Чтобы внедрить платформу в проект Xamarin. iOS или Xamarin. Mac с помощью собственных ссылок, необходимо выполнить следующие действия.

1. Создайте новый или откройте существующий проект Xamarin. iOS, Xamarin. Mac или привязку.
2. В **Обозреватель решений**щелкните правой кнопкой мыши имя проекта и выберите **Добавить** > **Добавить машинную ссылку**: 

    [![](native-references-images/ref01.png "In the Solution Explorer, right-click on the project name and select Add Native Reference")](native-references-images/ref01.png#lightbox)
3. В диалоговом окне **Открыть** выберите имя собственной платформы, которую необходимо внедрить, и нажмите кнопку **Открыть** : 

    [![](native-references-images/ref02.png "Select the name of the Native Framework to embed and click the Open button")](native-references-images/ref02.png#lightbox)
4. Платформа будет добавлена в дерево проекта: 

    [![](native-references-images/ref03.png "The framework will be added to the projects tree")](native-references-images/ref03.png#lightbox)

При компиляции проекта собственная платформа будет внедрена в пакет приложения.

<a name="App-Extensions-and-Embedded-Frameworks" />

## <a name="app-extensions-and-embedded-frameworks"></a>Расширения приложений и внедренные платформы

Внутренне Xamarin. iOS может воспользоваться преимуществами этой функции для связи со средой выполнения Mono как платформой (если целью развертывания является > = iOS 8,0), что значительно сокращает размер приложения для приложений с расширениями (так как среда выполнения Mono будет включена только один раз для весь набор приложений, а не один раз для приложения-контейнера и один раз для каждого расширения.

Расширения будут связываться со средой выполнения Mono как платформой, так как для всех расширений требуется iOS 8,0.

Приложения, у которых нет расширений и приложений, предназначенных для iOS 

<a name="Summary" />

## <a name="summary"></a>Сводка

В этой статье подробно рассмотрено внедрение собственной платформы в приложение Xamarin. iOS или Xamarin. Mac.
