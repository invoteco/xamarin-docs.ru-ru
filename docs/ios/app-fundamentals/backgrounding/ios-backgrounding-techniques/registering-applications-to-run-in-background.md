---
title: Регистрация приложений Xamarin. iOS для запуска в фоновом режиме
description: В этом документе описывается, как зарегистрировать приложение Xamarin. iOS для запуска в фоновом режиме. Здесь обсуждаются звуковые приложения, приложения VoIP, внешние аксессуары и Bluetooth, а также многое другое.
ms.prod: xamarin
ms.assetid: 8F89BE63-DDB5-4740-A69D-F60AEB21150D
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 03/18/2017
ms.openlocfilehash: 61b7926f28253acbcc45bc204c466d76a00c72b0
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73010836"
---
# <a name="registering-xamarinios-apps-to-run-in-the-background"></a>Регистрация приложений Xamarin. iOS для запуска в фоновом режиме

Регистрация отдельных задач для фоновых привилегий работает для некоторых приложений, но что происходит, если приложение постоянно вызывается для выполнения важных, длительных задач, например для получения сведений о пользователе через GPS? Такие приложения, как, должны быть зарегистрированы как известные приложения, необходимые для фонового использования.

Регистрация приложения сигнализирует в iOS, что приложению должны быть предоставлены специальные права, необходимые для выполнения задач в фоновом режиме.

## <a name="application-registration-categories"></a>Категории регистрации приложений

Зарегистрированные приложения можно разделить на несколько категорий:

- **Звуковые** проигрыватели и другие приложения, работающие с аудио-содержимым, могут быть зарегистрированы для продолжения воспроизведения звука, даже если приложение больше не находится на переднем плане. Если приложение в этой категории пытается выполнить любые другие действия, кроме воспроизведения звука или загрузки в фоновом режиме, iOS прекратит его.
- **VoIP** -приложения по протоколу VoIP получают те же привилегии, что и звуковые приложения, для сохранения обработки звука в фоновом режиме. Кроме того, они могут отвечать по мере необходимости службам VoIP, которые их используют, чтобы поддерживать подключения в активном состоянии.
- **Внешние аксессуары и Bluetooth** — зарезервированные для приложений, которым необходимо взаимодействовать с устройствами Bluetooth и другими внешними аппаратными аксессуарами, регистрация в этих категориях позволяет приложению оставаться подключенным к оборудованию.
- **Киоска** — приложение киоска может продолжать синхронизировать содержимое в фоновом режиме.
- **Расположение** — приложения, использующие GPS или данные сетевого расположения, могут отправлять и получать обновления расположения в фоновом режиме.
- **Fetch (iOS 7 +)** — приложение, зарегистрированное для привилегий фоновой выборки, может проверять поставщик на наличие нового содержимого через регулярные интервалы, предоставляя пользователю обновленное содержимое при возврате в приложение.
- **Удаленные уведомления (iOS 7 +)** — приложения могут регистрироваться для получения уведомлений от поставщика и использовать уведомление для запуска обновления до того, как пользователь откроет приложение. Уведомления могут поступать в виде push-уведомлений или отказаться от автоматического пробуждения приложения.

Приложения можно зарегистрировать, задав свойство **необходимые фоновые режимы** в файле *info. plist*приложения. Приложение может зарегистрироваться в любом количестве категорий, которое требуется:

 [![](registering-applications-to-run-in-background-images/bgmodes.png "Setting the background modes")](registering-applications-to-run-in-background-images/bgmodes.png#lightbox)

Пошаговое руководство по регистрации приложения для обновления расположения в фоновом режиме см. в разделе [Пошаговое руководство по расположению фона](~/ios/app-fundamentals/backgrounding/ios-backgrounding-walkthroughs/location-walkthrough.md).

## <a name="application-does-not-run-in-background-property"></a>Приложение не запускается в фоновом свойстве

Другое свойство, которое можно задать в *info. plist* , — это приложение, которое *не выполняется в фоновом режиме*или `UIApplicationExitsOnSuspend` свойство:

 [![](registering-applications-to-run-in-background-images/plist.png "Disabling Background Running")](registering-applications-to-run-in-background-images/plist.png#lightbox)

Это аналогично тому, как установка параметра обновления фонового приложения в значение OFF в iOS 7 +, за исключением того, что ее можно изменить только на стороне разработчика и доступна для iOS 4 и более поздних версий. Приложение будет приостановлено сразу после ввода фона и не сможет выполнить обработку.

Используйте это свойство, если приложение не предназначено для обработки фоновой обработки, так как оно помогает избежать непредвиденного поведения.

## <a name="background-fetch-and-remote-notifications"></a>Фоновая выборка и удаленные уведомления

Фоновая выборка и удаленные уведомления — это специальные категории регистрации, появившиеся в iOS 7. Эти категории позволяют приложениям принимать новое содержимое от поставщика и обновлять его в фоновом режиме. В следующем разделе подробно рассматриваются получение и удаленные уведомления, а также рассматриваются сведения о расположении как средства для обновления приложения в фоновом режиме в iOS 6.
