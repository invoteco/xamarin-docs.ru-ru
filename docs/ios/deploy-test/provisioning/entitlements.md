---
title: Работа с назначениями в Xamarin.iOS
description: Разрешения (entitlements) предоставляют особые возможности и функции безопасности корректно настроенным для их использования приложениям.
ms.prod: xamarin
ms.assetid: 8A3961A2-02AB-4228-A41D-06CB4108D9D0
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 08/13/2018
ms.openlocfilehash: 43bde3a31a79728548e72ea1d34977f1a131f282
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73028544"
---
# <a name="working-with-entitlements-in-xamarinios"></a>Работа с назначениями в Xamarin.iOS

_Разрешения (entitlements) предоставляют особые возможности и функции безопасности корректно настроенным для их использования приложениям._

В операционной системе iOS приложения выполняются в _песочнице_, которая устанавливает ряд правил, ограничивающих доступ приложения к определенным ресурсам системы или пользовательским данным. _Назначения_ используются для запроса разрешения у системы на расширение песочницы и предоставление приложению дополнительных возможностей.

Для расширения возможностей вашего приложения необходимо сделать назначение в файле Entitlements.plist вашего приложения. Могут быть расширены только некоторые возможности, их список приведен в руководстве [Работа с возможностями](~/ios/deploy-test/provisioning/capabilities/index.md), а их описание приведено [ниже](#entitlement-key-reference). Назначения передаются в систему как пара ключ/значение, и обычно достаточно одной пары для каждой возможности. Конкретные ключи и значения описаны в разделе [Справочник по ключам назначений](#entitlement-key-reference) этого руководства.
Visual Studio для Mac и Visual Studio предоставляют понятный интерфейс для добавления назначений для приложения Xamarin.iOS в редакторе файлов Entitlements.plist.
Это руководство описывает работу в редакторе файлов Entitlements.plist. В руководстве вы также найдете справочник всех назначений, которые можно добавить в проект iOS для каждой возможности.

## <a name="entitlements-and-provisioning"></a>Назначения и подготовка

Файл Entitlements.plist применяется для указания назначений и подписывания пакета приложения.

Однако требуется дополнительная подготовка, чтобы убедиться в корректности подписанного кода. Используемый профиль подготовки должен содержать ИД приложения, в котором включена требуемая возможность. Сведения о том, как это сделать, см. в руководстве [Работа с возможностями](~/ios/deploy-test/provisioning/capabilities/index.md).

> [!IMPORTANT]
> Файл Entitlements.plist помогает указать правильные свойства приложения с использованием возможностей. Но он не обеспечивает создание профиля подготовки, так как не связан с учетной записью разработчика Apple. Для создания профиля подготовки, для развертывания и распространения приложения вам все еще нужно будет воспользоваться порталом разработчика.

## <a name="set-entitlements-in-a-xamarinios-project"></a>Установка назначений в проекте Xamarin.iOS

В дополнение к выбору и настройке необходимых служб приложения при определении ИД приложения необходимо также в проекте Xamarin.iOS настроить назначения, отредактировав файлы **Info.plist** и **Entitlements.plist**.

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

Для настройки назначений Visual Studio для Mac выполните следующее:

1. В **Обозревателе решений** дважды щелкните файл **Info.plist**, чтобы открыть его для редактирования.
2. В разделе **Целевое приложение iOS** введите имя приложения и **Идентификатор пакета**, который был создан при определении ИД приложения:

    ![](entitlements-images/servicexs01.png "Enter a Bundle Identifier")

3. Сохраните изменения в файле **Info.plist**.
4. В **Обозревателе решений** дважды щелкните файл **Entitlements.plist**, чтобы открыть его для редактирования:

    ![](entitlements-images/servicexs02.png "Editing the Entitlements")

5. Выберите и настройте назначения для приложения Xamarin.iOS таким образом, чтобы соответствовать настройкам созданного ранее ИД приложения.
6. Сохраните изменения в файле **Entitlements.plist**.

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

Для настройки назначений в Visual Studio выполните следующее:

1. В **Обозревателе решений** щелкните правой кнопкой на файле **Info.plist**, нажмите **Открыть с помощью…** и выберите **Редактор списка свойств**, чтобы открыть файл для редактирования.
2. В разделе **Целевое приложение iOS** введите имя приложения и **Идентификатор пакета**, который был создан при определении ИД приложения:

    ![](entitlements-images/servicevs01.png "Setting the Bundle Identifier")

3. Сохраните изменения в файле **Info.plist**.
4. В **Обозревателе решений** щелкните правой кнопкой на файле **Entitlements.plist**, нажмите **Открыть с помощью…** и выберите **Редактор списка свойств**, чтобы открыть файл для редактирования:

    ![](entitlements-images/servicevs02.png "Editing the Entitlements")

    Вы также можете дважды щелкнуть файл **Entitlements.plist**, чтобы открыть его в Редакторе источника XML, который позволяет задавать свойства назначений и значения ключей, как описано ниже в разделе [Справочник по ключам назначений](#entitlement-key-reference).

5. Выберите и настройте назначения для приложения Xamarin.iOS таким образом, чтобы соответствовать настройкам созданного ранее ИД приложения.
6. Сохраните изменения в файле **Entitlements.plist**.

-----

## <a name="adding-a-new-entitlementsplist-file"></a>Добавление нового файла Entitlements.plist

Назначения добавляются в приложение при помощи файла Entitlements.plist. Этот файл по умолчанию включается в проекты Xamarin.iOS, но может отсутствовать в более ранних проектах.

Для добавления файла Entitlements.plist в проект Xamarin.iOS выполните следующее:

1. Щелкните правой кнопкой на файле проекта и выберите **Добавить > Новый файл…** :

    ![Контекстное меню добавления файлов](entitlements-images/image1.png)
2. В диалоговом окне создания файла выберите **iOS > Список свойств** и назовите его "Entitlements":

    ![Диалоговое окно "Новый файл"](entitlements-images/image2.png)

## <a name="entitlement-key-reference"></a>Справочник по ключам назначений

Ключи назначений добавляются через панель "Источник" редактора файла Entitlements.plist. Ключи назначений обычно добавляются при использовании редактора файла Entitlements.plist и приводятся здесь для справки.

### <a name="wallet"></a>Wallet

- **Описание**. Приложение Wallet (формальное название — Passbook) используется для хранения и использования карт. Картами могут быть кредитные карты, карты скидок, посадочные талоны или билеты.

  - **Идентификатор типа карты**
    - **Ключи**: com.apple.developer.pass-type-identifiers
    - **Строка**: `$(TeamIdentifierPrefix)*`

- **Примечание**.
  - Это позволит вашему приложение работать со всеми типами карт. Чтобы ограничить работу приложения только с подмножеством типов карт, установите следующее значение строки: `$(TeamIdentifierPrefix)pass.$(CFBundleIdentifier)`

  Здесь pass.$(CFBundleIdentifier) — ИД карты, созданный [выше](~/ios/platform/passkit.md)

<a name="icloud" />

### <a name="icloud"></a>iCloud

- **Описание**: iCloud позволяет пользователям легко и удобно хранить свои данные и обмениваться ими между устройствами. Существует четыре способа, как разработчики могут предоставить своим пользователям хранилище с использованием iCloud: хранилище типа "ключ-значение", хранилище типа UIDocument, CoreData и использование CloudKit напрямую в качестве хранилища для отдельных файлов и каталогов. Дополнительную информацию см. в руководстве "Введение в iCloud".

  - **Документы iCloud и CloudKit**
    - **Ключи**: com.apple.developer.ubiquity-container-identifiers
    - **Строка**: `$(TeamIdentifierPrefix)$(CFBundleIdentifier)`
  - **Хранилище iCloud KeyValue**
    - **Ключ**: com.apple.developer.ubiquity-kvstore-identifier
    - **Строка**: `$(TeamIdentifierPrefix)$(CFBundleIdentifier)`

- **Примечание**.
  - Строку `$(TeamIdentifierPrefix)` можно получить, если зайти в свой кабинет на сайте developer.apple.com и перейти в раздел **Member Center > Your Account > Developer Account Summary (Центр пользователей > Ваша учетная запись > Сводка об учетной записи разработчика)** для получения своего идентификатора Team ID (или Individual ID в случае единственного разработчика). Идентификатор представляет собой строку длиной 10 символов (например, A93A5CM278).
  - Строка `$(CFBundleIdentifier)` начинается с `iCloud` и имеет значение, когда упакован контейнер iCloud, как это описано в руководстве [Работа с возможностями](~/ios/deploy-test/provisioning/capabilities/icloud-capabilities.md).
  - Заполнители $`(TeamIdentifierPrefix)` и `$(CFBundleIdentifier)` можно использовать, и они будут заменены на правильные значения во время сборки.

> [!IMPORTANT]
> Компания Apple [предоставляет инструменты](https://developer.apple.com/support/allowing-users-to-manage-data/), которые помогают разработчикам надлежащим образом соблюдать Общий регламент по защите данных Европейского союза (GDPR).

### <a name="app-groups"></a>Группы приложений

- **Описание**. Группы приложений предоставляют различным приложениям (или одному приложению и его расширениям) общее место хранения файлов.

  - **Ключ**: com.apple.security.application-groups
  - **Строка**: group.$(CFBundleIdentifier)

<a name="apple-pay" />

### <a name="apple-pay"></a>Apple Pay

- **Описание**. Технология Apple Pay позволяет пользователям оплачивать физические товары со своего iOS-устройства.
  - **Ключ**: com.apple.developer.in-app-payments
  - **Строка**: merchant.your.mechantid

### <a name="push-notifications"></a>Push-уведомления

- **Ключ**: aps-environment
- **Строка**: `development` или `production`

### <a name="siri"></a>Siri

- **Описание**. SiriKit позволяет приложению iOS предоставлять службы, которые будут доступны для Siri и приложения "Карты" на устройстве iOS через расширения приложений и новые платформы Intents и Intents UI. Подробные сведения см. в руководстве "Введение в SiriKit".
  - **Ключ**: com.apple.developer.siri

### <a name="personal-vpn"></a>Личная VPN

- **Ключ**: com.apple.developer.networking.vpn.api
- **Строка**: allow-vpn

### <a name="keychain-sharing"></a>Обмен связками ключей

- **Описание**. Обмен связками ключей позволяет разработчикам приложений предоставлять доступ к паролям, которые хранятся в связке ключей устройства, другим приложениям, разрабатываемым той же командой. Доступ может быть ограничен путем передачи в строке идентификатора доступа к связке ключей.
  - **Ключ**: keychain-access-groups
  - **Строка**: $(AppIdentifierPrefix) $(CFBundleIdentifier)

### <a name="inter-app-audio"></a>Звук между приложениями

- **Описание**. Функция звука между приложениями позволяет разработчикам использовать потоковую передачу аудио из одного приложения в другое.
  - **Ключ**: inter-app-audio
  - **Логическое значение**: да

### <a name="associated-domains"></a>Связанные домены

- **Описание**. Это право служит для передачи связанных доменов, которые должны обрабатываться как универсальные ссылки. Для обеспечения глубокой связи между приложением и веб-сайтом можно использовать универсальные ссылки. Необходимо создать запись для каждого домена, с которым работает ваше приложение. Каждая запись должна начинаться с `applinks:`
  - **Ключ**: com.apple.developer.associated-domains
  - **Строка**: webcredentials:example.com

### <a name="data-protection"></a>Защита данных

- **Описание**. Функция защиты данных использует встроенное оборудование с шифрованием для хранения конфиденциальных данных вашего приложения в зашифрованном виде. По умолчанию уровень защиты установлен на полную защиту (файлы доступны только тогда, когда устройство разблокировано).
  - **Ключ**: com.apple.developer.default-data-protection
  - **Строка**: NSFileProtectionComplete

### <a name="homekit"></a>HomeKit

- **Описание**. HomeKit предоставляет платформу для установки, настройки и эксплуатации поддерживаемых устройств домашней автоматики с одного устройства iOS. Дополнительные сведения об использовании HomeKit см. в руководстве "Введение в HomeKit".
  - **Ключ**: com.apple.developer.homekit
  - **Логическое значение**: да

### <a name="healthkit"></a>HealthKit

- **Описание**. Платформа HealthKit впервые появилась в iOS 8. Она предоставляет централизованное, управляемое и безопасное хранилище медицинских данных. Дополнительные сведения об использовании HealthKit см. в руководстве "Введение в HealthKit".
  - **Ключ**: com.apple.developer.healthkit
  - **Логическое значение**: да

### <a name="wireless-accessory-configuration"></a>Конфигурация беспроводных периферийных устройств

- **Описание**. Конфигурация беспроводных периферийных устройств позволяет вашему приложению настраивать периферийные MFi-устройства с Wi-Fi.
  - **Ключ**: com.apple.external-accessory.wireless-configuration
  - **Логическое значение**: да

### <a name="classkit"></a>ClassKit

- **Описание**. ClassKit позволяет преподавателям просматривать выполнение учащимися выданных заданий в вашем приложении.
  - **Ключ**: com.apple.developer.ClassKit-environment
  - **Строка**: `development` или `production`

## <a name="summary"></a>Сводка

Это руководство описывает использование назначений в Visual Studio для Mac и Visual Studio. В нем также приведен справочник пар ключ/значение для каждой возможности.
