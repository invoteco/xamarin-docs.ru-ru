---
title: Советы по устранению неполадок в Xamarin. iOS
description: В этом документе приводятся различные советы по устранению неполадок во время разработки приложений Xamarin. iOS. В нем описываются конкретные сообщения об ошибках, а также другие потенциальные проблемы.
ms.topic: troubleshooting
ms.prod: xamarin
ms.assetid: B50FE9BD-9E01-AE88-B178-10061E3986DA
ms.technology: xamarin-ios
author: conceptdev
ms.author: crdun
ms.date: 05/22/2018
ms.openlocfilehash: a888c29a6409fc803b8a0d06bcc6f8a668e64f5e
ms.sourcegitcommit: 933de144d1fbe7d412e49b743839cae4bfcac439
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2019
ms.locfileid: "70292056"
---
# <a name="troubleshooting-tips-for-xamarinios"></a>Советы по устранению неполадок в Xamarin. iOS 

## <a name="xamarinios-cannot-resolve-systemvaluetuple"></a>Xamarin. iOS не удается разрешить System. ValueTuple

Эта ошибка возникает из-за несовместимости с Visual Studio.

- **Обновление 1 для Visual Studio 2017** (версия 15,1 или более старая) совместима только с **System. ValueTuple NuGet 4.3.0** (или более ранней версии).

- **Visual Studio 2017 с обновлением 2** (версия 15,2 или более поздняя) совместима только с **System. ValueTuple NuGet 4.3.1** или более поздней версии.

Выберите правильный System. ValueTuple NuGet, соответствующий установке Visual Studio 2017.


## <a name="receiving-error-retrieving-update-information-error-message"></a>Получение сообщения об ошибке "ошибка при получении информации об обновлении"

При попытке обновления программного обеспечения и появлении этого сообщения об ошибке попробуйте перезапустить интегрированную среду разработки и выйти из нее, а затем снова войти в учетную запись в интегрированной среде разработки.

## <a name="how-do-i-create-outlets-or-actions-with-interface-builder"></a>Разделы справки создавать розетки или действия с Interface Builder?

С появлением Xamarin Designer для iOS в Visual Studio для Mac и Visual Studio разработчики Xamarin. iOS теперь могут воспользоваться преимуществами создания пользовательского интерфейса с помощью раскадровок и. XIB. Дополнительные сведения об использовании конструктора см. в руководствах по [Hello, iOS](~/ios/get-started/hello-ios/index.md) .

Дополнительные сведения об использовании розеток и действиях можно также найти в руководствах по [розеткам](https://developer.apple.com/library/ios/recipes/xcode_help-IB_connections/chapters/CreatingOutlet.html) и [действиям](https://developer.apple.com/library/ios/recipes/xcode_help-IB_connections/chapters/CreatingAction.html) Apple.

## <a name="systemtextencodinggetencoding-throws-notsupportedexception"></a>System. Text. Encoding. NotSupportedException создает исключение

Возможно, используется кодировка, которая не добавляется по умолчанию. Просмотрите страницу [интернационализации](~/ios/app-fundamentals/localization/index.md) , чтобы узнать, как добавить поддержку для дополнительной кодировки.

## <a name="systemmissingmethodexception-anything-else"></a>System. MissingMethodException (что-то еще)

Вероятно, член был удален компоновщиком и, таким же, не существует в сборке во время выполнения.  Существует несколько решений для этого:

- [`[Preserve]`](http://www.go-mono.com/docs/index.aspx?link=T:MonoTouch.Foundation.PreserveAttribute) Добавьте атрибут к элементу.  Это предотвратит удаление компоновщиком.
- При вызове [**mtouch**](http://www.go-mono.com/docs/index.aspx?link=man:mtouch%281%29)используйте параметры **-Link** или **-линксдконли** .
  - **-unlink** отключает все ссылки.
  - **-линксдконли** будет связывать только предоставляемые Xamarin. iOS сборки, такие как **Xamarin. iOS. dll**, сохраняя все типы в создаваемых пользователями сборках (IE. ваши проекты приложений).

Обратите внимание, что сборки связаны таким образом, чтобы полученный исполняемый файл был меньше. Таким образом, отключение компоновки может привести к увеличению исполняемого файла, чем желательно.

## <a name="you-are-getting-a-modelnotimplementedexception"></a>Вы получаете Моделнотимплементедексцептион

Если вы получаете это исключение, это означает, что вы вызываете Base. Метод () для класса, который переопределяет модель. Не нужно вызывать базовый метод в классе для моделей (это классы, помеченные атрибутом [Model]).

## <a name="this-class-is-not-key-value-coding-compliant-for-the-key-xxxx"></a>Этот класс не является ключом, совместимым с кодированием для ключа XXXX

При возникновении этой ошибки при загрузке файла NIB это означает, что значение XXXX не найдено в управляемом классе. Это означает, что отсутствует объявление следующего вида:

```csharp
[Connect]
TypeName XXXX {
   get {
       return (TypeName) GetNativeField ("XXXX");
   }
   set {
       SetNativeField ("XXXX", value);
   }
}
```

Указанное выше определение автоматически создается Visual Studio для Mac для любых файлов XIB, добавляемых в Visual Studio для Mac `NAME_OF_YOUR_XIB_FILE.designer.xib.cs` файла.

Кроме того, типы, содержащие приведенный выше код, должны быть подклассом [нсобжект](xref:Foundation.NSObject).  Если вмещающий тип находится внутри пространства имен, он должен также иметь атрибут [[Register]](xref:Foundation.RegisterAttribute) , который предоставляет имя типа без пространства имен (так как Interface Builder не поддерживает пространства имен в типах):

```csharp
namespace Samples.GLPaint {

    // The [Register] attribute overrides the type name registered
    // with the Objective-C runtime, in this case removing the namespace.
    [Register ("AppDelegate")]
    public class AppDelegate {/* ... */}
}
```

## <a name="unknown-class-xxxx-in-interface-builder-file"></a>Неизвестный класс XXXX в файле Interface Builder

Эта ошибка возникает, если вы определяете класс в файлах конструктора интерфейсов, но не предоставляете фактическую реализацию для него в C# коде.

Необходимо добавить код следующего вида:

```csharp
public partial class MyImageView : UIView {
   public MyImageView (IntPtr handle) : base (handle {}
}
```

## <a name="systemmissingmethodexception-no-constructor-found-for-foobarctorsystemintptr"></a>System. MissingMethodException: Не найден конструктор для foo. Bar:: ctor (System. IntPtr)

Эта ошибка возникает во время выполнения, когда код пытается создать экземпляр класса, на который вы ссылались из файла Interface Builder. Это означает, что вы забыли добавить конструктор, принимающий один IntPtr в качестве параметра.

Конструктор с дескриптором IntPtr используется для привязки управляемых объектов к их неуправляемым представлениям.

Чтобы устранить эту проблему, добавьте следующую строку кода в класс Foo. Bar:

```csharp
public Bar (IntPtr handle) : base (handle) { }
```

## <a name="type-foo--does-not-contain-a-definition-for-getnativefield-and-no-extension-method-getnativefield-of-type-foo-could-be-found"></a>Тип {foo} не содержит определения для `GetNativeField` и не удалось найти метод `GetNativeField` расширения типа {foo}

Если эта ошибка возникает в файлах, созданных конструктором (*. xib.designer.cs), это означает одно из двух действий:

 **1) отсутствует разделяемый класс или базовый класс**

Создаваемые конструктором разделяемые классы должны иметь соответствующие разделяемые классы в пользовательском коде, который наследуется от `UIViewController`какого-либо подкласса `NSObject`, часто. Убедитесь, что у вас есть такой класс для типа, который предоставляет ошибку.

 **2) изменены пространства имен по умолчанию**

Файлы конструктора создаются с использованием параметров пространства имен по умолчанию для проекта. Если вы изменили эти параметры или переименовали проект, созданные разделяемые классы могут больше не находиться в том же пространстве имен, что и их аналоги с пользовательским кодом.

Параметры пространства имен можно найти в диалоговом окне "Параметры проекта". Пространство имен по умолчанию находится в разделе **Общие-> основные параметры** . Если он пуст, в качестве значения по умолчанию используется имя проекта. Дополнительные дополнительные параметры пространства имен можно найти в разделе **Исходный код — > политики именования .NET** .

## <a name="warning-for-actions-the-private-method-foo-is-never-used-cs0169"></a>Предупреждение для действий: Частный метод "foo" никогда не используется. (CS0169)

Действия для файлов построителя интерфейсов подключаются к мини-приложениям путем отражения во время выполнения, поэтому ожидается это предупреждение.

Если вы хотите отключить это предупреждение только для этих методов, можно использовать "#pragma warning Disable 0169" "#pragma warning Enable 0169" (предупреждение). Если вы хотите отключать его для всего проекта, добавьте 0169 в поле "игнорировать предупреждения" в параметрах компилятора (не рекомендуется).

## <a name="mtouch-failed-with-the-following-message-cannot-open-assembly-pathtoyourprojectexe"></a>Сбой mtouch со следующим сообщением: Не удается открыть сборку "/Пас/то/йоурпрожект.ЕКСЕ"

Если вы видите это сообщение об ошибке, то, как правило, проблема — абсолютный путь к проекту содержит пробел. Это будет исправлено в следующей версии Xamarin. iOS, но эту ошибку можно обойти, переместив проект в папку без пробелов.

## <a name="your-sqlite3-version-is-old---please-upgrade-to-at-least-v350"></a>Версия SQLite3 устарела — обновите по меньшей мере v 3.5.0!

Это происходит при выполнении всех следующих действий.

1. Использование Mono. Data. SQLite
1. Использование Mac OS X Leopard (10,5)
1. Запустите приложение в симуляторе.


Проблема заключается в том, что Mono берет на себя OS `libsqlite3.dylib`X, а не `libsqlite3.dylib` файл iPhoneSimulator. Приложение *будет* работать на устройстве, но только не в симуляторе.

## <a name="deploy-to-device-fails-with-systemexception-amdeviceinstallapplication-returned-3892346901"></a>Сбой развертывания на устройстве с помощью System. Exception: Амдевицеинсталлаппликатион вернул 3892346901

Эта ошибка означает, что конфигурация подписывания кода для идентификатора сертификата или набора не соответствует профилю подготовки, установленному на устройстве.  Убедитесь, что в параметрах проекта выбран соответствующий сертификат, > подписывание пакета iPhone и правильный идентификатор пакета, указанный в приложении "Параметры проекта" — > iPhone.

## <a name="code-completion-is-not-working-in-visual-studio-for-mac"></a>Завершение кода не работает в Visual Studio для Mac

Убедитесь, что вы используете последнюю версию Visual Studio для Mac и Xamarin. iOS

Если проблема по-прежнему существует, подайте сообщение [об ошибке](http://monodevelop.com/Developers#Reporting_Bugs), присоединив файл **~/либрари/логс/ксамаринстудио-{версион}/иде-{тиместамп}.лог**, **андроидтулс-{timestamp}. log**и **компоненты — {timestamp}. log** Files.

Если все остальное не удается, можно попытаться удалить кэш завершения кода, чтобы он был создан повторно:

 `[rm -r ~/.config/XamarinStudio-{VERSION}/CodeCompletionData]`

Будьте внимательны при вводе этой команды правильно или вы можете случайно удалить важные файлы.

## <a name="visual-studio-for-mac-crashes-when-you-copy-text"></a>Сбои Visual Studio для Mac при копировании текста

Популярные служебные программы Mac Куикксилвер, панели инструментов Google и панель запуска имеют функции буфера обмена, которые повреждают Visual Studio для Mac памяти. В их параметрах можно перечислить Visual Studio для Mac как процесс, не мешающий им.

## <a name="visual-studio-for-mac-complains-about-mono-24-required"></a>Visual Studio для Mac потребуются сведения о необходимости Mono 2,4

Если вы обновили Visual Studio для Mac из-за последнего обновления, и при попытке запустить его снова появится сообщение о том, что моно 2,4 не существует, достаточно [обновить установку Mono 2,4](http://www.go-mono.com/mono-downloads/download.html).  

Моно 2.4.2.3 _6 устраняет некоторые важные проблемы, которые не позволили Visual Studio для Mac надежно работать, иногда завис Visual Studio для Mac при запуске или не позволили создавать базу данных завершения кода.

После установки нового Mono Visual Studio для Mac будет запускаться должным образом.

## <a name="assertion-at-monometadatageneric-sharingc704-condition-oti-not-met"></a>Утверждение в... /.. /.. /.. /моно/Метадата/женерик-шаринг.к: 704, условие "Оти" не выполнено

Если вы получаете следующую трассировку стека:

```csharp
 - Assertion at ../../../../mono/metadata/generic-sharing.c:704, condition `oti' not met
Stacktrace:
    at System.Collections.Generic.List`1<object>..cctor () <0xffffffff>
    at System.Collections.Generic.List`1<object>..cctor () <0x0001c>
    at (wrapper runtime-invoke) object.runtime_invoke_dynamic (intptr,intptr,intptr,intptr) <0xffffffff>`
```

Это означает, что вы связываете с проектом статическую библиотеку, скомпилированную с помощью кода Thumb. Начиная с версии пакета SDK для iPhone 3,1 (или выше на момент написания этой статьи) компания Apple предоставила ошибку в своем компоновщике при связывании неthumb-кода (Xamarin. iOS) с кодом Thumb (статическая библиотека). Чтобы устранить эту ошибку, необходимо связать ее с версией статической библиотеки, отличной от Thumb.

## <a name="systemexecutionengineexception-attempting-to-jit-compile-method-wrapper-managed-to-managed-foosystemcollectionsgenericicollection1get_count-"></a>System. ExecutionEngineException: Попытка JIT-компиляции метода (с управляемой оболочкой для управляемого кода) foo []: System. Collections. Generic. ICollection'1. get_Count ()

Суффикс [] указывает, что вы или библиотека классов вызывают метод в массиве через универсальную коллекцию, например IEnumerable < >, ICollection < > или IList < >. В качестве обходного решения можно явно заставить компилятор AOT включить такой метод, вызвав метод самостоятельно и убедившись, что этот код выполняется до вызова, вызвавшего исключение. В этом случае можно написать:

```csharp
Foo [] array = null;
int count = ((ICollection<Foo>) array).Count;
```

Это приведет к принудительному включению компилятором AOT метода get_Count.

## <a name="visual-studio-for-mac-source-editor-is-extremely-slow"></a>Редактор исходного кода Visual Studio для Mac работает очень долго

Иногда редактор источника Visual Studio для Mac работает очень часто, так как он зависает в течение нескольких секунд между вводом символов.

Эта проблема очень редко и очень сложная для воспроизведения. обычно ее нельзя воспроизвести на том же компьютере после перезапуска Visual Studio для Mac. По этой причине мы ценим это, если можно выполнить несколько шагов отладки перед перезапуском Visual Studio для Mac и отправить результаты в корпорацию Майкрософт.

1. Попробуйте закрыть вкладку редактора и повторно открыть ее. Занимается ли это изменение или перемещение курсора до тех пор, пока замедление не произойдет снова?
1. Отключите "Пообъектная синхронизация" с помощью средства разработчика "Quartz Debug" (которое можно найти с помощью Spotlight) и проверьте, восстановлена ли нормальная производительность редактора исходного кода.
1. Попробуйте повторить шаг (1) с неактивной синхронизацией с помощью.
1. Если редактор зависает в течение нескольких секунд, попробуйте запустить "киллалл-QUIT [Visual Studio для Mac]" в терминале, когда он зависло. Время выполнения команды KILL может быть затруднительным, когда редактор зависла, но это очень важно сделать, поскольку команда заставляет Mono записывать трассировки стека всех потоков в журнал MD, который можно использовать для определения состояния потоков во время зависания XS.



Вложите журналы XS, **~/либрари/логс/ксамаринстудио-{версион}/иде-{тиместамп}.лог**, **АНДРОИДТУЛС-{timestamp}. log**и **Components-{timestamp}. log** (в более ранних версиях XS/MonoDevelop, просто отправьте **~/Library/Logs /Монодевелоп-(3.0 | 2.8 | 2.6)/Монодевелоп.лог**).

> [!NOTE]
> Описанная выше проблема была исправлена в XS 2,2 Final * *

## <a name="compiled-application-is-very-large"></a>Скомпилированное приложение очень велико

Для поддержки отладки отладочные сборки содержат дополнительный код. Проекты, построенные в режиме выпуска, представляют собой часть размера.

Начиная с Xamarin. iOS 1,3, отладочные сборки включали поддержку отладки для каждого отдельного компонента Mono (каждый метод в каждом классе платформ).  

С помощью Xamarin. iOS 1,4 мы предложим более детализированный метод отладки. по умолчанию будет предоставляться инструментирование отладки только для кода и библиотек, а не для всех [сборок Mono](~/cross-platform/internals/available-assemblies.md) (это будет по-прежнему возможно, но вы потребуется согласие на отладку этих сборок.

## <a name="installation-hangs"></a>Зависания установки

Программы установки Mono и Xamarin. iOS зависают при запуске имитатора iPhone. Эта проблема не ограничивается Mono или Xamarin. iOS. это является постоянной проблемой в любом программном обеспечении, которое пытается установить программное обеспечение на MacOS Снег Leopard, если имитатор iPhone работает во время установки.

Убедитесь, что вы выйдете из имитатора iPhone и повторите попытку установки.

<a name="trampolines" />

## <a name="ran-out-of-trampolines-of-type-0"></a>Закончили трамполинес типа 0

Если вы получаете это сообщение во время работы устройства, вы можете создать более трамполинес типа 0 (для конкретного типа), изменив параметры проекта в разделе "сборка iPhone".  Вы хотите добавить дополнительные аргументы для целевых объектов сборки устройства:

 `-aot "ntrampolines=2048"`

Число трамполинес по умолчанию — 1024. Попробуйте увеличить это число, пока оно не будет достаточно для вашего приложения.

## <a name="ran-out-of-trampolines-of-type-1"></a>Закончили трамполинес типа 1

Если вы сильно используете рекурсивные универсальные шаблоны, это сообщение может появиться на устройстве.  Вы можете создать более трамполинес типа 1 (тип РГКТКС), изменив параметры проекта в разделе "сборка iPhone".  Вы хотите добавить дополнительные аргументы для целевых объектов сборки устройства:

 `-aot "nrgctx-trampolines=2048"`

Число трамполинес по умолчанию — 1024. Попробуйте увеличить это число, пока не будет достаточно для использования универсальных шаблонов.

## <a name="ran-out-of-trampolines-of-type-2"></a>Закончили трамполинес типа 2

При интенсивном использовании интерфейсов вы можете получить это сообщение на устройстве.
Вы можете создать дополнительные трамполинес типа 2 (ИМТ преобразователей), изменив параметры проекта в разделе "сборка iPhone".  Вы хотите добавить дополнительные аргументы для целевых объектов сборки устройства:

 `-aot "nimt-trampolines=512"`

Значение по умолчанию ИМТ преобразователя трамполинес — 128. Попробуйте увеличить это число, пока не будет достаточно для использования интерфейсов.

## <a name="debugger-is-unable-to-connect-with-the-device"></a>Отладчику не удается подключиться к устройству

При запуске отладки конфигурации устройства вы увидите, что отладчик покажет диалоговое окно, указывающее, что он пытается подключиться к приложению. Существует несколько причин, по которым отладчику не удается подключиться к приложению в зависимости от режима, используемого для подключения (USB или Wi-Fi).

 **Если устройство и узел отладчика находятся в разных сетях**, брандмауэр или частная сеть могут препятствовать подключению приложения к узлу отладчика в режиме Wi-Fi.

 **Возможно, Visual Studio для Mac не сможет запросить правильный IP-адрес узла**. В режиме Wi-Fi Visual Studio для Mac предоставляет приложению все IP-адреса, которые может найти узел, и приложение пытается использовать их для подключения к Visual Studio для Mac.

 **Другое устройство подключено к USB-порту на узле.** В некоторых случаях другие устройства, подключенные к портам USB на узле, могут каким-либо образом мешать отладке в режиме USB.

Если режим Wi-Fi или USB не работает, вы можете легко попробовать другой вариант: в Visual Studio для Mac открыть настройки, перейти на страницу "настройки/отладчик/iPhone" и включить флажок "отлаживать устройства iOS вместо порта USB".   Если ни одна из них не работает, можно просмотреть дополнительные сведения об ошибке в консоли устройства в подробном режиме (который включается путем добавления "-v-v-v" к дополнительным аргументам mtouch в параметрах проекта).

## <a name="error-134-mtouch-failed-with-the-following-message"></a>Ошибка 134: сбой mtouch со следующим сообщением:

Эта ошибка может возникнуть, если вы пытаетесь выполнить сборку с параметром-unlink в стиле выпусков Xamarin. iOS 1,4. Эту ошибку можно обойти, указав дополнительные аргументы в конфигурации проекта MonoDevelop.

Добавление аргумента

 `-nosymbolstrip`

и проблема должна быть устранена.

## <a name="distribution-identity-is-not-shown-in-visual-studio-for-mac-project-signing-options"></a>Удостоверение распространения не отображается в Visual Studio для Mac параметры подписывания проекта

Visual Studio для Mac 2,2 содержит ошибку, которая приводит к невозможности обнаружения сертификатов распространения, содержащих запятую. Обновите до Visual Studio для Mac 2.2.1.

## <a name="error-afcfilerefwrite-returned-1-during-upload"></a>Ошибка "Афкфилерефврите вернул: 1 во время передачи

При передаче приложения на устройство может появиться сообщение об ошибке "Афкфилерефврите возвратил: 1». Это может произойти, если у вас есть файл нулевой длины.

## <a name="error-mtouch-failed-with-no-output"></a>Ошибка "сбой mtouch без выходных данных"

Текущий выпуск Xamarin. iOS и Visual Studio для Mac завершается ошибкой, если имя проекта или каталог, в котором хранится решение или проект, содержат пробелы.
Чтобы устранить эту проблему, выполните следующие действия:


- Убедитесь, что ни проект, ни каталог, в котором он хранится, не содержат пробелов.
- В проекте "основные параметры" убедитесь, что имя проекта не содержит пробелов.

## <a name="error-the-binary-you-uploaded-was-invalid-a-pre-release-beta-version-of-the-sdk-was-used-to-build-the-application"></a>Ошибка "передан недопустимый двоичный файл. Для создания приложения использовалась предварительная бета-версия пакета SDK "

Эта ошибка обычно вызвана тем, что проект, запущенный в разработке приложений iPad до выпуска Xamarin. iOS 2.0.0, скорее всего, содержит некоторые ключи в файле info. plist, например:

```xml
<key>UIDeviceFamily</key>
       <array>
               <string>1</string>
       </array>
```

Эту пару ключей следует удалить, так как Visual Studio для Mac автоматически обрабатывает ее.

## <a name="error-a-pre-release-beta-version-of-the-sdk-was-used-to-build-the-app"></a>Ошибка "для сборки приложения использовалась предварительная бета-версия пакета SDK"

(Автор: ED Ануфф)

Выполните следующие действия.

- Измените версию пакета SDK в iPhone Build на 3,2 или iTunes Connect отклонит ее при отправке, так как она видит приложение, совместимое с iPad, созданное с использованием пакета SDK меньше 3,2
- Создайте пользовательскую info. plist для проекта и явно задайте в нем Минимумосверсион значение 3,0.   Это приведет к переопределению значения Минимумосверсион 3,2, установленного Xamarin. iOS.   Если этого не сделать, приложение не сможет работать на устройстве iPhone.
- Перестройте, ZIP и отправьте в iTunes Connect.

## <a name="unhandled-exception-systemexception-failed-to-find-selector-someselector-on-type"></a>необработанное исключение: System.Exception: Не удалось найти селектор Сомеселектор: on {Type}

Это исключение вызвано одной из трех причин:


1. Вы указали селектор для среды выполнения цели-C, не применяя соответствующий атрибут [Export] к методу.
1. Вы включили полную компоновку и не применили атрибут [Preserve] к методу [Export] ED.
1. Атрибут [Export] применен к частному методу в унаследованном типе.


## <a name="mainwindowxibdesignercs-file-is-not-updated"></a>Файл MainWindow.xib.designer.cs не обновлен

В Xamarin Studio 2,4 возникла ошибка, из-за которой не было выполнено группирования файла MainWindow. XIB с файлом MainWindow. XIB. Designer в новых проектах. Это означает, что он не будет обновлять код конструктора для этого конкретного файла.

Эта проблема исправлена в версии Visual Studio для Mac, доступной во встроенном обновлении, поэтому убедитесь, что вы используете более новую версию.

Можно исправить существующие проекты, удалив (не удаляя) XIB и файл конструктора, а затем добавив его обратно. При этом необходимо правильно сгруппировать файлы.

## <a name="uialertview-or-uiactionsheet-vanish-after-being-created"></a>Уиалертвиев или Уиактионшит "исчезновение" после создания

Если у вас есть следующий код:

```csharp
var actionSheet = new UIActionSheet ("My ActionSheet", null, null, "OK", null){
   Style = UIActionSheetStyle.Default
};

actionSheet.Clicked += delegate (sender, args){
    Console.WriteLine ("Clicked on item {0}", args.ButtonIndex);
};
```

объект "Актионшит" находится в качестве временной переменной в функции и, как только функция завершается, объект может быть собран сборщиком мусора, поэтому он завершается сборкой мусора.

Чтобы устранить эту проблему, необходимо сохранить ссылку на "Актионшит" вне метода, где бы они ни находились за пределами метода.

## <a name="project-always-runs-in-the-ipad-simulator"></a>Проект всегда запускается в симуляторе iPad

Установщик пакета SDK для iPhone 4,0 устанавливает 2 пакета SDK — пакет SDK для 3,2, предназначенный для создания приложений только для iPad и пакет SDK для 4,0, который используется для создания iPhone и универсальных приложений. Он также устанавливает симулятор 3,2, который имитирует только iPad и симулятор 4,0, моделирующий iPhone или iPhone 4. Все более старые пакеты SDK и симуляторы удаляются.

Visual Studio для Mac параметры сборки проекта iPhone включают параметр для версии пакета SDK, который будет использоваться при сборке приложения. Этот параметр можно найти в параметрах **проекта — > сборка > iPhone**.

Новые проекты в Visual Studio для Mac используют самый старый установленный пакет SDK в качестве параметра пакета SDK по умолчанию. Если указанный пакет SDK не существует, Visual Studio для Mac будет использовать ближайшее приложение может найти для сборки приложения. Это было сделано так, что для проектов не всегда требовалось использовать последний пакет SDK. Однако в настоящее время используется пакет SDK 3,2, который приводит к использованию симулятора iPad.

Чтобы устранить эту проблему с помощью пакета SDK 4,0, перейдите в меню " **Параметры проекта", > сборка > iPhone**> и измените значение пакета SDK на "4,0" с помощью раскрывающегося списка. Это необходимо сделать для каждой комбинации конфигурации и платформы, доступ к которой можно получить, используя раскрывающиеся списки в верхней части панели.

Версию пакета SDK не следует путать с параметром "минимальная версия ОС".
Это значение не обязательно должно соответствовать значению версии пакета SDK — оно влияет на минимальную версию ОС, на которой будет устанавливаться приложение, что может быть более ранним, чем пакет SDK, при условии, что используются только API, существующие в более старой ОС, или защита более новых функций с помощью проверки версии ОС среды выполнения. ь. Необходимо задать для него самую раннюю версию ОС, на которой тестируется приложение.

Обратите внимание, что в меню **цели "проект-> iPhone**" > можно использовать для выбора симулятора, используемого по умолчанию при выполнении или отладке проекта. Кроме того, можно использовать меню **запуск > запуск с**>, чтобы выбрать конкретный симулятор, с которым будет выполняться

## <a name="ibtool-returns-error-133"></a>ибтул возвращает ошибку 133

Это означает, что установлен XCode 4.   В XCode 4 средство ибтул было удалено, поэтому изменять файлы XIB с помощью автономного средства больше нельзя.

Если вы хотите использовать Interface Builder, установите [серию Xcode 3](http://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/getSoftware?bundleID=20792), доступную на веб-сайте Apple.

## <a name="cant-create-display-binding-for-mime-type-applicationvndapple-interface-builder"></a>"Не удается создать отображаемую привязку для типа MIME: application/vnd. Аппле-интерфаце-буилдер"

Эта ошибка возникает при попытке создать пользовательский интерфейс iPhone из проекта, не являющегося iPhone. Убедитесь, что вы начинаете с решения iPhone/iPad, просто не можете добавить элементы пользовательского интерфейса iPhone в проект, не являющийся iPhone или iPad.

## <a name="startup-crash-when-executing-inside-the-ios-simulator"></a>Сбой запуска при выполнении в симуляторе iOS

Если вы получаете сбой среды выполнения (СИГСЕГВ) в симуляторе и трассировку стека, которая выглядит следующим образом:

```csharp
  at (wrapper managed-to-native) System.Reflection.Assembly.GetTypes (System.Reflection.Assembly,bool)
  at MonoTouch.ObjCRuntime.Runtime.RegisterAssembly (System.Reflection.Assembly)
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr)
```

... возможно, у вас есть одна (или несколько) устаревшей сборки в каталоге приложения имитатора. Такие сборки могут существовать, так как имитатор Apple iOS добавляет и обновляет файлы, но никогда не удаляет их. В этом случае проще всего выбрать пункт "Сброс и содержимое и настройки". в меню симулятора.   

> [!WARNING]
> Это приведет к удалению всех файлов, приложений и данных из симулятора.   При следующем выполнении приложения Visual Studio для Mac развернет его в симуляторе, и в этом случае старая устаревшая сборка не будет вызывать сбой.

## <a name="simulator-hangs-during-application-installation"></a>Симулятор зависает во время установки приложения

Это может произойти, если имена приложений содержат "." (точка) в имени.
Это запрещено в качестве имени исполняемого файла в Кфбундликсекутабле, даже если оно может работать во многих других случаях (например, на устройствах).

 \* "Значение не должно включать никаких расширений в имя". -[https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/InfoPlistKeyReference.pdf](https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/InfoPlistKeyReference.pdf)

## <a name="error-custom-attribute-type-0x43-is-not-supported-when-double-clicking-xib-files"></a>Ошибка: "Тип настраиваемого атрибута 0x43 не поддерживается" при двойном щелчке файла. XIB

Это вызвано попыткой открыть XIB-файлы при неправильной установке переменных среды. Это не должно происходить при нормальном использовании Visual Studio для Mac/Xamarin. iOS, и повторное открытие Visual Studio для Mac из/Applications должно устранить проблему.

При попытке обновления программного обеспечения появится сообщение электронной почты. *support@xamarin.com*

## <a name="application-runs-on-simulator-but-fails-on-device"></a>Приложение запускается в симуляторе, но не выполняется на устройстве

Эта проблема может проявляться в нескольких формах и не всегда приводит к единообразному возникновению ошибки. Если приложение содержит XIB, убедитесь, что для **действия сборки** . XIB задано значение **интерфацедефинитион**. Это действие сборки по умолчанию для. XIB.

Чтобы проверить действие сборки, щелкните правой кнопкой мыши файл XIB и выберите **действие сборки**.


## <a name="systemnotsupportedexception-no-data-is-available-for-encoding-437"></a>System. NotSupportedException: Нет доступных данных для кодирования 437

При включении библиотек сторонних производителей в приложение Xamarin. iOS может появиться сообщение об ошибке в формате System. NotSupportedException: Нет доступных данных для кодирования 437» при попытке скомпилировать и запустить приложение. Например, библиотеки, такие как `Ionic.Zip.ZipFile`, могут вызвать это исключение во время операции.

Это можно решить, открыв параметры для проекта Xamarin. iOS, перейдя на**международную языковую** **сборку** > iOS и проверив **Запад** .
