---
title: Публикация в App Store Apple TV
description: В этом документе описывается публикация приложения в Apple TV App Store. В нем обсуждается настройка, инициализация, сборка и отправка приложения tvOS, созданного с помощью Xamarin.
ms.prod: xamarin
ms.assetid: 52448C93-DC19-40FA-BF8C-608AE680FF49
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 03/16/2017
ms.openlocfilehash: f49fa08e5d9b2ad76fc069b415d6ea5b899b2bf7
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73030793"
---
# <a name="publishing-to-the-apple-tv-app-store"></a>Публикация в App Store Apple TV

Чтобы распространять приложения на все устройства Apple TV, Apple требуется, чтобы приложения были опубликованы в *магазине приложений Apple TV*, что позволяет приложению хранить единое место покупки для приложений tvOS. Разработчики многих типов приложений могут заменяться заглавными для массового успеха этой единственной точки распространения. Магазин приложений Apple TV — это готовое решение, предлагающее разработчикам приложений как системы распределения, так и оплаты.

Процесс отправки приложения в магазин приложений Apple TV включает в себя следующее:

1. Создание *идентификатора приложения* и выбор *прав*.
2. Создание *профиля подготовки распространения*.
3. Использование этого профиля для создания приложения.
4. Отправка приложения через *iTunes Connect*.

В этой статье будут рассмотрены все шаги, необходимые для предоставления, сборки и отправки приложения для распространения приложений Apple TV в магазине.

<a name="Before_you_Submit" />

## <a name="before-you-submit-an-application"></a>Действия перед отправкой приложения

После отправки приложения для публикации в магазин приложений Apple TV оно просматривает процесс проверки корпорацией Apple, чтобы убедиться, что он соответствует рекомендациям Apple по качеству и содержимому. Если ваше приложение не соответствует этим правилам, компания Apple отклоняет его. В таком случае вам следует устранить указанные компанией Apple несоответствия и отправить приложение на проверку повторно.
Таким образом, чтобы максимально повысить шансы успешно пройти проверку Apple, ознакомьтесь с приведенными ниже рекомендациями и постарайтесь адаптировать свое приложение к ним. Рекомендации Apple доступны в руководстве по [проверке магазина приложений](https://developer.apple.com/appstore/resources/approval/guidelines.html) и [подготавливают отправку приложений для нового телевидения Apple](https://developer.apple.com/tvos/submit/).

Прежде чем отправлять приложение, проверьте некоторые моменты:

1. Убедитесь, что описание приложения соответствует функциональным возможностям, которые входят в приложение.
2. Протестируйте приложение на отсутствие сбоев при обычном использовании. Сюда входит использование на каждом поддерживаемом устройстве Apple TV.

Apple также поддерживает список советов по отправке в магазине приложений Apple TV. Вы можете ознакомиться с ними на странице [Распространение через App Store](https://developer.apple.com/appstore/resources/submission/tips.html).

<a name="Configuring_your_Application_in_iTunes_Connect" />

## <a name="configuring-your-application-in-itunes-connect"></a>Настройка приложения в iTunes Connect

[iTunes Connect](https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa) — это набор средств на основе веб-технологий для, помимо прочего, для управления приложениями TvOS в магазине приложений Apple TV. Необходимо правильно настроить приложение Xamarin. tvOS и настроить его в iTunes Connect, прежде чем его можно будет отправить в Apple для просмотра и в конечном счете, выпустить для продажи или как бесплатное приложение в магазине приложений Apple TV.

Выполните следующие действия:

1. Убедитесь, что в разделе **Соглашения, налоги и банковские операции** iTunes Connect установлены актуальные соглашения, относящиеся к коммерческому или бесплатному распространению приложений iOS.
2. Создайте новую **запись iTunes Connect** для приложения и укажите ее **Отображаемое имя** (как показано в магазине приложений Apple TV).
3. Установите **цену продажи** или укажите, что приложение будет распространяться на бесплатной основе.
4. Укажите **значок App Store** (крупный значок) и снимки экрана приложения в действии на устройствах Apple TV, которые он поддерживает. Дополнительные сведения см. [в разделе «Работа с значками и изображениями](~/ios/tvos/app-fundamentals/icons-images.md) ».
5. Предоставьте понятное, краткое **Описание** приложения, включая его функции и преимущества для конечного пользователя.
6. Укажите **категории**, **подкатегории**и **Ключевые слова** , которые помогут пользователю найти ваше приложение в Apple TV App Store.
7. Укажите URL-адреса для **связи** и **получения поддержки** на вашем веб-сайте в соответствии с требованиями Apple.
8. Задайте **рейтинг**приложения, который используется родительским контролем в магазине приложений Apple TV.
9. Настройте дополнительные технологии App Store, такие как **Game Center** и **покупки в приложении**.

Дополнительные сведения см. в нашем руководстве по [настройке приложения tvOS в iTunes Connect](~/ios/tvos/deploy-test/app-distribution/itunes-connect.md) .

<a name="Preparing_for_App_Store_Distribution" />

## <a name="preparing-for-app-store-distribution"></a>Подготовка к распространению через App Store

Чтобы опубликовать приложение в магазине приложений Apple TV, необходимо сначала создать его для распространения, что включает в себя множество шагов. В следующих разделах рассматриваются все, что необходимо для подготовки приложения Xamarin. tvOS для публикации, чтобы его можно было построить и отправить в магазин приложений Apple TV для просмотра и выпуска.

<a name="Provisioning_for_Application_Services" />

### <a name="provisioning-for-application-services"></a>Подготовка служб приложений

Apple предоставляет возможность выбора специальных Службы приложений, также называемых назначениями, которые можно активировать для приложения tvOS при создании уникального идентификатора. Независимо от того, используете ли вы настраиваемые права или нет, вам по-прежнему потребуется создать уникальный идентификатор для приложения Xamarin. tvOS, прежде чем его можно будет опубликовать в магазине приложений Apple TV.

Чтобы создать идентификатор приложения и при необходимости выбрать права для него с помощью веб-портала подготовки для iOS компании Apple, выполните следующие действия:

1. Выберите **подготовка** > **разработки**.
2. Нажмите кнопку **+** и заполните поля **Name** (Имя) и **Bundle ID** (Идентификатор пакета) для нового приложения.
3. Прокрутите экран вниз и выберите все **службы приложений** , которые будут необходимы для приложения Xamarin. tvOS.
4. Нажмите кнопку **Continue** (Продолжить) и создайте новый идентификатор приложения, следуя инструкциям на экране.

Помимо выбора и настройки необходимых Службы приложений при определении идентификатора приложения необходимо также настроить идентификатор и назначения приложения в проекте Xamarin. tvOS, изменив файлы `Info.plist` и `Entitlements.plist`.

В Visual Studio для Mac выполните следующие действия.

1. В **обозревателе решений** дважды щелкните файл `Info.plist`, чтобы открыть его для редактирования.
2. В разделе **целевой объект приложения tvOS** укажите имя приложения и введите **идентификатор пакета** , созданный при определении идентификатора приложения.
3. Сохраните изменения в файле `Info.plist`.
4. В **обозревателе решений** дважды щелкните файл `Entitlements.plist`, чтобы открыть его для редактирования.
5. Выберите и настройте права, необходимые для приложения Xamarin. tvOS, чтобы они соответствовали настройке, выполненной выше, при определении идентификатора приложения.
6. Сохраните изменения в файле `Entitlements.plist`.

Подробные инструкции см. в нашей документации по [подготовке служб приложений](~/ios/get-started/installation/device-provisioning/manual-provisioning.md#appservices). Хотя этот документ был написан для iOS, те же действия используются для предоставления приложения Xamarin. tvOS.

<a name="Setting_the_Apps_Icons_and_Launch_Screens" />

### <a name="setting-the-apps-icons-launch-image-and-top-shelf-image"></a>Настройка значков приложений, изображение запуска изображения и верхнего полки

Чтобы приложение tvOS было принято компанией Apple для включения в магазин приложений Apple TV, оно нуждается в соответствующих значках, запусках и основных изображениях с полками для всех устройств Apple TV, на которых оно будет работать. Вам потребуется добавить необходимые ресурсы изображений, которые будут скомпилированы в файл `Assets.car` и включить их в пакет приложения Xamarin. tvOS перед его передачей в iTunes Connect.

Подробные инструкции см. в документации по [работе с значками и изображениями](~/ios/tvos/app-fundamentals/icons-images.md) .

<a name="Creating_and_Installing_a_Distribution_Profile" />

### <a name="creating-and-installing-a-distribution-profile"></a>Создание и установка профиля распространения

tvOS использует *профили подготовки* для управления развертыванием определенной сборки приложения. Эти файлы содержат информацию о сертификате, который используется для подписывания приложения, *идентификатор приложения*, а также сведения о том, где можно устанавливать приложение. Для разработки и динамического распространения в профиль подготовки также включается список разрешенных устройств, на которых можно развертывать приложение. Тем не менее, для распространения Apple TV App Store включаются только сведения о сертификате и ИДЕНТИФИКАТОРе приложения, поскольку единственный механизм общедоступного дистрибутива — это магазин приложений Apple TV.

Чтобы выполнить подготовку на портале подготовки для iOS компании Apple, выполните следующие действия:

1. Выберите **Provisioning** > **Distribution** (Подготовка > Распространение).
2. Нажмите кнопку **+** и выберите тип профиля распространения, который вы хотите создать в качестве **магазина приложений Apple TV**.
3. Выберите в раскрывающемся списке **App ID** (Идентификатор приложения), для которого требуется создать профиль распространения.
4. Выберите сертификат, необходимый для подписи приложения.
5. Заполните поле **Name** (Имя) для нового элемента **Distribution Profile** (Профиль распространения) и создайте профиль.
6. Обновите список доступных профилей в Xcode.
7. Выберите профиль подготовки распространения в Visual Studio для _конфигурации сборки_ **App Store** .

Подробные инструкции см. в разделах [Создание профиля распространения](~/ios/deploy-test/app-distribution/app-store-distribution/index.md#creatingprofile) и [Выбор профиля распространения в проекте Xamarin.iOS](~/ios/deploy-test/app-distribution/app-store-distribution/index.md#selectprofile). Опять же, оба эти документа относятся только к iOS, но для приложений tvOS используется одинаковый метод.

<a name="Setting_the_Build_Configuration_for_your_Application" />

### <a name="setting-the-build-configuration-for-your-application"></a>Настройка конфигурации сборки для приложения

По умолчанию при создании нового приложения Xamarin. tvOS _конфигурации сборки_ автоматически создаются для **отладочной** и **окончательной** развертываний. Перед окончательным созданием приложения, которое будет отправляться в Apple, необходимо внести несколько изменений в основную конфигурацию **выпуска** .

Выполните следующие действия:

1. Щелкните правой кнопкой мыши **имя проекта** в области **Обозреватель решений** и выберите **Параметры** , чтобы открыть их для редактирования.
2. Если вы нацелены на определенную версию tvOS, выберите ее в разделе **TvOS Build** > **версия пакета SDK iOS**. Для предварительной версии поддержки tvOS оставьте значение **по умолчанию**.
3. Связывание уменьшает общий размер распространяемого приложения за счет удаления неиспользуемых методов, свойств, классов и т. д. в большинстве случаев следует оставить только значение по умолчанию для **пакета SDK инфраструктуры Link**. В некоторых ситуациях, например при использовании некоторых конкретных библиотек сторонних производителей, может потребоваться задать для этого параметра значение **не связывать** , чтобы не удалять необходимый элемент.
4. Чтобы отправить приложение Xamarin. tvOS, необходимо использовать оптимизирующий компилятор LLVM. Убедитесь, что в конфигурации **выпуска** установлен флажок **использовать оптимизирующий компилятор LLVM** .
5. Apple также требуется, чтобы приложения tvOS использовали bitcode. Снова в конфигурации **выпуска** добавьте `--bitcode=asmonly` в поле **Дополнительные аргументы mtouch** .
6. Должен быть установлен флажок **оптимизировать файлы изображений PNG для iOS** , так как это поможет уменьшить размер конечного результата приложения.
7. Отладка *не* должна включаться, так как она сделает сборку ненужной больше.

<a name="Building_and_Submitting_the_Distributable" />

## <a name="building-and-submitting-the-distributable"></a>Построение и отправка распространяемых файлов

После правильной настройки приложения Xamarin. tvOS вы можете выполнить окончательную сборку распространения, которую вы будете отправлять в Apple для проверки и выпуска.

#### <a name="build-your-archive"></a>Построение архива

1. Выберите конфигурацию **Выпуск | Устройство** в Visual Studio для Mac:

    ![](app-store-publishing-images/buildxs01new.png "Select the Release configuration")
2. В меню **Сборка** выберите **Архивировать для публикации**:

    [![](app-store-publishing-images/buildxs02new.png "Select Archive for Publishing")](app-store-publishing-images/buildxs02new.png#lightbox)
3. После создания архива появится представление **Архивы**:

    [![](app-store-publishing-images/buildxs03new.png "The Archives view")](app-store-publishing-images/buildxs03new.png#lightbox)

### <a name="sign-and-distribute-your-app"></a>Подписывание и распространение приложения

Каждый раз при сборке приложения для архивирования автоматически открывается представление *Архивы*, где отображаются все заархивированные проекты, сгруппированные по решениям. По умолчанию в этом представлении отображаются только открытые на данный момент решения. Чтобы просмотреть все решения с архивами, выберите параметр **Показать все архивы**.

Рекомендуется хранить архивы, которые были развернуты для клиентов (развертывания App Store или корпоративные развертывания), чтобы при необходимости впоследствии отображать любую получаемую отладочную информации.

Чтобы подписать приложение и подготовить его к распространению, выполните следующие действия:

1. Выберите **знак и распространить...** , как показано ниже:

    [![](app-store-publishing-images/buildxs04new.png ", Select theSign and Distribute...")](app-store-publishing-images/buildxs04new.png#lightbox)
2. Откроется мастер публикации. Выберите **App Store** в качестве канала распространения, чтобы создать пакет, и откройте загрузчик приложений:

    [![](app-store-publishing-images/distribute01.png "Select the App Store distribution channel")](app-store-publishing-images/distribute01.png#lightbox)
3. На экране профиль подготовки выберите удостоверение подписывания и соответствующий профиль подготовки или повторно подпишите другое удостоверение:

    [![](app-store-publishing-images/distribute02.png "Select the signing identity and corresponding provisioning profile")](app-store-publishing-images/distribute02.png#lightbox)
4. Проверьте сведения о пакете и затем нажмите кнопку **Опубликовать**, чтобы сохранить пакет `.ipa`:

    [![](app-store-publishing-images/distribute03.png "Verify the details of the package")](app-store-publishing-images/distribute03.png#lightbox)
5. После сохранения файла `.ipa` ваше приложение готово для загрузки в iTunes Connect с помощью загрузчика приложений:

    [![](app-store-publishing-images/distribute04.png "Uploaded to iTunes Connect via the Application Loader")](app-store-publishing-images/distribute04.png#lightbox)

После того как была создана и архивирована сборка для распространения, все готово для отправки приложения в iTunes Connect.

<a name="Submitting_Your_App_to_Apple" />

## <a name="submitting-your-app-to-apple"></a>Отправка приложения в Apple

После создания сборки для распространения все готово к тому, чтобы отправить ваше приложение для iOS на проверку в Apple и выпустить его в App Store.

Рабочий процесс архивации в Visual Studio для Mac автоматически откроет загрузчик приложения после сохранения `.ipa`.

1. Щелкните *Deliver Your App* (Доставить приложение) и нажмите кнопку *Choose* (Выбрать):

    [![](app-store-publishing-images/publishvs01.png "Select Deliver Your App")](app-store-publishing-images/publishvs01.png#lightbox)

2. Выберите ранее созданный ZIP- или IPA-файл и нажмите кнопку **OK**.
3. Загрузчик приложения выполнит проверку файла:

    [![](app-store-publishing-images/publishvs02.png "The Application Loader validation screen")](app-store-publishing-images/publishvs02.png#lightbox)
4. Нажмите кнопку *Next* (Далее). Приложение будет проверено на соответствие требованиям App Store:

    [![](app-store-publishing-images/publishvs03.png "The application being validated against the App Store")](app-store-publishing-images/publishvs03.png#lightbox)
5. Нажмите кнопку **Send** (Отправить), чтобы отправить приложение на проверку в компанию Apple.
6. После успешной загрузки появится соответствующее сообщение загрузчика приложений.

<a name="iTunes_Connect_Status" />

### <a name="itunes-connect-status"></a>Статус iTunes Connect

Если войти в iTunes Connect и выбрать приложение из списка доступных приложений, в iTunes Connect появится сообщение о том, что он **ожидает проверки** (он может временно считывать полученные сведения о **передаче** во время обработки):

[![](app-store-publishing-images/image21.png "The status in iTunes Connect showing Waiting for Review")](app-store-publishing-images/image21.png#lightbox)

<a name="Troubleshooting" />

## <a name="troubleshooting"></a>Устранение неполадок

Если у вас возникли проблемы при отправке приложения Xamarin. tvOS в магазин приложений Apple TV, ознакомьтесь с нашим руководством по [устранению неполадок](~/ios/tvos/troubleshooting.md) . Он содержит несколько известных проблем, которые могут возникнуть, и способы их решения в Xamarin. tvOS.

<a name="Summary" />

## <a name="summary"></a>Сводка

В этой статье представлено пошаговое руководство по настройке, сборке и отправке приложения для публикации в магазине приложений Apple TV. Сначала рассматриваются действия по созданию и установке профиля подготовки распространения. Далее мы рассмотрели, как использовать Visual Studio для Mac для создания сборки распространения. Наконец, мы показали, как использовать iTunes Connect и средство архивирования Xcode для отправки приложения в Apple TV App Store.

## <a name="related-links"></a>Связанные ссылки

- [Работа со значками и изображениями](~/ios/tvos/app-fundamentals/icons-images.md)
- [Подготовка к отправке приложения новому ТЕЛЕВИЗОРу Apple](https://developer.apple.com/tvos/submit/)
- [Советы по отправке в App Store](https://developer.apple.com/appstore/resources/submission/tips.html)
- [Частые причины отклонения приложений](https://developer.apple.com/app-store/review/rejections/)
- [Руководство по оценке приложений App Store](https://developer.apple.com/appstore/resources/approval/guidelines.html)
