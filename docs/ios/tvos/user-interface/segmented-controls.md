---
title: Работа с сегментированными элементами управления tvOS в Xamarin
description: В этом документе описывается работа с сегментированными элементами управления tvOS в приложении, созданном с помощью Xamarin. В нем обсуждаются значки сегментов и текст, события, изменение внешнего вида элемента управления и многое другое.
ms.prod: xamarin
ms.assetid: 23AD94CC-E93A-40B1-8E2B-ECD21FA355BE
ms.technology: xamarin-ios
author: davidortinau
ms.author: daortin
ms.date: 03/16/2017
ms.openlocfilehash: 0bedd898232b39898e6079a204bd7409587cde82
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2019
ms.locfileid: "73030395"
---
# <a name="working-with-tvos-segmented-controls-in-xamarin"></a>Работа с сегментированными элементами управления tvOS в Xamarin

Сегментированный элемент управления предоставляет набор линейных элементов, каждый из которых может содержать значок или текст, и используется для предоставления пользователю набора связанных вариантов.

[![](segmented-controls-images/segment01.png "Sample segment controls")](segmented-controls-images/segment01.png#lightbox)

У Apple есть следующие рекомендации по работе с сегментированными элементами управления:

- Чтобы обеспечить достаточное пространство между другими элементами, которые могут быть [сосредоточены](~/ios/tvos/app-fundamentals/navigation-focus.md) , и сегментированным элементом управления необходимо **обеспечить** значительное внимание. Отдельный сегмент становится выбранным, когда он находится в фокусе (не при щелчке), и пользователь может случайно изменить сегменты, когда на самом деле нужно выбрать другой фокус в текущем сегменте.
- **Использование разделенных представлений для фильтрации содержимого** — сегментированные элементы управления не подходят для фильтрации содержимого, так как разделенные представления предназначены для удобного перехода между содержимым и фильтрами.
- Не более **семи сегментов** . Максимальное количество сегментов должно быть меньше восьми (8), так как это проще проанализировать из комнаты на диване и легко перемещаться по ним.
- **Использовать последовательный размер содержимого сегмента** — все сегменты имеют одинаковую ширину и, если это возможно, следует попытаться разместить содержимое в каждом сегменте одинакового размера. Это не только делает элемент управления "сегмент" более привлекательным, но упрощает чтение.
- **Старайтесь не смешивать значки и текст** — каждый отдельный сегмент может содержать либо значок, либо текст, но не оба. Хотя можно смешивать значки и текст в одном Сегментированном элементе управления, это следует избегать.

<a name="About-Segment-Icons" />

## <a name="about-segment-icons"></a>Сведения о значках сегментов

Компания Apple предлагает использовать простые распознаваемые изображения для значков сегментов, например увеличительное стекло для поиска. Чрезмерно сложные значки трудно распознать на экране телевизора в комнате, поэтому лучше ограничить значки простыми представлениями.

Нельзя смешивать текст и значки в заданном сегменте, поэтому следует избегать смешивания значков и текста в одном Сегментированном элементе управления. Это должно быть либо все значки, либо весь текст.

<a name="Summary" />

## <a name="segment-text"></a>Текст сегмента

Apple предлагает следующие рекомендации по работе с текстом сегмента:

- **Используйте короткие, понятные существительные** — заголовок сегмента должен четко определять тип содержимого, которое пользователь должен рассчитывать при выборе данного сегмента. Например: музыка или видео.
- **Используйте прописные буквы в названиях регистров** — каждое слово в названии сегментов должно быть прописными, за исключением статей, комбинаций и предварительных позиций менее четырех (4) символов.
- **Используйте короткие заголовки, чтобы не заменять заголовки и заменять** тип содержимого, которое будет рассчитываться при выборе сегмента.

Опять же, нельзя смешивать как текст, так и значки в определенном сегменте, поэтому следует избегать смешивания значков и текста в одном Сегментированном элементе управления.

<a name="Segment-Controls-and-Storyboards" />

## <a name="segment-controls-and-storyboards"></a>Элементы управления сегмента и раскадровки

Самый простой способ работы с элементами управления "сегмент" в приложении Xamarin. tvOS — добавить их в пользовательский интерфейс приложения с помощью конструктора iOS.

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

1. В **панель решения**дважды щелкните файл `Main.storyboard` и откройте его для редактирования.
1. Перетащите **элемент управления "сегмент** " из **панели элементов** и поместите его в представление: 

    [![](segmented-controls-images/segment02.png "A Segment Control")](segmented-controls-images/segment02.png#lightbox)
1. На **вкладке мини** -приложение панели **свойств**можно настроить несколько свойств элемента управления "сегмент", например его **стиль** и **состояние**: 

    [![](segmented-controls-images/segment03.png "The Widget Tab")](segmented-controls-images/segment03.png#lightbox)
1. Используйте поле **сегменты** для управления количеством сегментов в контроллере.
1. Выберите данный сегмент из **раскрывающегося списка сегмент** , чтобы настроить его отдельные свойства, такие как **заголовок** или **изображение** , а также управлять тем, **включен** или **выбран** данный сегмент при отображении элемента управления.
1. Наконец, назначайте **имена** элементам управления, чтобы вы могли реагировать на них C# в коде. Пример: 

    [![](segmented-controls-images/segment04.png "Assign a Name")](segmented-controls-images/segment04.png#lightbox)
1. Сохраните изменения.

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

1. В **Обозреватель решений**дважды щелкните файл `Main.storyboard` и откройте его для редактирования.
1. Перетащите **элемент управления "сегмент** " из **панели элементов** и поместите его в представление: 

    [![](segmented-controls-images/segment02-vs.png "A Segment Control")](segmented-controls-images/segment02-vs.png#lightbox)
1. На **вкладке мини** -приложение **обозревателя свойств**можно настроить несколько свойств элемента управления "сегмент", например его **стиль** и **состояние**: 

    [![](segmented-controls-images/segment03-vs.png "The Widget Tab")](segmented-controls-images/segment03-vs.png#lightbox)
1. Используйте поле **сегменты** для управления количеством сегментов в контроллере.
1. Выберите данный сегмент из **раскрывающегося списка сегмент** , чтобы настроить его отдельные свойства, такие как **заголовок** или **изображение** , а также управлять тем, **включен** или **выбран** данный сегмент при отображении элемента управления.
1. Наконец, назначайте **имена** элементам управления, чтобы вы могли реагировать на них C# в коде. Пример: 

    [![](segmented-controls-images/segment04-vs.png "Assign a Name")](segmented-controls-images/segment04-vs.png#lightbox)
1. Сохраните изменения.

-----

Дополнительные сведения о работе с раскадровками см. в статье [Hello, tvOS краткое руководство по началу работы](~/ios/tvos/get-started/hello-tvos.md). 

<a name="Working-with-Segmented-Controls" />

## <a name="working-with-segmented-controls"></a>Работа с сегментированными элементами управления

Как упоминалось выше, сегментированный элемент управления предоставляет набор линейных элементов, каждый из которых может содержать значок или текст, и используется для предоставления пользователю набора связанных вариантов.

Существует несколько различных способов работы с сегментированными элементами управления в приложении Xamarin. tvOS.

<a name="Exposed-as-Outlets-and-Actions" />

## <a name="exposed-as-names-and-events"></a>Предоставляется как имена и события

Если вы создали элемент управления "сегмент" в конструкторе интерфейсов и предоставляли его как именованный элемент управления и событие, вы можете использовать следующий код для реагирования на изменение сегмента:

```csharp
partial void PlayerCountChanged (Foundation.NSObject sender) {

    // Take action based on the number of players selected
    switch(PlayerCount.SelectedSegment) {
    case 0:
        // Do something if the segment is selected
        ...
        break;
    case 1:
        // Do something if the segment is selected
        ...
        break;
    case 2:
        // Do something if the segment is selected
        ...
        break;
    }
}
```

В приведенном выше примере элемент управления "сегмент" был представлен в качестве имени `PlayerCount` и действия `PlayerCountChanged` события. Дополнительные сведения о работе с действиями и их вызовами см. в разделе о [написании кода с помощью](~/ios/tvos/get-started/hello-tvos.md#Writing-the-Code) [tvOS краткое руководство по началу работы](~/ios/tvos/get-started/hello-tvos.md).

Свойство `SelectedSegment` Возвращает или задает выбранный в данный момент сегмент как нулевой индекс на основе нуля (0). Поэтому, если у вас пять (5) сегментов, первый сегмент будет иметь нулевой индекс (0), а последний — четыре (4).

<a name="Modifying-Segments" />

## <a name="modifying-segments"></a>Изменение сегментов

В любое время можно изменить как число, так и содержимое сегментированных элементов управления. Используйте следующий код, чтобы вставить новый сегмент значка:

```csharp
// Icon Segment
SegmentedControl.InsertSegment(UIImage.FromFile("icon.png"), 0, true);

// Text Segment
SegmentedControl.InsertSegment("New Segment", 0, true);
```

Второй параметр определяет, где сегмент будет вставлен с нулевым (0) индексом. Если последний параметр — `true` то вставка будет анимирована.

Чтобы удалить заданный сегмент, используйте следующую команду:

```csharp
SegmentedControl.RemoveSegmentAtIndex(0, true);
```

Чтобы удалить все сегменты, выполните следующие действия.

```csharp
SegmentedControl.RemoveAllSegments();
```

Опять же, если последний параметр имеет `true`, удаление будет анимировано. Чтобы получить текущее количество сегментов, используйте свойство `NumberOfSegments`.

Чтобы получить **заголовок** или **значок** для данного сегмента, используйте следующую команду:

```csharp
// Get title
var title = SegmentedControl.TitleAt(0);

// Get icon
var icon = SegmentedControl.ImageAt(0);
```

Чтобы изменить **заголовок** или **значок**, используйте следующую команду:

```csharp
// Set title
SegmentedControl.SetTitle("New Title", 0);

// Set icon
SegmentedControl.SetImage(UIImage.FromFile("icon.png"), 0);
```

Чтобы проверить, **включен**ли данный сегмент, используйте следующую команду:

```csharp
if (SegmentedControl.IsEnabled(0)) {
    // Do something
    ...
}
```

Чтобы **включить или отключить** данный сегмент, используйте следующую команду:

```csharp
SegmentedControl.SetEnabled(false, 0);
```

<a name="Modifying-the-Segmented-Controls-Appearance" />

## <a name="modifying-the-segmented-controls-appearance"></a>Изменение внешнего вида сегментированного элемента управления

Чтобы изменить фон определенного сегмента на изображение, можно использовать следующий код:

```csharp
SegmentedControl.SetBackgroundImage (UIImage.FromFile("background.png"), UIControlState.Normal, UIBarMetrics.Default);
```

Где `UIControlState` указывает состояние элемента управления, для которого задается изображение:

- Норм.
- Деле
- Отключено.
- Выбранные
- Focused

И `UIBarMetrics` указывает метрики для использования в качестве:

- Значение по умолчанию
- Свернут
- дефаултпромпт
- компактпромпт

Кроме того, можно задать разделитель между сегментами с помощью:

```csharp
SegmentedControl.SetDividerImage (UIImage.FromFile("divider.png"), UIControlState.Normal, UIControlState.Normal, UIBarMetrics.Default);
```

Где первая `UIControlState` указывает состояние сегмента слева от разделителя, а второй `UIControlState` указывает состояние сегмента справа...

<a name="Summary" />

## <a name="summary"></a>Сводка

В этой статье описано проектирование и работа с сегментированными элементами управления в приложении Xamarin. tvOS.

## <a name="related-links"></a>Связанные ссылки

- [Примеры tvOS](https://docs.microsoft.com/samples/browse/?products=xamarin&term=Xamarin.iOS+tvOS)
- [tvOS](https://developer.apple.com/tvos/)
- [Руководства по tvOSму интерфейсу](https://developer.apple.com/tvos/human-interface-guidelines/)
- [Руководством по программированию приложений для tvOS](https://developer.apple.com/library/prerelease/tvos/documentation/General/Conceptual/AppleTV_PG/)
