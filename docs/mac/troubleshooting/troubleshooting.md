---
title: Советы по устранению неполадок Xamarin. Mac
description: В этом документе описываются подходы к устранению проблем, возникающих при разработке приложений Xamarin. Mac. Здесь также обсуждаются способы получения поддержки.
ms.topic: troubleshooting
ms.prod: xamarin
ms.assetid: 5CBC6822-BCD7-4DAD-8468-6511250D41C4
ms.technology: xamarin-mac
author: conceptdev
ms.author: crdun
ms.date: 03/14/2017
ms.openlocfilehash: 6fd6484e547f22f1dc7f27578834b5292d6d2d2a
ms.sourcegitcommit: 57f815bf0024b1afe9754c0e28054fc0a53ce302
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/06/2019
ms.locfileid: "70770007"
---
# <a name="xamarinmac-troubleshooting-tips"></a>Советы по устранению неполадок Xamarin. Mac

## <a name="overview"></a>Обзор

Иногда мы работаем во время работы над проектом, как при невозможности получить API для работы с нужным образом, так и при попытке обойти ошибку. Нашей целью в Xamarin является успешная разработка мобильных и настольных приложений, и мы предоставили некоторые ресурсы для помощи.

С помощью любого из этих ресурсов можно выполнить некоторые действия по подготовке, которые помогут решить проблему быстро.

- Определите основную причину проблемы, как можно лучше для отчетов о сбоях:

  - "Сбои приложений" трудно диагностировать. «Мое приложение аварийно завершает работу при возврате пустого массива для этого вызова» гораздо проще в устранении неполадок.

  - "Я не могу заставить Нстабле работать" менее удобен, чем "ни один из методов в моем Нстабледелегате не вызывался в этом случае".

- Если возможно, предоставьте небольшой пример программы, отображающей эту ошибку. Продвигаясь вглубь на страницах исходного кода, где поиск проблемы занимает больше времени и усилий.

- Знание изменений, внесенных в приложение, чтобы привести к появлению проблемы, может быстро уменьшить источник проблемы. Обратите внимание, что вы недавно обновили версии Xamarin. Mac, обрезая разделы приложения, чтобы найти часть, вызвавшую неполадку, или проверив предыдущие сборки, чтобы узнать, какие изменения привели к решению проблемы.

### <a name="what-to-do-when-your-app-crashes-with-no-output"></a>Что делать, если приложение аварийно завершает работу без выходных данных

В большинстве случаев отладчик в Visual Studio для Mac будет перехватывать исключения и сбои в приложении и помогает отслеживать основную причину. Однако в некоторых случаях приложение будет возводить на закрепление, а затем выйти с небольшим или без выходных данных. К ним могут относиться следующие:

- Проблемы подписывания кода.
- Некоторые сбои среды выполнения Mono.
- Некоторые исключения и сбои цели-c.
- Некоторые сбои на самом раннем этапе жизненного цикла процесса.
- Некоторые переполняет стек.
- Версия macOS, указанная в файле **info. plist** , новее установленной в настоящее время версии macOS или недопустима.

Отладка этих программ может оказаться непростой, так как поиск необходимой информации может оказаться сложной задачей. Вот несколько подходов, которые могут помочь:

- Убедитесь, что версия macOS, указанная в файле **info. plist** , совпадает с версией macOS, установленной на компьютере.
- Проверьте выходные данные приложения Visual Studio для Mac (**Просмотр** -> **выходных данных приложения** **Pad** -> ) для трассировки стека или вывода красным цветом из Cocoa, которые могут описывать выходные данные.
- Запустите приложение из командной строки и просмотрите выходные данные (в приложении **терминала** ) с помощью:

  `MyApp.app/Contents/MacOS/MyApp`(где `MyApp` — имя приложения)
- Вы можете увеличить выходные данные, добавив "MONO_LOG_LEVEL" к команде в командной строке, например:

  `MONO_LOG_LEVEL=debug MyApp.app/Contents/MacOS/MyApp`
- Можно присоединить собственный отладчик (`lldb`) к процессу, чтобы узнать, предоставляет ли он дополнительные сведения (для этого требуется платная лицензия). Например, выполните следующие действия.

  1. Введите `lldb MyApp.app/Contents/MacOS/MyApp` в окне терминала.
  2. Введите `run` в окне терминала.
  3. Введите `c` в окне терминала.
  4. Завершите отладку после завершения отладки.
- В качестве последнего средства, перед вызовом `NSApplication.Init` `Main` метода в методе (или в других местах по мере необходимости), можно было бы записать текст в файл в известном расположении, чтобы отвести внимание на тот шаг запуска, в котором возникают проблемы.

## <a name="known-issues"></a>Известные проблемы

В следующих разделах рассматриваются известные проблемы и их решения.

### <a name="unable-to-connect-to-the-debugger-in-sandboxed-apps"></a>Не удалось подключиться к отладчику в изолированных приложениях

Отладчик подключается к приложениям Xamarin. Mac по протоколу TCP. Это означает, что по умолчанию при включении "песочницы" не удается подключиться к приложению, поэтому при попытке запустить приложение без соответствующих разрешений вы получите сообщение об ошибке *"не удается подключиться к отладчику".* .

[![Изменение] прав (troubleshooting-images/debug01.png "Изменение") прав](troubleshooting-images/debug01-large.png#lightbox)

Разрешение **Разрешить исходящие сетевые подключения (клиент)** является обязательным для отладчика, что позволяет выполнять отладку в обычном режиме. Так как вы не можете выполнить отладку без него, `CompileEntitlements` мы обновили целевой объект для `msbuild` , чтобы автоматически добавить соответствующее разрешение для всех приложений, которые изолированы только для отладочных сборок. Сборки выпуска должны использовать права, указанные в файле прав, без изменений.

### <a name="systemnotsupportedexception-no-data-is-available-for-encoding-437"></a>System. NotSupportedException: нет доступных данных для кодирования 437

При включении библиотек сторонних производителей в приложение Xamarin. Mac может возникнуть ошибка в формате System. NotSupportedException: Нет доступных данных для кодирования 437» при попытке скомпилировать и запустить приложение. Например, библиотеки, такие как `Ionic.Zip.ZipFile`, могут вызвать это исключение во время операции.

Это можно устранить, открыв параметры для проекта Xamarin. Mac, перейдя в **Mac Build** > **International** и проверив **регион Западной** интернационализации:

[![Изменение параметров сборки](troubleshooting-images/issue01.png "Editing the build options")](troubleshooting-images/issue01-large.png#lightbox)

### <a name="failed-to-compile-mm5103"></a>Не удалось выполнить компиляцию (mm5103)

Эта ошибка обычно возникает при выпуске новой версии Xcode, если вы установили новую версию, но еще не выполнили ее. Прежде чем пытаться выполнить компиляцию с помощью новой версии Xcode, необходимо сначала запустить эту версию по крайней мере один раз.

При первом запуске новой версии Xcode устанавливается несколько средств командной строки, необходимых для работы Xamarin. Mac. Кроме того, следует выполнить чистую сборку после обновления Xcode или версии Xamarin. Mac.

Если устранить эту проблему не удается, подайте сообщение [об ошибке](#filing-a-bug).

### <a name="missing-entitlementsplist"></a>Отсутствуют права. plist

Последняя версия Visual Studio для Mac удалила раздел "права" из редактора **info. plist** и поместил его в отдельные права. редактор **plist** (для более эффективной поддержки кросс-платформенных платформ с помощью Xamarin. IOS).

После установки нового Visual Studio для Mac при создании нового проекта приложения Xamarin. Mac файл прав **. plist** будет автоматически добавлен в дерево проекта:

![Выбор] прав (troubleshooting-images/entitlements01.png "Выбор") прав

Если дважды щелкнуть файл прав **. plist** , откроется редактор прав:

[![Изменение] прав (troubleshooting-images/entitlements02.png "Изменение") прав](troubleshooting-images/entitlements02-large.png#lightbox)

Для существующих проектов Xamarin. Mac необходимо вручную создать файл прав **. plist** , щелкнув правой кнопкой мыши проект в **панель решения** и выбрав **добавить** > **новый файл...** . Затем выберите **Xamarin. Mac** > **пустой список свойств**:

![Добавление нового списка свойств](troubleshooting-images/entitlements03.png "Добавление нового списка свойств")

Введите `Entitlements` для имени и нажмите кнопку **создать** . Если проект ранее включал файл прав, вам будет предложено добавить его в проект вместо создания нового файла:

[![Проверка перезаписи файла](troubleshooting-images/entitlements04.png "Проверка перезаписи файла")](troubleshooting-images/entitlements04-large.png#lightbox)

## <a name="community-support-on-the-forums"></a>Поддержка сообщества на форумах

Сообщество разработчиков, использующих продукты Xamarin, очень просто и многие посещает наши [форумы Xamarin. Mac](http://forums.xamarin.com/categories/mac) , чтобы поделиться опытом и опытом. Кроме того, специалисты по Xamarin периодически посещает форум, чтобы помочь.

<a name="filing-a-bug"/>

## <a name="filing-a-bug"></a>Хранение ошибки

Ваши отзывы важны для нас. При обнаружении проблем с Xamarin. Mac:

- Проверьте [репозиторий проблем](https://github.com/xamarin/xamarin-macios/issues).
- До перехода на GitHub проблемы Xamarin отслеживались в [Bugzilla](https://bugzilla.xamarin.com/describecomponents.cgi). Попробуйте найти там похожие проблемы.
- Если вы не можете найти проблему, с которой столкнулись, поместите ее описание в [репозиторий проблем GitHub](https://github.com/xamarin/xamarin-macios/issues/new).

Все проблемы GitHub находятся в открытом доступе. Здесь нет возможности скрыть комментарии или вложения.

Предоставьте следующие сведения с максимально возможными подробностями.

- Простой пример, воспроизводящий проблему, если это возможно. Такая помощь будет **бесценной**.
- Полная трассировка стека после сбоя.
- Код C#, относящийся к проявлению сбоя.
