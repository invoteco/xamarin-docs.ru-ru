---
title: Ограничения внедрения .NET
description: В этом документе описываются ограничения внедрения .NET, средства, которые позволяют использовать код .NET на других языках программирования.
ms.prod: xamarin
ms.assetid: EBBBB886-1CEF-4DF4-AFDD-CA96049F878E
author: davidortinau
ms.author: daortin
ms.date: 11/14/2017
ms.openlocfilehash: a8b63638861e8d44deb4ea72959d7461190f7713
ms.sourcegitcommit: 6266ef043ae0289f174e901f204f2a280a53c071
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/30/2019
ms.locfileid: "75545810"
---
# <a name="net-embedding-limitations"></a>Ограничения внедрения .NET

В этом документе объясняются ограничения, связанные с внедрением .NET, и, когда это возможно, предоставляет обходные пути для них.

## <a name="general"></a>Общие

### <a name="use-more-than-one-embedded-library-in-a-project"></a>Использование в проекте более одной внедренной библиотеки

В одном приложении невозможно совместно использовать две среды выполнения Mono. Это означает, что в одном приложении нельзя использовать две различные библиотеки, созданные для внедрения .NET.

**Обходной путь:** Генератор можно использовать для создания одной библиотеки, включающей несколько сборок (из разных проектов).

### <a name="subclassing"></a>Создание подклассов

Внедрение .NET упрощает интеграцию среды выполнения Mono внутри приложений, предоставляя набор готовых к использованию API для целевого языка и платформы.

Однако это не двусторонняя интеграция, например, нельзя создать подкласс управляемого типа и ожидайте обратный вызов управляемого кода внутри машинного кода, так как управляемый код не знает об этом сосуществовании.

В зависимости от ваших потребностей может быть возможным обход части этого ограничения, например

* управляемый код может вызывать p/Invoke в собственном коде. Для этого необходимо настроить управляемый код, чтобы разрешить настройку из машинного кода.

* Используйте такие продукты, как Xamarin. iOS, и предоставьте управляемую библиотеку, которая позволяла цели-C (в данном случае) подклассировать некоторые управляемые подкласса Нсобжект.

## <a name="objective-c-generated-code"></a>Сформированный код цели-C

### <a name="nullability"></a>Допускает значения NULL

В .NET нет метаданных, указывающих, является ли пустая ссылка приемлемой или нет для API. Большинство API-интерфейсов вызовут `ArgumentNullException`, если они не могут справиться с `null`ным аргументом. Это проблематично, так как обработка исключений с заданием на языке C — это что-то лучше избегать.

Так как мы не можем создать точные заметки о допустимости значений NULL в файлах заголовков и хотели бы сокращать управляемые исключения, мы по умолчанию задавали аргументы, отличные от NULL (`NS_ASSUME_NONNULL_BEGIN`), и добавим определенные особенности, если точность возможна, аннотации null.

### <a name="bitcode-ios"></a>Bitcode (iOS)

В настоящее время внедрение .NET не поддерживает bitcode в iOS, которые включены для некоторых шаблонов проектов Xcode. Для успешной связи с созданными платформами необходимо отключить.

* Для iOS bitcode не является обязательным для отправки приложений в AppStore Apple. Xamarin. iOS не поддерживает его для iOS, так как созданный bitcode — "inline Assembly". Это не дает никаких преимуществ на платформе iOS, так как не может быть оптимизировано на стороне сервера, но значительно увеличивает время создания двоичных файлов.

* Для tvOS и watchOS bitcode требуется для отправки приложений в AppStore Apple. Xamarin. iOS поддерживает bitcode для tvOS (как "Встраиваемая сборка") и watchOS (как "LLVM/IR") для выполнения этого требования.

* Для macOS поддержка bitcode в настоящее время не является обязательной и не поддерживается Xamarin. Mac.

![Bitcode, параметр](images/ios-bitcode-option.png)
