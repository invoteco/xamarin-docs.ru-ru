---
title: ะะพะดัะปัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั ะบะพัะฟะพัะฐัะธะฒะฝัั ะฟัะธะปะพะถะตะฝะธะน
description: ะ ะดะฐะฝะฝะพะน ะณะปะฐะฒะต ะพะฑัััะฝัะตััั, ะบะฐะบ ะผะพะดัะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ะฒัะฟะพะปะฝัะตััั ะฒ ะผะพะฑะธะปัะฝะพะผ ะฟัะธะปะพะถะตะฝะธะธ eShopOnContainers.
ms.prod: xamarin
ms.assetid: 4af82e52-f99b-4cad-b278-1745f190c240
ms.technology: xamarin-forms
author: davidbritch
ms.author: dabritch
ms.date: 08/07/2017
ms.openlocfilehash: 02aeedd5498c47950e2fbc0d218de05bc0bb3204
ms.sourcegitcommit: 4b402d1c508fa84e4fc3171a6e43b811323948fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "61298993"
---
# <a name="unit-testing-enterprise-apps"></a>ะะพะดัะปัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั ะบะพัะฟะพัะฐัะธะฒะฝัั ะฟัะธะปะพะถะตะฝะธะน

ะะพะฑะธะปัะฝัะต ะฟัะธะปะพะถะตะฝะธั ะธะผะตัั ัะฝะธะบะฐะปัะฝัะต ะฟัะพะฑะปะตะผั, ะฝะฐััะพะปัะฝัั ะธ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะน ะฝะต ะฝัะถะฝะพ ะฑะตัะฟะพะบะพะธัััั ะพ. ะะพะฑะธะปัะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ ะฑัะดัั ะพัะปะธัะฐัััั ะฟะพ ััััะพะนััะฒะฐ, ะบะพัะพััะต ะพะฝะธ ะธัะฟะพะปัะทััั, ะฒ ัะตัะตะฒะพะผ ะฟะพะดะบะปััะตะฝะธะธ, ะดะพัััะฟะฝะพััั ัะปัะถะฑ, ะฐ ัะฐะบะถะต ััะด ะดััะณะธั ัะฐะบัะพัะพะฒ. ะขะฐะบะธะผ ะพะฑัะฐะทะพะผ ะผะพะฑะธะปัะฝัะต ะฟัะธะปะพะถะตะฝะธั ะดะพะปะถะฝั ัะตััะธัะพะฒะฐัััั, ัะฐะบ ะบะฐะบ ะพะฝะธ ะฟะพะฝะฐะดะพะฑัััั ะฒ ัะตะฐะปัะฝะพะผ ะผะธัะต ะดะปั ัะปัััะตะฝะธั ะธั ะบะฐัะตััะฒะฐ, ะฝะฐะดะตะถะฝะพััะธ ะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ. ะกััะตััะฒัะตั ะผะฝะพะณะพ ัะธะฟะพะฒ ัะตััะธัะพะฒะฐะฝะธั, ะบะพัะพััะต ะดะพะปะถะฝั ะฒัะฟะพะปะฝััััั ะดะปั ะฟัะธะปะพะถะตะฝะธั, ะฒะบะปััะฐั ะผะพะดัะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต, ัะตััะธัะพะฒะฐะฝะธะต ะธะฝัะตะณัะฐัะธะธ ะธ ัะตััะธัะพะฒะฐะฝะธั ั ะผะพะดัะปัะฝัะผ ัะตััะธัะพะฒะฐะฝะธะตะผ, ััะพ ะฝะฐะธะฑะพะปะตะต ัะฐัะฟัะพัััะฐะฝะตะฝะฝะฐั ัะพัะผะฐ ัะตััะธัะพะฒะฐะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะธะฝัะตััะตะนัะฐ.

ะะพะดัะปัะฝัะน ัะตัั ะทะฐะฝะธะผะฐะตั ะฝะตะฑะพะปััะพะต ััััะพะนััะฒะพ ะฟัะธะปะพะถะตะฝะธั, ะพะฑััะฝะพ ะผะตัะพะด ะธ ะธะทะพะปะธัะพะฒะฐัั ะตะต ะพััะฐะฒัะฐััั ัะฐััั ะบะพะดะฐ ะฟัะพะฒะตััะตั, ััะพ ะพะฝะฐ ะฟัะฐะฒะธะปัะฝะพ ัะฐะฑะพัะฐะตั. ะะฐัะฐ ัะตะปั โ ะฟัะพะฒะตัะธัั, ััะพ ะบะฐะถะดะฐั ะตะดะธะฝะธัะฐ ััะฝะบัะธะธ ะฒัะฟะพะปะฝัะตั ะฝะฐะดะปะตะถะฐัะธะผ ะพะฑัะฐะทะพะผ, ะฟะพะทะฒะพะปัััะธะน ะพัะธะฑะบะธ ะฝะต ัะฐัะฟัะพัััะฐะฝะธะปะธัั ะฒ ะฟัะธะปะพะถะตะฝะธะต. ะะฑะฝะฐััะถะตะฝะธะต ะพัะธะฑะพะบ, ะณะดะต ะพะฝะธ ะฟัะพะธััะพะดัั ะฑะพะปะตะต ัััะตะบัะธะฒะตะฝ, ะฝะฐะฑะปัะดะฐั ะทะฐ ะฟะพัะปะตะดััะฒะธั ะพัะธะฑะบั ะบะพัะฒะตะฝะฝะพ ะฝะฐ ะฒัะพัะธัะฝัะน ัะพัะบะธ ัะฑะพั.

ะะพะดัะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ะผะฐะบัะธะผะฐะปัะฝะพ ะฒะปะธัะตั ะฝะฐ ะบะฐัะตััะฒะพ ะบะพะดะฐ ะฟัะธ ัะฒะปัะตััั ะฝะตะพััะตะผะปะตะผะพะน ัะฐัััั ัะฐะฑะพัะตะณะพ ะฟัะพัะตััะฐ ัะฐะทัะฐะฑะพัะบะธ ะฟัะพะณัะฐะผะผะฝะพะณะพ ะพะฑะตัะฟะตัะตะฝะธั. ะะฐะบ ัะพะปัะบะพ ะผะตัะพะด ะทะฐะฟะธัะฐะฝะฐ, ะผะพะดัะปัะฝัะต ัะตััั ะดะพะปะถะฝั ะฑััั ะฝะฐะฟะธัะฐะฝั ะดะปั ะฟัะพะฒะตัะบะธ ะฟะพะฒะตะดะตะฝะธั ะผะตัะพะดะฐ ะฒ ะพัะฒะตั ะฝะฐ ััะฐะฝะดะฐััะฝัะต, ะณัะฐะฝะธัะฝัะต ะธ ะฝะตะบะพััะตะบัะฝัะต ัะปััะฐะธ ะฒะฒะพะดะฐ ะดะฐะฝะฝัั, ะธ ััะพ ััะฐ ะฟัะพะฒะตัะบะฐ ัะฒะฝัะต ะธะปะธ ะฟัะตะดะฟะพะปะฐะณะฐะตะผัะต ะดะพะฟััะตะฝะธั, ัะดะตะปะฐะฝะฝัะต ะบะพะดะพะผ. ะัะพะผะต ัะพะณะพ ั ะะฐะทัะฐะฑะพัะบะฐ ะฝะฐ ะพัะฝะพะฒะต ัะตััะธัะพะฒะฐะฝะธั, ะผะพะดัะปัะฝัะต ัะตััั ัะพะทะดะฐัััั ะฟัะตะถะดะต ัะตะผ ะบะพะด. ะ ััะพะผ ัะปััะฐะต ะผะพะดัะปัะฝัะต ัะตััั ะฒ ะบะฐัะตััะฒะต ัะตัะฝะธัะตัะบะพะน ะดะพะบัะผะตะฝัะฐัะธะธ ะธ ัะฟะตัะธัะธะบะฐัะธะธ ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ.

> [!NOTE]
> ะะพะดัะปัะฝัะต ัะตััั โ ะพัะตะฝั ัััะตะบัะธะฒะฝะฐ ะฟัะพัะธะฒ ัะตะณัะตััะธะธ โ ัะพ ะตััั ััะฝะบัะธะพะฝะฐะปัะฝัะต ะฒะพะทะผะพะถะฝะพััะธ, ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฝัั ะดะปั ัะฐะฑะพัั, ะฝะพ ะฑัะปะธ ะทะฐะดะตะนััะฒััััั ะฟะพ ัะฑะพั ะฒะพ ะฒัะตะผั ะพะฑะฝะพะฒะปะตะฝะธั.

ะะพะดัะปัะฝัะต ัะตััั ะพะฑััะฝะพ ะธัะฟะพะปัะทัะตััั ัะฐะฑะปะพะฝ ัะฐัะฟะพะปะพะถะตะฝะธะต act ััะฒะตัะถะดะตะฝะธะต:

-   *ะฃะฟะพััะดะพัะธัั* ัะฐะทะดะตะปะต ะผะตัะพะดะฐ ะผะพะดัะปัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั ะธะฝะธัะธะฐะปะธะทะธััะตั ะพะฑัะตะบัั ะธ ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะทะฝะฐัะตะฝะธะต ะดะฐะฝะฝัั, ะบะพัะพััะน ะฟะตัะตะดะฐะตััั ะผะตัะพะดั ะดะปั ัะตััะฐ.
-   *ะะตะนััะฒะพะฒะฐัั* ัะฐะทะดะตะปะต ะฒัะทัะฒะฐะตั ะผะตัะพะด ะดะปั ัะตััะฐ ั ะฝะตะพะฑัะพะดะธะผัะผ ะฝะฐะฑะพัะพะผ ะฐัะณัะผะตะฝัะพะฒ.
-   *Assert* ัะฐะทะดะตะป ะฟัะพะฒะตััะตั, ััะพ ะผะตัะพะด ะดะปั ัะตััะฐ ะดะตะนััะฒะพะฒะฐะป, ะดะพะปะถะฝัะผ ะพะฑัะฐะทะพะผ.

ะกะปะตะดะพะฒะฐัั ััะพะผั ัะฐะฑะปะพะฝั ะณะฐัะฐะฝัะธััะตั, ััะพ ะผะพะดัะปัะฝัะต ัะตััั ะดะพัััะฟะฝั ะดะปั ััะตะฝะธั ะธ ัะพะณะปะฐัะพะฒะฐะฝะฝะพััั.

## <a name="dependency-injection-and-unit-testing"></a>ะะฝะตะดัะตะฝะธะต ะทะฐะฒะธัะธะผะพััะตะน ะธ ะผะพะดัะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต

ะะดะฝะธะผ ะธะท ััะธั ะฟัะธัะธะฝ ะทะฐะธะผััะฒะพะฒะฐะฝะธั ะธัะฟะพะปัะทัะตััั ัะปะฐะฑะพ ัะฒัะทะฐะฝะฝะฐั ะฐััะธัะตะบัััะฐ ัะฒะปัะตััั, ััะพ ะพะฝะฐ ัะฟัะพัะฐะตั ะผะพะดัะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต. ะะดะฝะธะผ ะธะท ัะธะฟะพะฒ, ะทะฐัะตะณะธัััะธัะพะฒะฐะฝะฝัั ั ะฟะพะผะพััั Autofac ัะฒะปัะตััั `OrderService` ะบะปะฐััะฐ. ะ ัะปะตะดัััะตะผ ะฟัะธะผะตัะต ะบะพะดะฐ ะฟะพะบะฐะทะฐะฝะพ ััััะบัััั ััะพะณะพ ะบะปะฐััะฐ:

```csharp
publicยclassยOrderDetailViewModelย:ยViewModelBase  
{  
ยยยยprivateยIOrderServiceย_ordersService;  

ยยยยpublicยOrderDetailViewModel(IOrderServiceยordersService)  
ยยยย{  
ยยยยยยยย_ordersServiceย=ยordersService;  
ยยยย}  
ยยยย...  
}
```

`OrderDetailViewModel` ะะปะฐัั ะธะผะตะตั ะทะฐะฒะธัะธะผะพััั ะพั `IOrderService` ัะธะฟะฐ ะบะพะฝัะตะนะฝะตัะฐ ัะฐะทัะตัะฐะตััั, ะบะพะณะดะฐ ะพะฝ ัะพะทะดะฐะตั ัะบะทะตะผะฟะปัั `OrderDetailViewModel` ะพะฑัะตะบัะฐ. ะขะตะผ ะฝะต ะผะตะฝะตะต ะฝะต ะฝัะถะฝะพ ัะพะทะดะฐะฒะฐัั `OrderService` ะผะพะดัะปัะฝัะน ัะตัั, ะบะพัะพััะน `OrderDetailViewModel` ะบะปะฐััะฐ, ะทะฐะผะตะฝะธัะต, `OrderService` ะพะฑัะตะบั ั ะผะฐะบะตั ะดะปั ัะตััะพะฒ. ะะฐะฝะฝะฐั ัะฒัะทั ะฟะพะบะฐะทะฐะฝะฐ ะฝะฐ ัะธั. 10-1.

![](unit-testing-images/unittesting.png "ะะปะฐััั, ัะตะฐะปะธะทัััะธะต ะธะฝัะตััะตะนั IOrderService")

**ะะธั. 10-1.** ะะปะฐััั, ัะตะฐะปะธะทัััะธะต ะธะฝัะตััะตะนั IOrderService

ะขะฐะบะพะน ะฟะพะดัะพะด ะฟะพะทะฒะพะปัะตั `OrderService` ะพะฑัะตะบัั ะฑััั ะฟะตัะตะดะฐะฝะฝัะผ ะฒ `OrderDetailViewModel` ะบะปะฐััะพะฒ ะฒะพ ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ะธ ะฒ ัะตะปัั ัะตััะธัะพะฒะฐะฝะธั, ะพะฝะฐ ะฟะพะทะฒะพะปัะตั `OrderMockService` ะบะปะฐัั, ะฟะตัะตะดะฐะฒะฐะตะผัะน ะฒ `OrderDetailViewModel` ะบะปะฐััะฐ ะฒะพ ะฒัะตะผั ัะตััะธัะพะฒะฐะฝะธั. ะัะฝะพะฒะฝะพะต ะฟัะตะธะผััะตััะฒะพ ััะพะณะพ ะฟะพะดัะพะดะฐ ะทะฐะบะปััะฐะตััั ัะพะผ, ััะพ ะพะฝ ะฟะพะทะฒะพะปัะตั ะผะพะดัะปัะฝัั ัะตััะพะฒ ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ะฑะตะท ะฝะตะพะฑัะพะดะธะผะพััะธ ะณัะพะผะพะทะดะบะธะผ ัะตััััั, ัะฐะบะธะต ะบะฐะบ ะฒะตะฑ-ัะปัะถะฑั ะธะปะธ ะฑะฐะทั ะดะฐะฝะฝัั.

## <a name="testing-mvvm-applications"></a>ะขะตััะธัะพะฒะฐะฝะธะต ะฟัะธะปะพะถะตะฝะธะน MVVM

ะขะตััะธัะพะฒะฐะฝะธะต ะผะพะดะตะปะธ ะธ ะผะพะดะตะปะธ ะฟัะตะดััะฐะฒะปะตะฝะธะน ะธะท ะฟัะธะปะพะถะตะฝะธะน MVVM ะธะดะตะฝัะธัะฝะฐ ัะตััะธัะพะฒะฐะฝะธะต ะปัะฑัะต ะดััะณะธะต ะบะปะฐััั, ะธ ัะต ะถะต ััะตะดััะฒะฐ ะธ ะผะตัะพะดั โ ะฝะฐะฟัะธะผะตั ะผะพะดัะปัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั ะธ ะผะฐะบะตัะธัะพะฒะฐะฝะธั, ะผะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัััั. ะขะตะผ ะฝะต ะผะตะฝะตะต ัััะตััะฒััั ะฝะตะบะพัะพััะต ัะฐะฑะปะพะฝั, ััะพ ัะฐัะฐะบัะตัะฝะพ ะดะปั ะผะพะดะตะปะธ ะธ ะบะปะฐััะพะฒ ะผะพะดะตะปะธ ะฟัะตะดััะฐะฒะปะตะฝะธั, ะบะพัะพััะต ะผะพะณัั ะธัะฟะพะปัะทะพะฒะฐัั ะฟัะตะธะผััะตััะฒะฐ ะผะตัะพะดะธะบะธ ัะตััะธัะพะฒะฐะฝะธั ะดะปั ะบะพะฝะบัะตัะฝะพะณะพ ััััะพะนััะฒะฐ.

> [!TIP]
> ะัะพัะตััะธััะนัะต ะพะดะฝั ะฒะตัั, ั ะบะฐะถะดัะผ ะผะพะดัะปัะฝัะผ ัะตััะพะผ. ะะต ัะปะตะดัะตั ัะพะฑะปะฐะทะฝััััั ะฟะพะทะฒะพะปะธั ะฟัะพะฒะตััะธ ะผะพะดัะปัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ัะฟัะฐะถะฝะตะฝะธะธ ะฑะพะปะตะต ัะตะผ ะพะดะฝะธะผ ะธะท ะฐัะฟะตะบัะพะฒ ะฟะพะฒะตะดะตะฝะธั ััััะพะนััะฒะฐ. ะญัะพ ะฒะตะดะตั ะบ ัะตััั, ะบะพัะพััะต ัะปะพะถะฝะพ ัะธัะฐัั ะธ ะพะฑะฝะพะฒะปััั. ะะฝ ะผะพะถะตั ัะฐะบะถะต ะฟัะธะฒะตััะธ ะบ ะฟััะฐะฝะธัะต ะฟัะธ ะธะฝัะตัะฟัะตัะฐัะธะธ ัะฑะพั.

ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะผะพะฑะธะปัะฝะพะณะพ ะฟัะธะปะพะถะตะฝะธั eShopOnContainers [xUnit](https://xunit.github.io/) ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ะผะพะดัะปัะฝะพะณะพ ัะตััะธัะพะฒะฐะฝะธั, ะบะพัะพัะพะต ะฟะพะดะดะตัะถะธะฒะฐะตั ะดะฒะฐ ัะฐะทะปะธัะฝัั ัะธะฟะฐ ะผะพะดัะปัะฝัั ัะตััะพะฒ:

-   ะคะฐะบัั, ัะตััั, ะบะพัะพััะต ะฒัะตะณะดะฐ ัะฒะปััััั ะทะฝะฐัะตะฝะธะต ัะฐะฒะฝะพ true, ะบะฐะบะพะน ัะตัั ะฝะตะธะทะผะตะฝัะตะผัั ััะปะพะฒะธะน.
-   ะขะตะพัะธะน, ัะตััั, ะบะพัะพััะต ะฒัะฟะพะปะฝััััั ัะพะปัะบะพ ะดะปั ะพะฟัะตะดะตะปะตะฝะฝะพะณะพ ะฝะฐะฑะพัะฐ ะดะฐะฝะฝัั.

ะะพะดัะปัะฝัะต ัะตััั, ะฒะบะปััะตะฝะฝัะต ะฒ ะผะพะฑะธะปัะฝะพะผ ะฟัะธะปะพะถะตะฝะธะธ eShopOnContainers, ัะตััั ัะฐะบัะพะฒ, ะธ ะฟะพััะพะผั ะบะฐะถะดัะน ะผะตัะพะด ะผะพะดัะปัะฝะพะณะพ ัะตััะฐ ัะฝะฐะฑะถะตะฝ `[Fact]` ะฐััะธะฑััะฐ.

> [!NOTE]
> ะกัะตะดััะฒะพ ะฒัะฟะพะปะฝะตะฝะธั ัะตััะพะฒ, ะฒัะฟะพะปะฝัะตะผัั ัะตััะพะฒ xUnit. ะะปั ะฒัะฟะพะปะฝะตะฝะธั ัะตััะพะฒ, ะทะฐะฟัััะธัะต ะฟัะพะตะบั eShopOnContainers.TestRunner ะดะปั ะฟะปะฐััะพัะผั, ะฝะตะพะฑัะพะดะธะผัะต.

### <a name="testing-asynchronous-functionality"></a>ะขะตััะธัะพะฒะฐะฝะธะต ะฐัะธะฝััะพะฝะฝัะต ััะฝะบัะธะธ

ะัะธ ัะตะฐะปะธะทะฐัะธะธ ัะฐะฑะปะพะฝะฐ MVVM, ะัะพัะผะพัั ะผะพะดะตะปะตะน ะพะฑััะฝะพ ะพะฟะตัะฐัะธะธ ัะปัะถะฑ, ัะฐััะพ ะฐัะธะฝััะพะฝะฝะพะณะพ ะฒัะทะพะฒะฐ. ะขะตััั ะดะปั ะบะพะดะฐ, ะฒัะทัะฒะฐััะตะณะพ ััะธ ะพะฟะตัะฐัะธะธ ะพะฑััะฝะพ ัะปัะถะธั ะทะฐะผะตะฝั ะผะฐะบะตัั ะดะปั ัะปัะถะฑ. ะ ัะปะตะดัััะตะผ ะฟัะธะผะตัะต ะบะพะดะฐ ะฟะพะบะฐะทะฐะฝะพ ัะตััะธัะพะฒะฐะฝะธะต ะฐัะธะฝััะพะฝะฝัั ััะฝะบัะธะพะฝะฐะปัะฝัั ะฒะพะทะผะพะถะฝะพััะตะน, ะฟะตัะตะดะฐะฒ ััะปัะณะฐ ะผะฐะบะตัะพะฒ ะฒ ะผะพะดะตะปั ะฟัะตะดััะฐะฒะปะตะฝะธั:

```csharp
[Fact]  
publicยasyncยTaskยOrderPropertyIsNotNullAfterViewModelInitializationTest()  
{  
ยยยยvarยorderServiceย=ยnewยOrderMockService();  
ยยยยvarยorderViewModelย=ยnewยOrderDetailViewModel(orderService);  

ยยยยvarยorderย=ยawaitยorderService.GetOrderAsync(1,ยGlobalSetting.Instance.AuthToken);  
ยยยยawaitยorderViewModel.InitializeAsync(order);  

ยยยยAssert.NotNull(orderViewModel.Order);  
}
```

ะญัะพั ะผะพะดัะปัะฝัะน ัะตัั ะฟัะพะฒะตััะตั, ััะพ `Order` ัะฒะพะนััะฒะพ `OrderDetailViewModel` ัะบะทะตะผะฟะปัั ะฑัะดะตั ะธะผะตัั ะทะฝะฐัะตะฝะธะต ะฟะพัะปะต `InitializeAsync` ะผะตัะพะด ะฑัะป ะฒัะทะฒะฐะฝ. `InitializeAsync` ะะตัะพะด ะฒัะทัะฒะฐะตััั ะฟัะธ ะฟะตัะตัะพะดะต ะฒ ัะพะพัะฒะตัััะฒัััะตะต ะฟัะตะดััะฐะฒะปะตะฝะธะต ะผะพะดะตะปะธ ะฟัะตะดััะฐะฒะปะตะฝะธั. ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะฒะตะดะตะฝะธั ะพ ะฝะฐะฒะธะณะฐัะธะธ, ัะผ. ะฒ ัะฐะทะดะตะปะต [ะฝะฐะฒะธะณะฐัะธะธ](~/xamarin-forms/enterprise-application-patterns/navigation.md).

ะะพะณะดะฐ `OrderDetailViewModel` ัะพะทะดะฐะตััั ัะบะทะตะผะฟะปัั, ะพะถะธะดะฐะตััั, ััะพ `OrderService` ะผะพะถะฝะพ ะพะฟัะตะดะตะปะธัั ะฒ ะบะฐัะตััะฒะต ะฐัะณัะผะตะฝัะฐ ัะบะทะตะผะฟะปัั. ะขะตะผ ะฝะต ะผะตะฝะตะต `OrderService` ะธะทะฒะปะตะบะฐะตั ะดะฐะฝะฝัะต ะธะท ะฒะตะฑ-ัะปัะถะฑั. ะขะฐะบะธะผ ะพะฑัะฐะทะพะผ `OrderMockService` ัะบะทะตะผะฟะปััะฐ, ัะพ ะตััั ะธะผะธัะฐัะธะพะฝะฝัั ะฒะตััะธั ะพะฑัะตะบัะฐ `OrderService` ะบะปะฐััะฐ, ัะบะฐะทะฐะฝะฝะพะต ะฒ ะบะฐัะตััะฒะต ะฐัะณัะผะตะฝัะฐ ะดะปั `OrderDetailViewModel` ะบะพะฝััััะบัะพั. ะะฐัะตะผ, ะบะพะณะดะฐ ะผะพะดะตะปั ะฟัะตะดััะฐะฒะปะตะฝะธั `InitializeAsync` ะฒัะทัะฒะฐะตััั ะผะตัะพะด, ะบะพัะพััะน ะฒัะทัะฒะฐะตั `IOrderService` ัะธะบัะธะฒะฝัั ะดะฐะฝะฝัั ะพะฟะตัะฐัะธะน, ะฟะพะปััะตะฝะฝัั, ะฐ ะฝะต ะฒะทะฐะธะผะพะดะตะนััะฒัะตั ั ะฒะตะฑ-ัะปัะถะฑั.

### <a name="testing-inotifypropertychanged-implementations"></a>ะขะตััะธัะพะฒะฐะฝะธะต ัะตะฐะปะธะทะฐัะธะธ INotifyPropertyChanged

ะะตะฐะปะธะทะฐัะธั `INotifyPropertyChanged` ะธะฝัะตััะตะนั ะฟะพะทะฒะพะปัะตั ะฟัะตะดััะฐะฒะปะตะฝะธั, ััะพะฑั ัะตะฐะณะธัะพะฒะฐัั ะฝะฐ ะธะทะผะตะฝะตะฝะธั, ะบะพัะพััะต ะฟะพะปััะตะฝั ะธะท ะฟัะตะดััะฐะฒะปะตะฝะธั ะผะพะดะตะปะธ ะธ ะผะพะดะตะปะธ. ะญัะธ ะธะทะผะตะฝะตะฝะธั ะฝะต ัะพะปัะบะพ ะดะฐะฝะฝัะต, ะพัะพะฑัะฐะถะฐะตะผัะต ะฒ ัะปะตะผะตะฝัะฐั ัะฟัะฐะฒะปะตะฝะธั โ ะพะฝะธ ัะฐะบะถะต ะธัะฟะพะปัะทััััั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟัะตะดััะฐะฒะปะตะฝะธั, ะฝะฐะฟัะธะผะตั ัะพััะพัะฝะธะน ะผะพะดะตะปะธ ะฟัะตะดััะฐะฒะปะตะฝะธั, ะฒัะทัะฒะฐััะธะต ะฐะฝะธะผะฐัะธะธ ะดะปั ะทะฐะฟััะบะฐ ะธะปะธ ัะปะตะผะตะฝัั ัะฟัะฐะฒะปะตะฝะธั, ะดะพะปะถะฝะพ ะฑััั ะพัะบะปััะตะฝะพ.

ะกะฒะพะนััะฒะฐ, ะบะพัะพััะต ะผะพะณัั ะพะฑะฝะพะฒะปััััั ะฝะตะฟะพััะตะดััะฒะตะฝะฝะพ ัะตัะตะท ะผะพะดัะปัะฝะพะณะพ ัะตััะฐ ะผะพะถะฝะพ ะฟัะพัะตััะธัะพะฒะฐัั ะฟััะตะผ ะฟัะธัะพะตะดะธะฝะตะฝะธั ะพะฑัะฐะฑะพััะธะบะฐ ัะพะฑััะธะน ะบ `PropertyChanged` ัะพะฑััะธะน ะธ ะฟัะพะฒะตัะบะธ, ะฝัะถะฝะพ ะปะธ ัะพะทะดะฐะฒะฐัั ัะพะฑััะธั ะฟะพัะปะต ัััะฐะฝะพะฒะบะธ ะฝะพะฒะพะณะพ ะทะฝะฐัะตะฝะธั ะดะปั ัะฒะพะนััะฒะฐ. ะ ัะปะตะดัััะตะผ ะฟัะธะผะตัะต ะบะพะดะฐ ะฟะพะบะฐะทะฐะฝ ัะฐะบะพะน ัะตัั:

```csharp
[Fact]  
publicยasyncยTaskยSettingOrderPropertyShouldRaisePropertyChanged()  
{  
ยยยยboolยinvokedย=ยfalse;  
ยยยยvarยorderServiceย=ยnewยOrderMockService();  
ยยยยvarยorderViewModelย=ยnewยOrderDetailViewModel(orderService);  

ยยยยorderViewModel.PropertyChangedย+=ย(sender,ยe)ย=>  
ยยยย{  
ยยยยยยยยifย(e.PropertyName.Equals("Order"))  
ยยยยยยยยยยยยinvokedย=ยtrue;  
ยยยย};  
ยยยยvarยorderย=ยawaitยorderService.GetOrderAsync(1,ยGlobalSetting.Instance.AuthToken);  
ยยยยawaitยorderViewModel.InitializeAsync(order);  

ยยยยAssert.True(invoked);  
}
```

ะญัะพั ะผะพะดัะปัะฝัะน ัะตัั ะฒัะทัะฒะฐะตั `InitializeAsync` ะผะตัะพะด `OrderViewModel` ะบะปะฐััะฐ, ััะพ ะฟัะธะฒะพะดะธั ะตะณะพ `Order` ะพะฑะฝะพะฒะปัะตะผะพะต ัะฒะพะนััะฒะพ. ะะพะดัะปัะฝัะน ัะตัั ะฒัะฟะพะปะฝัะตััั ััะฟะตัะฝะพ, ะฟัะธ ััะปะพะฒะธะธ, ััะพ `PropertyChanged` ัะพะฑััะธั ะดะปั `Order` ัะฒะพะนััะฒะพ.

### <a name="testing-message-based-communication"></a>ะขะตััะธัะพะฒะฐะฝะธะต ะพะฑะผะตะฝะฐ ัะพะพะฑัะตะฝะธัะผะธ

ะัะตะดััะฐะฒะปะตะฝะธะต ะผะพะดะตะปะธ, ะธัะฟะพะปัะทัััะธะต [ `MessagingCenter` ](xref:Xamarin.Forms.MessagingCenter) ะบะปะฐัั ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ะผะตะถะดั ะบะปะฐััะฐะผะธ ัะปะฐะฑะพัะฒัะทะฐะฝะฝัั ะตะดะธะฝะธัั ัะตััะธัััััั ะฟััะตะผ ะฟะพะดะฟะธัะบะธ ะฝะฐ ัะพะพะฑัะตะฝะธั, ะพัะฟัะฐะฒะปัะตะผะพะณะพ ั ะบะพะดะพะผ, ะบะฐะบ ะฟะพะบะฐะทะฐะฝะพ ะฒ ัะปะตะดัััะตะผ ะฟัะธะผะตัะต ะบะพะดะฐ:

```csharp
[Fact]  
publicยvoidยAddCatalogItemCommandSendsAddProductMessageTest()  
{  
ยยยยboolยmessageReceivedย=ยfalse;  
ยยยยvarยcatalogServiceย=ยnewยCatalogMockService();  
ยยยยvarยcatalogViewModelย=ยnewยCatalogViewModel(catalogService);  

ยยยยXamarin.Forms.MessagingCenter.Subscribe<CatalogViewModel,ยCatalogItem>(  
ยยยยยยยยthis,ยMessageKeys.AddProduct,ย(sender,ยarg)ย=>  
ยยยย{  
ยยยยยยยยmessageReceivedย=ยtrue;  
ยยยย});  
ยยยยcatalogViewModel.AddCatalogItemCommand.Execute(null);  

ยยยยAssert.True(messageReceived);  
}
```

ะญัะพั ะผะพะดัะปัะฝัะน ัะตัั ะฟัะพะฒะตััะตั, ััะพ `CatalogViewModel` ะฟัะฑะปะธะบัะตั `AddProduct` ัะพะพะฑัะตะฝะธะต ะฒ ะพัะฒะตั ะฝะฐ ะตะณะพ `AddCatalogItemCommand` ะฒัะฟะพะปะฝัะตะผะพะน. ะขะฐะบ ะบะฐะบ [ `MessagingCenter` ](xref:Xamarin.Forms.MessagingCenter) ะบะปะฐัั ะฟะพะดะดะตัะถะธะฒะฐะตั ัะพะพะฑัะตะฝะธั ะผะฝะพะณะพะฐะดัะตัะฝะพะน ะฟะตัะตะดะฐัะธ ะฟะพะดะฟะธัะพะบ, ะผะพะดัะปัะฝะพะณะพ ัะตััะฐ ะผะพะถะฝะพ ะฟะพะดะฟะธัะฐัััั ะฝะฐ `AddProduct` ัะพะพะฑัะตะฝะธะน ะธ ะฒัะฟะพะปะฝะตะฝะธั ะดะตะปะตะณะฐั ะพะฑัะฐัะฝะพะณะพ ะฒัะทะพะฒะฐ ะฒ ะพัะฒะตั ะฝะฐ ะตะณะพ ะฟะพะปััะตะฝะธะต. ะญัะพั ะดะตะปะตะณะฐั ะพะฑัะฐัะฝะพะณะพ ะฒัะทะพะฒะฐ, ะทะฐะดะฐะฝะฝัะน ะบะฐะบ ะปัะผะฑะดะฐ-ะฒััะฐะถะตะฝะธะต, ะทะฐะดะฐะตั `boolean` ะฟะพะปะต, ะบะพัะพัะพะต ะธัะฟะพะปัะทัะตััั `Assert` ะธะฝััััะบัะธั, ััะพะฑั ะฟัะพะฒะตัะธัั ะฟะพะฒะตะดะตะฝะธะต ัะตััะฐ.

### <a name="testing-exception-handling"></a>ะขะตััะธัะพะฒะฐะฝะธะต ะพะฑัะฐะฑะพัะบะธ ะธัะบะปััะตะฝะธะน

ะะพะดัะปัะฝัะต ัะตััั ะผะพะถะฝะพ ัะฐะบะถะต ะทะฐะฟะธัะฐัั, ัะฑะตะดะธัะตัั, ััะพ ะพะฟัะตะดะตะปะตะฝะฝัะต ะธัะบะปััะตะฝะธั ะดะปั ะฝะตะดะพะฟัััะธะผัะต ะดะตะนััะฒะธั ะธะปะธ ะฒัะพะดะฝัะต ะดะฐะฝะฝัะต, ะบะฐะบ ะฟะพะบะฐะทะฐะฝะพ ะฒ ัะปะตะดัััะตะผ ะฟัะธะผะตัะต ะบะพะดะฐ:

```csharp
[Fact]  
publicยvoidยInvalidEventNameShouldThrowArgumentExceptionText()  
{  
ยยยยvarยbehaviorย=ยnewยMockEventToCommandBehavior  
ยยยย{  
ยยยยยยยยEventNameย=ย"OnItemTapped"  
ยยยย};  
ยยยยvarยlistViewย=ยnewยListView();  

ยยยยAssert.Throws<ArgumentException>(()ย=>ยlistView.Behaviors.Add(behavior));  
}
```

ะญัะพั ะผะพะดัะปัะฝัะน ัะตัั ะฟัะธะฒะตะดะตั ะบ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธั ะธัะบะปััะตะฝะธั, ัะฐะบ ะบะฐะบ [ `ListView` ](xref:Xamarin.Forms.ListView) ัะฟัะฐะฒะปะตะฝะธั ะฝะต ะธะผะตะตั ัะพะฑััะธะต ั ะธะผะตะฝะตะผ `OnItemTapped`. `Assert.Throws<T>` ะะตัะพะด ัะฒะปัะตััั ัะฝะธะฒะตััะฐะปัะฝัะผ ะผะตัะพะดะพะผ ะณะดะต `T` โ ััะพ ัะธะฟ ะพะถะธะดะฐะตะผะพะณะพ ะธัะบะปััะตะฝะธั. ะัะณัะผะตะฝั, ะฟะตัะตะดะฐะฝะฝัะน ะฒ `Assert.Throws<T>` ะผะตัะพะด ัะฒะปัะตััั ะปัะผะฑะดะฐ-ะฒััะฐะถะตะฝะธะต, ะบะพัะพัะพะต ะฒัะทะพะฒะตั ะธัะบะปััะตะฝะธะต. ะขะฐะบะธะผ ะพะฑัะฐะทะพะผ, ะฟัะพะนะดะตั ะผะพะดัะปัะฝะพะณะพ ัะตััะฐ, ะฟัะธ ััะปะพะฒะธะธ, ััะพ ะปัะผะฑะดะฐ-ะฒััะฐะถะตะฝะธะต ะฒัะทัะฒะฐะตั `ArgumentException`.

>๐ก **ะกะพะฒะตั**: ะะทะฑะตะณะฐะนัะต ะฝะฐะฟะธัะฐะฝะธั ะผะพะดัะปัะฝัั ัะตััะพะฒ, ะบะพัะพััะต ะฐะฝะฐะปะธะทะธัััั ัััะพะบะธ ัะพะพะฑัะตะฝะธั ะธัะบะปััะตะฝะธะน. ะกััะพะบะธ ัะพะพะฑัะตะฝะธั ะธัะบะปััะตะฝะธะน ะผะพะณัั ะธะทะผะตะฝััััั ั ัะตัะตะฝะธะตะผ ะฒัะตะผะตะฝะธ, ะธ ะฟะพััะพะผั ะผะพะดัะปัะฝัะต ัะตััั, ะบะพัะพััะต ะฟะพะปะฐะณะฐัััั ะฝะฐ ะธั ะฝะฐะปะธัะธะต ััะธัะฐัััั ะทะฝะฐัะธัะตะปัะฝะพ ััะปะพะถะฝัะปะพ ัะฐะฑะพัั.

### <a name="testing-validation"></a>ะขะตััะธัะพะฒะฐะฝะธะต ะฟัะพะฒะตัะบะธ

ะกััะตััะฒัะตั ะดะฒะฐ ะฐัะฟะตะบัะฐ ัะตััะธัะพะฒะฐะฝะธะต ัะตะฐะปะธะทะฐัะธะธ ะฟัะพะฒะตัะบะธ: ัะตััะธัะพะฒะฐะฝะธะต, ััะพ ะฟัะฐะฒะธะปัะฝะพ ัะตะฐะปะธะทะพะฒะฐะฝั ะฒ ะฒัะต ะฟัะฐะฒะธะปะฐ ะฟัะพะฒะตัะบะธ ะธ ัะตััะธัะพะฒะฐะฝะธั, `ValidatableObject<T>` ะบะปะฐัั ะฒัะฟะพะปะฝัะตั ะดะพะปะถะฝัะผ ะพะฑัะฐะทะพะผ.

ะะพะณะธะบะฐ ะฟัะพะฒะตัะบะธ ะพะฑััะฝะพ ะฟัะพัั ะดะปั ัะตััะธัะพะฒะฐะฝะธั, ัะฐะบ ะบะฐะบ ััะพ ะพะฑััะฝะพ ะฐะฒัะพะฝะพะผะฝัะต ะฟัะพัะตััะฐ, ะณะดะต ะฒััะพะดะฝัั ะดะฐะฝะฝัั ะทะฐะฒะธัะธั ะพั ะฒัะพะดะฝัั ะดะฐะฝะฝัั. ะ ัะตะทัะปััะฐัั ะฒัะทะพะฒะฐ ะดะพะปะถะตะฝ ะฑััั ัะตััั `Validate` ะผะตัะพะด ะฒ ะบะฐะถะดะพะผ ัะฒะพะนััะฒะต, ะธะผะตะตั ะฟะพ ะบัะฐะนะฝะตะน ะผะตัะต ะพะดะธะฝ ัะฒัะทะฐะฝะฝะพะต ะฟัะฐะฒะธะปะพ ะฟัะพะฒะตัะบะธ, ะบะฐะบ ะฟะพะบะฐะทะฐะฝะพ ะฒ ัะปะตะดัััะตะผ ะฟัะธะผะตัะต ะบะพะดะฐ:

```csharp
[Fact]  
publicยvoidยCheckValidationPassesWhenBothPropertiesHaveDataTest()  
{  
ยยยยvarยmockViewModelย=ยnewยMockViewModel();  
ยยยยmockViewModel.Forename.Valueย=ย"John";  
ยยยยmockViewModel.Surname.Valueย=ย"Smith";  

ยยยยboolยisValidย=ยmockViewModel.Validate();  

ยยยยAssert.True(isValid);  
}
```

ะญัะพั ะผะพะดัะปัะฝัะน ัะตัั ะฟัะพะฒะตััะตั, ััะพ ะฟัะพะฒะตัะบะฐ ะฟัะพัะพะดะธั ััะฟะตัะฝะพ, ะบะพะณะดะฐ ะดะฒะฐ `ValidatableObject<T>` ัะฒะพะนััะฒ ะฒ `MockViewModel` ะพะฑะฐ ัะบะทะตะผะฟะปััะฐ ะธะผะตัั ะดะฐะฝะฝัั.

ะ ัะฐะบะถะต ะฟัะพะฒะตัะบะธ, ััะพ ะฟัะพะฒะตัะบะฐ ะฟัะพัะปะฐ ััะฟะตัะฝะพ, ะผะพะดัะปัะฝัะต ัะตััั ะดะปั ะฟัะพะฒะตัะบะธ ัะปะตะดัะตั ัะฐะบะถะต ะฟัะพะฒะตัะธัั ะทะฝะฐัะตะฝะธั `Value`, `IsValid`, ะธ `Errors` ัะฒะพะนััะฒะฐ ะบะฐะถะดะพะณะพ `ValidatableObject<T>` ัะบะทะตะผะฟะปัั, ััะพะฑั ัะฑะตะดะธัััั, ััะพ ะบะปะฐัั ะฒัะฟะพะปะฝัะตั ะดะพะปะถะฝัะผ ะพะฑัะฐะทะพะผ. ะ ัะปะตะดัััะตะผ ะฟัะธะผะตัะต ะบะพะดะฐ ะดะตะผะพะฝัััะธััะตััั ะผะพะดัะปัะฝัะน ัะตัั, ะบะพัะพััะน ะดะตะปะฐะตั ััะพ:

```csharp
[Fact]  
publicยvoidยCheckValidationFailsWhenOnlyForenameHasDataTest()  
{  
ยยยยvarยmockViewModelย=ยnewยMockViewModel();  
ยยยยmockViewModel.Forename.Valueย=ย"John";  

ยยยยboolยisValidย=ยmockViewModel.Validate();  

ยยยยAssert.False(isValid);  
ยยยยAssert.NotNull(mockViewModel.Forename.Value);  
ยยยยAssert.Null(mockViewModel.Surname.Value);  
ยยยยAssert.True(mockViewModel.Forename.IsValid);  
ยยยยAssert.False(mockViewModel.Surname.IsValid);  
ยยยยAssert.Empty(mockViewModel.Forename.Errors);  
ยยยยAssert.NotEmpty(mockViewModel.Surname.Errors);  
}
```

ะญัะพั ะผะพะดัะปัะฝัะน ัะตัั ะฟัะพะฒะตััะตั, ััะพ ะฟัะธ ัะฑะพะต ะฟัะพะฒะตัะบะธ `Surname` ัะฒะพะนััะฒะพ `MockViewModel` ะฝะต ัะพะดะตัะถะธั ะดะฐะฝะฝัั ะธ `Value`, `IsValid`, ะธ `Errors` ัะฒะพะนััะฒะฐ ะบะฐะถะดะพะณะพ `ValidatableObject<T>` ัะบะทะตะผะฟะปัั ะทะฐะดะฐะฝั ะฟัะฐะฒะธะปัะฝะพ.

## <a name="summary"></a>ะกะฒะพะดะบะฐ

ะะพะดัะปัะฝัะน ัะตัั ะทะฐะฝะธะผะฐะตั ะฝะตะฑะพะปััะพะต ััััะพะนััะฒะพ ะฟัะธะปะพะถะตะฝะธั, ะพะฑััะฝะพ ะผะตัะพะด ะธ ะธะทะพะปะธัะพะฒะฐัั ะตะต ะพััะฐะฒัะฐััั ัะฐััั ะบะพะดะฐ ะฟัะพะฒะตััะตั, ััะพ ะพะฝะฐ ะฟัะฐะฒะธะปัะฝะพ ัะฐะฑะพัะฐะตั. ะะฐัะฐ ัะตะปั โ ะฟัะพะฒะตัะธัั, ััะพ ะบะฐะถะดะฐั ะตะดะธะฝะธัะฐ ััะฝะบัะธะธ ะฒัะฟะพะปะฝัะตั ะฝะฐะดะปะตะถะฐัะธะผ ะพะฑัะฐะทะพะผ, ะฟะพะทะฒะพะปัััะธะน ะพัะธะฑะบะธ ะฝะต ัะฐัะฟัะพัััะฐะฝะธะปะธัั ะฒ ะฟัะธะปะพะถะตะฝะธะต.

ะะพะฒะตะดะตะฝะธะต ะพะฑัะตะบัะฐ ัะตััะธััะตะผะพะณะพ ะผะพะณัั ะฑััั ะธะทะพะปะธัะพะฒะฐะฝั, ะทะฐะผะตะฝะธะฒ ะทะฐะฒะธัะธะผัั ะพะฑัะตะบัะพะฒ ะฒ ะผะฐะบะตัั ะพะฑัะตะบัะพะฒ, ะบะพัะพััะต ะธะผะธัะธัััั ะฟะพะฒะตะดะตะฝะธะต ะทะฐะฒะธัะธะผัะต ะพะฑัะตะบัั. ะญัะพ ะฟะพะทะฒะพะปัะตั ะผะพะดัะปัะฝัั ัะตััะพะฒ ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ะฑะตะท ะฝะตะพะฑัะพะดะธะผะพััะธ ะณัะพะผะพะทะดะบะธะผ ัะตััััั, ัะฐะบะธะต ะบะฐะบ ะฒะตะฑ-ัะปัะถะฑั ะธะปะธ ะฑะฐะทั ะดะฐะฝะฝัั.

ะขะตััะธัะพะฒะฐะฝะธะต ะผะพะดะตะปะธ ะธ ะผะพะดะตะปะธ ะฟัะตะดััะฐะฒะปะตะฝะธะน ะธะท ะฟัะธะปะพะถะตะฝะธะน MVVM ะธะดะตะฝัะธัะฝะฐ ัะตััะธัะพะฒะฐะฝะธะต ะปัะฑัะต ะดััะณะธะต ะบะปะฐััั, ะธ ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ัะต ะถะต ััะตะดััะฒะฐ ะธ ะผะตัะพะดั.


## <a name="related-links"></a>ะกะฒัะทะฐะฝะฝัะต ัััะปะบะธ

- [ะกะบะฐัะฐะนัะต ัะปะตะบััะพะฝะฝัั ะบะฝะธะณั (2 ะะ ะฒ ัะพัะผะฐัะต PDF)](https://aka.ms/xamarinpatternsebook)
- [eShopOnContainers (GitHub) (ะฟัะธะผะตั)](https://github.com/dotnet-architecture/eShopOnContainers)
