---
title: Горячая перезагрузка XAML для Xamarin. Forms
description: Немедленно загружайте изменения в файл XAML, чтобы не создавать проект Xamarin. Forms после каждого изменения XAML.
ms.prod: xamarin
ms.assetid: E220F054-32EE-424C-A7E5-6156BE271519
ms.technology: xamarin-forms
author: maddyleger1
ms.author: maleger
ms.date: 03/14/2020
ms.openlocfilehash: a6cb5a0e3573ebf998bb2f81c08ff63c81678b54
ms.sourcegitcommit: ec112800a76089ab1db66fe24b8bbcc510e067b4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "80159812"
---
# <a name="xaml-hot-reload-for-xamarinforms"></a>Горячая перезагрузка XAML для Xamarin. Forms

Горячая перезагрузка XAML подключается к существующему рабочему процессу, чтобы повысить производительность и сэкономить время. Без горячей перезагрузки XAML необходимо создавать и развертывать приложения каждый раз, когда нужно увидеть изменение XAML. При использовании горячей перезагрузки при сохранении файла XAML изменения в работающем приложении отражаются в реальном времени. Кроме того, будет поддерживаться состояние навигации и данные, что позволит быстро выполнять итерацию по пользовательскому интерфейсу без потери места в приложении. Таким образом, при горячей перезагрузке XAML вы тратите меньше времени на повторное создание и развертывание приложений для проверки изменений пользовательского интерфейса.

> [!NOTE]
> Если вы создаете приложение WPF или UWP, см. статью [Горячая перезагрузка XAML для UWP и WPF](/visualstudio/debugger/xaml-hot-reload).
>
> Горячая перезагрузка XAML для Xamarin. Forms в настоящее время _не_ работает для проектов UWP Xamarin. Forms.

## <a name="system-requirements"></a>Требования к системе

| IDE/Framework | Требуется версия |
|------|------------------|
|Visual Studio 2019 | 16,4 или выше
Visual Studio 2019 для Mac | 8,4 или выше
Xamarin.Forms | 4,1 или выше

## <a name="enable-xaml-hot-reload-for-xamarinforms"></a>Включить горячую перезагрузку XAML для Xamarin. Forms

Если вы начинаете с шаблона, то горячая Загрузка XAML по умолчанию включена, и проект настроен для работы без дополнительной настройки. Отлаживать приложение на эмуляторе Android, симуляторе или физическом устройстве, а также изменить код XAML и сохранить файл, чтобы активировать горячую перезагрузку XAML.

Если вы работаете с существующим решением Xamarin. Forms, для использования горячей перезагрузки XAML не требуется дополнительная установка, но может потребоваться проверить конфигурацию, чтобы обеспечить оптимальную работу. Сначала включите его в параметрах интегрированной среды разработки:

* В Windows установите флажок **Включить горячую перезагрузку Xamarin** в **меню сервис** > **Параметры** > **Xamarin** > **Горячая перезагрузка**.
* На компьютере Mac установите флажок **Включить горячую перезагрузку Xamarin** в **Visual Studio** > **предпочтения** > **средства для** **горячей перезагрузки XAML**Xamarin > .
  * В предыдущих версиях Visual Studio для Mac меню находится в **Visual Studio** > **предпочтения** > **проекты** > "горячая" **Перезагрузка Xamarin**.

Затем в параметрах сборки Android и iOS убедитесь, что компоновщик имеет значение "не компоновать" или "Link None". Чтобы использовать горячую перезагрузку XAML с физическим устройством iOS, необходимо также установить флажок **включить интерпретатор Mono** (visual Studio 16,4 и более поздней версии) или добавить **интерпретатор** к **дополнительным** параметрам mtouch (Visual Studio 16,3 и ниже).

Можно использовать следующую блок-схему для проверки установки существующего проекта для использования с горячей перезагрузкой XAML:

![Настройка горячей загрузки XAML](hot-reload-images/hotreloadflowchart.png "Блок-схема настройки горячей загрузки XAML")

## <a name="resilient-reloading"></a>Устойчивая перезагрузка

Если вы вносите изменения в то, что невозможно перезагрузить горячую перезагрузку XAML, отобразится сообщение об ошибке с помощью IntelliSense. Эти изменения, известные как грубые изменения, содержат ошибочный ввод кода XAML или связывание элемента управления с несуществующим обработчиком событий. Даже при грубом изменении можно продолжить перезагрузку без перезапуска приложения — внести еще одно изменение в другое место в XAML-файле и нажать кнопку Сохранить. Грубое изменение не будет перезагружено, но другие изменения будут по прежнему применены.

## <a name="reload-on-multiple-platforms-at-once"></a>Повторная загрузка нескольких платформ

Горячая перезагрузка XAML поддерживает одновременную отладку в Visual Studio и Visual Studio для Mac. Вы можете одновременно развернуть устройства Android и целевой сервер iOS, чтобы увидеть изменения, отраженные на обеих платформах одновременно. Сведения об отладке на нескольких платформах см. в следующих статьях:
* **Windows** [: как задать несколько запускаемых проектов](https://docs.microsoft.com/visualstudio/ide/how-to-set-multiple-startup-projects?view=vs-2019)
* **Mac** . [Установка нескольких запускаемых проектов](https://docs.microsoft.com/visualstudio/mac/set-startup-projects?view=vsmac-2019)

## <a name="known-limitations"></a>Известные ограничения

* Другие целевые объекты Xamarin. Forms, такие как UWP и macOS, пока *не* поддерживаются. Ход выполнения поддержки UWP можно отслеживать [здесь](https://developercommunity.visualstudio.com/idea/661682/xaml-hot-reload-for-xamarinforms-on-uwp.html).
* Нельзя добавлять, удалять или переименовывать файлы или пакеты NuGet во время сеанса горячей загрузки XAML. При добавлении или удалении файла или пакета NuGet перестройте и повторно разверните приложение, чтобы продолжить использовать горячую перезагрузку XAML.
* Задайте для компоновщика значение " **не связывать** " или " **нет** " для оптимальной работы. Параметр **связать только пакет SDK** работает в большинстве случаев, но в некоторых случаях может завершиться ошибкой. Параметры компоновщика можно найти в параметрах сборки Android и iOS.
* Для отладки на физическом iPhone требуется, чтобы интерпретатор использовал горячую перезагрузку XAML. Для этого откройте параметры проекта, перейдите на вкладку сборка iOS и убедитесь, что параметр **включить интерпретатор Mono** включен. Может потребоваться изменить параметр **платформы** в верхней части страницы свойств на **iPhone**.
* Все ссылки, созданные путем назначения элемента управления другому полю или свойству с помощью его `x:Name` значения, не будут перезагружены.
* Обновление визуальной иерархии приложения оболочки в Аппшелл. XAML может вызвать проблемы, связанные с сохранением состояния приложения. Если возникают проблемы, перестройте приложение, чтобы продолжить перезагрузку.
* Горячая перезагрузка XAML не может перезагрузить C# код, включая обработчики событий, пользовательские элементы управления, код программной части страницы и дополнительные классы.

## <a name="more-resources"></a>Дополнительные ресурсы

* [Советы и рекомендации по горячей загрузке XAML](https://devblogs.microsoft.com/xamarin/tips-tricks-xaml-hot-reload/)
* [Углубленная перезагрузка XAML для Xamarin. Forms: Xamarin-шоу](https://www.youtube.com/watch?v=crhjjPjzknk)

## <a name="troubleshooting"></a>Устранение неполадок

* Если не удается инициализировать горячую перезагрузку XAML:
  * Обновите версию Xamarin. Forms.
  * Убедитесь, что вы используете последнюю версию интегрированной среды разработки.
  * Задайте для параметров компоновщика Android или iOS значение **не связывать** в параметрах сборки проекта.
* Если при сохранении XAML-файла ничего не происходит, убедитесь, что в интегрированной среде разработки активирована Горячая перезагрузка XAML.
* Если отладка выполняется на физическом iPhone и приложение перестает отвечать, убедитесь, что интерпретатор включен. Чтобы включить его, установите флажок **включить интерпретатор Mono** (Visual Studio 16.4/8.4 и выше) или Add **--интерпретатор** в поле **Дополнительные аргументы mtouch** (Visual Studio 16.3/8.3 и более ранние версии) в параметрах сборки iOS.

Чтобы сообщить об ошибке, используйте **справку** > **Отправить отзыв** > **сообщить о проблеме** в Windows и **помочь** > **сообщить о проблеме** на компьютере Mac.
